OBJECT Page 11020207 Project/Cost Component Control
{
  OBJECT-PROPERTIES
  {
    Date=;
    Time=;
    Version List=4PS14.00;
  }
  PROPERTIES
  {
    CaptionML=[DEU=öberwachung Projekt/Kostenkomp.;
               ENU=Project/Cost Component Control;
               NLD=Bewaking project kostencomponent;
               NOR=Kontroll av prosjekt/kostkomponent;
               SVE=Projekt-/kostnadsdelskontroll];
    SaveValues=Yes;
    SourceTable=Table11020297;
    DataCaptionExpr=Caption;
    PageType=ListPlus;
    PromotedActionCategoriesML=[DEU=Neu,Verarbeiten,Bericht,ProjektprÅfung;
                                ENU=New,Process,Report,Project Control;
                                NLD=Nieuw,Proces,Lijst,Projectbewaking;
                                NOR=Ny,Behandle,Rapport,Prosjektkontroll;
                                SVE=Ny,Behandla,Rapport,Projektkontroll];
    OnOpenPage=VAR
                 DetermineProductionDate@1210190001 : Codeunit 11012014;
                 DetermPrognosisDate@1210190000 : Codeunit 11012029;
               BEGIN
                 CODEUNIT.RUN(CODEUNIT::CreateControlLinesProjCostObj,gJobRec);
                 CostContrCreateCu.ControlCostComponent(gJobRec);
                 DetermineProductionDate.DetermineBothDates(gJobRec,FALSE);
                 DetermPrognosisDate.DetermineBothDates(gJobRec);

                 IF gJobRec."No." <> '' THEN
                   SETRANGE("Project No.",gJobRec."No.");

                 PeriodFilter := gJobRec.GETFILTER("Period Filter");
                 PeriodType := gJobRec.GETRANGEMAX("Period Type Filter");
               END;

    OnAfterGetRecord=BEGIN
                       CalcAmounts;
                     END;

    ActionList=ACTIONS
    {
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 1210190030;1 ;Action    ;
                      CaptionML=[DEU=Vorperiode;
                                 ENU=Previous Period;
                                 NLD=Vorige periode;
                                 NOR=Forrige periode;
                                 SVE=FîregÜende period];
                      ToolTipML=[DEU=Vorperiode;
                                 ENU=Previous Period;
                                 NLD=Vorige periode;
                                 NOR=Forrige periode;
                                 SVE=FîregÜende period];
                      Promoted=Yes;
                      Image=PreviousRecord;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 FindPeriod('<=');
                                 PeriodTypeOnAfterValidate;

                                 //SearchPeriodCu.FindPeriod(gJobRec,PeriodType,'<=');
                                 //CurrPage.UPDATE;
                               END;
                                }
      { 1210190031;1 ;Action    ;
                      CaptionML=[DEU=Folgeperiode;
                                 ENU=Next Period;
                                 NLD=Volgende periode;
                                 NOR=Neste periode;
                                 SVE=NÑsta period];
                      ToolTipML=[DEU=Folgeperiode;
                                 ENU=Next Period;
                                 NLD=Volgende periode;
                                 NOR=Neste periode;
                                 SVE=Visa informationen baserad pÜ nÑsta period. Om du stÑller in fÑltet Visa efter pÜ Dag Ñndras dagsfiltret till dagen fîre.];
                      Promoted=Yes;
                      Image=NextRecord;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 FindPeriod('>=');
                                 PeriodTypeOnAfterValidate;

                                 //SearchPeriodCu.FindPeriod(gJobRec,PeriodType,'>=');
                                 //CurrPage.UPDATE;
                               END;
                                }
      { 1210190021;0 ;ActionContainer;
                      ActionContainerType=RelatedInformation }
      { 1210190017;1 ;Action    ;
                      Name=Cost Object Labor;
                      CaptionML=[DEU=KostentrÑger Arbeit;
                                 ENU=Cost Object Labor;
                                 NLD=Kostendrager arbeid;
                                 NOR=Kostnadsobjekt, arbeidskraft;
                                 SVE=Kostnadsobjekt, arbetskraft];
                      Promoted=Yes;
                      Image=ItemTrackingLedger;
                      PromotedCategory=Category4;
                      OnAction=BEGIN
                                 CLEAR(CostObjectFormLAbor);
                                 CostObjectFormLAbor.SetDefaultCostComp(gJobRec, "Cost Component");
                                 CostObjectFormLAbor.RUNMODAL;
                               END;
                                }
      { 1210190015;1 ;Action    ;
                      Name=Cost Object Material;
                      CaptionML=[DEU=KostentrÑger Material;
                                 ENU=Cost Object Material;
                                 NLD=Kostendrager materiaal;
                                 NOR=Kostnadsobjekt, Materiale;
                                 SVE=Kostnadsobjekt, material];
                      Promoted=Yes;
                      Image=ItemTrackingLedger;
                      PromotedCategory=Category4;
                      OnAction=BEGIN
                                 CLEAR(CostObjectFormOther);
                                 CostObjectFormOther.SetDefaultCostComp(gJobRec, "Cost Component", 1);
                                 CostObjectFormOther.RUN;
                               END;
                                }
      { 1210190013;1 ;Action    ;
                      Name=Cost Object Subcontracting;
                      CaptionML=[DEU=KostentrÑger Subunternehmung;
                                 ENU=Cost Object Subcontracting;
                                 NLD=Kostendrager onderaanneming;
                                 NOR=Kostnadsobjekt, Underleverandõr;
                                 SVE=Kostnadsobjekt, underentreprenad];
                      Promoted=Yes;
                      Image=ItemTrackingLedger;
                      PromotedCategory=Category4;
                      OnAction=BEGIN
                                 CLEAR(CostObjectFormOther);
                                 CostObjectFormOther.SetDefaultCostComp(gJobRec, "Cost Component", 2);
                                 CostObjectFormOther.RUN;
                               END;
                                }
      { 1210190011;1 ;Action    ;
                      Name=Cost Object Plant;
                      CaptionML=[DEU=KostentrÑger Werkzeug;
                                 ENU=Cost Object Plant;
                                 NLD=Kostendrager materieel;
                                 NOR=Kostnadsobjekt, maskin;
                                 SVE=Kostnadsobjekt, Maskin];
                      Promoted=Yes;
                      Image=ItemTrackingLedger;
                      PromotedCategory=Category4;
                      OnAction=BEGIN
                                 CLEAR(CostObjectFormOther);
                                 CostObjectFormOther.SetDefaultCostComp(gJobRec, "Cost Component", 3);
                                 CostObjectFormOther.RUN;
                               END;
                                }
      { 1210190009;1 ;Action    ;
                      Name=Cost Object Sundry;
                      CaptionML=[DEU=KostentrÑger öbriges;
                                 ENU=Cost Object Sundry;
                                 NLD=Kostendrager overige;
                                 NOR=Kostnadsobjekt, diverse;
                                 SVE=Kostnadsobjekt, diverse];
                      Promoted=Yes;
                      Image=ItemTrackingLedger;
                      PromotedCategory=Category4;
                      OnAction=BEGIN
                                 CLEAR(CostObjectFormOther);
                                 CostObjectFormOther.SetDefaultCostComp(gJobRec, "Cost Component", 4);
                                 CostObjectFormOther.RUN;
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1210190006;1;Group  ;
                CaptionML=[DEU=Optionen;
                           ENU=Options;
                           NLD=Opties;
                           NOR=Alternativer;
                           SVE=Alternativ] }

    { 1210190005;2;Field  ;
                CaptionML=[DEU=Anzeigen nach;
                           ENU=View by;
                           NLD=Weergeven per;
                           NOR=Vis per;
                           SVE=Visa per];
                OptionCaptionML=[DEU=Tag,Woche,Monat,Quartal,Jahr,Buchhaltungsperiode;
                                 ENU=Day,Week,Month,Quarter,Year,Accounting Period;
                                 NLD=Dag,Week,Maand,Kwartaal,Jaar,Boekingsperiode;
                                 NOR=Dag,Uke,MÜned,Kvartal,èr,bokfõringsperiode;
                                 SVE=Dag,Vecka,MÜnad,Kvartal,èr,Bokfîringsperiod];
                SourceExpr=PeriodType;
                OnValidate=BEGIN
                             FindPeriod('');
                             PeriodTypeOnAfterValidate;
                           END;
                            }

    { 1210190004;2;Field  ;
                CaptionML=[DEU=Datumsfilter;
                           ENU=Date Filter;
                           NLD=Datumfilter;
                           NOR=Datofilter;
                           SVE=Datumfilter];
                SourceExpr=PeriodFilter;
                OnValidate=VAR
                             TextManagement@1001 : Codeunit 41;
                           BEGIN
                             TextManagement.MakeDateFilter(PeriodFilter);
                             gJobRec.SETFILTER("Period Filter", PeriodFilter);
                             PeriodFilter := gJobRec.GETFILTER("Period Filter");

                             PeriodFilterOnAfterValidate;
                           END;
                            }

    { 1210190007;1;Group  ;
                Name=Cost Components;
                GroupType=Group }

    { 1210190000;2;Group  ;
                Editable=FALSE;
                GroupType=Repeater }

    { 1210190001;3;Field  ;
                SourceExpr="Cost Component" }

    { 1210190003;3;Field  ;
                SourceExpr=Description }

    { 1210190008;3;Field  ;
                Name=OriginalBudgetAmountDec;
                CaptionML=[DEU=UrsprÅngliches Budget;
                           ENU=Original Budget;
                           NLD=Originele Begroting;
                           NOR=Opprinnelig budsjett;
                           SVE=Ursprunglig budget];
                SourceExpr=OriginalBudgetAmountDec }

    { 1210190010;3;Field  ;
                Name=AdjustmentsDec;
                CaptionML=[DEU=Korrekturen;
                           ENU=Adjustments;
                           NLD=Correcties;
                           NOR=Justeringer;
                           SVE=Justeringar];
                SourceExpr=AdjustmentsDec }

    { 1210190012;3;Field  ;
                Name=AdjustmentsHoursDec;
                CaptionML=[DEU=Korrekturen Stunden;
                           ENU=Adjustments Hours;
                           NLD=Correcties uren;
                           NOR=Justerte timer;
                           SVE=Justerade timmar];
                SourceExpr=AdjustmentsHoursDec;
                Visible=FALSE }

    { 1210190014;3;Field  ;
                Name=ExtensionDec;
                CaptionML=[DEU=Erweiterungen;
                           ENU=Extensions;
                           NLD=Meer- minderwerk;
                           NOR=ETA;
                           SVE=TillÑgg];
                SourceExpr=ExtensionDec }

    { 1210190016;3;Field  ;
                Name=ExtensionHoursDec;
                CaptionML=[DEU=Sonderleistungen Stunden;
                           ENU=Extensions Hours;
                           NLD=Meer- minderwerk uren;
                           NOR=ETA-timer;
                           SVE=éTA-timmar];
                SourceExpr=ExtensionHoursDec;
                Visible=FALSE }

    { 1210190018;3;Field  ;
                Name=OptionsDec;
                CaptionML=[DEU=Optionen;
                           ENU=Options;
                           NLD=Meerwerkopties;
                           NOR=Alternativer;
                           SVE=Alternativ];
                SourceExpr=OptionsDec }

    { 1210190022;3;Field  ;
                CaptionML=[DEU=Gesamtbudget;
                           ENU=Total Budget;
                           NLD=Begroot totaal;
                           NOR=Budsjett Total;
                           SVE=Total budget];
                SourceExpr=[OriginalBudgetAmountDec + AdjustmentsDec + ExtensionDec + OptionsDec ] }

    { 1210190020;3;Field  ;
                Name=BudgetHoursDec;
                CaptionML=[DEU=Veranschlagte Stunden;
                           ENU=Buget Hours;
                           NLD=Begrote uren;
                           NOR=Budsjettimer;
                           SVE=Budgettimmar];
                SourceExpr=BudgetHoursDec }

    { 1210190058;3;Field  ;
                Name=PurchaseBudgetDec;
                CaptionML=[DEU=Einkaufsbudget;
                           ENU=Purchase Budget;
                           NLD=Inkoopbudget;
                           NOR=Innkjõpsbudsjett;
                           SVE=Inkîpsbudget];
                SourceExpr=PurchaseBudgetDec;
                Visible=FALSE }

    { 1210190046;3;Field  ;
                Name=PurchaseDec;
                CaptionML=[DEU=Einkauf;
                           ENU=Purchase;
                           NLD=Inkoop;
                           NOR=Innkjõp;
                           SVE=Inkîp];
                SourceExpr=PurchaseDec;
                Visible=FALSE }

    { 1100485000;3;Field  ;
                CaptionML=[DEU=Einkaufsperiode;
                           ENU=Purchase Period;
                           NLD=Inkoop periode;
                           NOR=Innkjõpsperiode;
                           SVE=Inkîpsperiod];
                SourceExpr=PurchasePeriodDec;
                Visible=FALSE }

    { 1210190100;3;Field  ;
                Name=PurchasePurchActionDec;
                CaptionML=[DEU=Einkauf (Einkaufsmarkierung);
                           ENU=Purchase (Purchase Action);
                           NLD=Inkoop (inkoopactie);
                           NOR=Innkjõp (Innkjõpshandling);
                           SVE=Inkîp (inkîpsÜtgÑrd)];
                SourceExpr=PurchasePurchActionDec;
                Visible=FALSE }

    { 1210190104;3;Field  ;
                Name=OpenPurchDec;
                CaptionML=[DEU=Ausstehend (Einkauf);
                           ENU=Open (Purchase);
                           NLD=Openstaand (inkoop);
                           NOR=èpne innkjõp;
                           SVE=ôppna inkîp];
                SourceExpr=OpenPurchDec;
                Visible=FALSE }

    { 1210190054;3;Field  ;
                Name=ReceivedNotInvoicedDec;
                CaptionML=[DEU=Eingegangen/Nicht fakturiert;
                           ENU=Received/Not Invoiced;
                           NLD=Ontvangen/Niet gefactureerd;
                           NOR=Mottatt/ikke fakturert;
                           SVE=Mottaget/inte fakturerat];
                SourceExpr=ReceivedNotInvoicedDec;
                Visible=FALSE }

    { 1210190052;3;Field  ;
                Name=OpenOvhSurchPurchaseDec;
                CaptionML=[DEU=AK Verpflichtungen (Einkauf);
                           ENU=Overhead Surcharge Open (Purchase);
                           NLD=AK verplichtingen (inkoop);
                           NOR=Tilleggsgebyr pÜ overhead Üpen (innkjõp);
                           SVE=ôppen overheadkostnad (inkîp)];
                SourceExpr=OpenOvhSurchPurchaseDec;
                Visible=FALSE }

    { 1210190060;3;Field  ;
                Name=ReceivedNotInvoicedHoursDec;
                CaptionML=[DEU=Eingegangen/Nicht-fakt. Stunden;
                           ENU=Received Not Invoiced Hours;
                           NLD=Ontvangen/Niet gef.uren;
                           NOR=Mottatte ikke-fakturerte timer;
                           SVE=Mottagna, inte fakturerade timmar];
                SourceExpr=ReceivedNotInvoicedHoursDec;
                Visible=FALSE }

    { 1210190050;3;Field  ;
                Name=RiscCoverageDec;
                CaptionML=[DEU=Absicherung;
                           ENU=Risc Coverage;
                           NLD=Risicodekking;
                           NOR=Riskdekning;
                           SVE=RisktÑckning];
                SourceExpr=RiscCoverageDec;
                Visible=FALSE }

    { 1210190048;3;Field  ;
                Name=RiscCoveragWithdrawDec;
                CaptionML=[DEU=Freiwerdung Absicherung;
                           ENU=Risc Coverage Withdraw;
                           NLD=Vrijval risicodekking;
                           NOR=Riskdekning Uttak?;
                           SVE=RisktÑckningsuttag];
                SourceExpr=RiscCoveragWithdrawDec;
                Visible=FALSE }

    { 1210190107;3;Field  ;
                Name=WageCostsToPostDec;
                CaptionML=[DEU=Ausstehender Betrag (Stunden);
                           ENU=Open Amount (Hours);
                           NLD=Openstaand bedrag (uren);
                           NOR=èpne belõp (Timer);
                           SVE=ôppna belopp (timmar)];
                SourceExpr=OpenAmountHoursDec;
                Visible=FALSE }

    { 1210190109;3;Field  ;
                Name=OpenOvhSurchHoursDec;
                CaptionML=[DEU=AK offen (Stunden);
                           ENU=Open Ovh. Surch. (Hours);
                           NLD=AK openstaand (uren);
                           NOR=èpen tilleggsgebyr for overhead (Timer);
                           SVE=ôppen overheadkostnad (timmar)];
                SourceExpr=OpenOvhSurchHoursDec;
                Visible=FALSE }

    { 1210190070;3;Field  ;
                Name=ActualcostsDec;
                CaptionML=[DEU=Ist;
                           ENU=Actual;
                           NLD=Besteed;
                           NOR=Faktisk;
                           SVE=Faktisk];
                SourceExpr=ActualCostsDec }

    { 1210190044;3;Field  ;
                Name=ActualHoursDec;
                CaptionML=[DEU=Verwendete Stunden;
                           ENU=Actual Hours;
                           NLD=Bestede uren;
                           NOR=Reelle timer;
                           SVE=Verkliga timmar];
                SourceExpr=ActualHoursDec }

    { 1100485004;3;Field  ;
                CaptionML=[DEU=VerfÅgbar;
                           ENU=Available;
                           NLD=Beschikbaar;
                           NOR=Disponibelt;
                           SVE=Disponibelt];
                SourceExpr=AvailableDec;
                Visible=FALSE }

    { 1210190074;3;Field  ;
                CaptionML=[DEU=EinstandsbetrÑge;
                           ENU=Total Costs;
                           NLD=Totale kosten;
                           NOR=Totale kost;
                           SVE=Totala kostnader];
                OptionCaptionML=[NOR=Total kost;
                                 SVE=Total kostnad];
                SourceExpr=TotCostDec }

    { 1100485002;3;Field  ;
                CaptionML=[DEU=Summen Stunden;
                           ENU=Total Hours;
                           NLD=Totale uren;
                           NOR=Timer totalt;
                           SVE=Timmar totalt];
                SourceExpr=TotHoursDec;
                Visible=FALSE }

    { 1210190076;3;Field  ;
                Name=PurchaseCostDec;
                CaptionML=[DEU=Einstandsbetrag (Einkaufsmark.);
                           ENU=Total Costs (Purchase Action);
                           NLD=Totale kosten (inkoopactie);
                           NOR=Totalkoster (Innkjõpshandling);
                           SVE=Totalkostnader (inkîpsÜtgÑrd)];
                SourceExpr=PurchaseCostDec;
                Visible=FALSE }

    { 1210190078;3;Field  ;
                Name=AllowedDec;
                CaptionML=[DEU=Zugelassen;
                           ENU=Allowed;
                           NLD=Toegestaan;
                           NOR=Tillatt;
                           SVE=TillÜten];
                SourceExpr=AllowedDec;
                Visible=TRUE }

    { 1210190080;3;Field  ;
                Name=AllowedHoursDec;
                CaptionML=[DEU=Zugelassene Stunden;
                           ENU=Allowed Hours;
                           NLD=Toegestane uren;
                           NOR=Tillatte timer;
                           SVE=TillÜtna timmar];
                SourceExpr=AllowedHoursDec }

    { 1210190064;3;Field  ;
                Name=ResultDec;
                CaptionML=[DEU=Result;
                           ENU=Result;
                           NLD=Resultaat;
                           NOR=Resultat;
                           SVE=Resultat];
                SourceExpr=ResultDec }

    { 1210190102;3;Field  ;
                Name=Progosisdec;
                CaptionML=[DEU=Prognose;
                           ENU=Prognose;
                           NLD=Prognose;
                           NOR=Prognose;
                           SVE=Prognos];
                SourceExpr=Prognosisdec;
                Visible=FALSE }

    { 1210190111;3;Field  ;
                CaptionML=[DEU=Prognosestunden;
                           ENU=Hours Prognosis;
                           NLD=Prognose uren;
                           NOR=Timer, prognose;
                           SVE=Timmar, prognos];
                SourceExpr=PrognHoursDec;
                Visible=FALSE }

    { 1210190082;3;Field  ;
                Name=PrognosisTotalCost;
                CaptionML=[DEU=Prognostizierter Einstandsbetrag;
                           ENU=Prognosis Total Cost;
                           NLD=Geprognosticeerde totale kosten;
                           NOR=Prognose for totale kostnader;
                           SVE=Prognos totala kostnader];
                SourceExpr=PrognTotCostDec;
                Visible=FALSE }

    { 1210190084;3;Field  ;
                Name=PrognosisResult;
                CaptionML=[DEU=Prognostiziertes Ergebnis;
                           ENU=Prognosis Result;
                           NLD=Geprognosticeerd resultaat;
                           NOR=Prognoseresultat;
                           SVE=Prognosresultat];
                SourceExpr=PrognResultDec;
                Visible=FALSE }

    { 1210190086;3;Field  ;
                Name=PrognEndResultDec;
                CaptionML=[DEU=Prognostiziertes Endergebnis;
                           ENU=Prognosis End Result;
                           NLD=Geprognosticeerd eindresultaat;
                           NOR=Forventet Sluttresultat;
                           SVE=FîrvÑntat \slutresultat];
                SourceExpr=PrognEndResultDec;
                Visible=FALSE }

    { 1210190062;3;Field  ;
                Name=ActualsPeriodDec;
                CaptionML=[DEU=Ist-Kosten Periode;
                           ENU=Actual Cost Period;
                           NLD=Besteed Periode;
                           NOR=Faktisk Kostperiode;
                           SVE=Verklig kostnadsperiod];
                SourceExpr=ActualsPeriodDec;
                Visible=FALSE }

    { 1210190066;3;Field  ;
                Name=ActualHoursPeriodDec;
                CaptionML=[DEU=Verwendete Stunden Periode;
                           ENU=Actual Hours Period;
                           NLD=Bestede Uren Periode;
                           NOR=Faktisk Timeperiode;
                           SVE=Verklig timperiod];
                SourceExpr=ActualHoursPeriodDec;
                Visible=FALSE }

    { 1210190088;3;Field  ;
                Name=AllowedPeriod;
                CaptionML=[DEU=Gestattete Periode;
                           ENU=Allowed Costs Period;
                           NLD=Toegestaan Periode;
                           NOR=Tillatte koster, periode;
                           SVE=TillÜtna kostnader, period];
                SourceExpr=AllowedDec - PrevAllowedDec;
                Visible=FALSE }

    { 1210190068;3;Field  ;
                Name=AllowedHoursPeriod;
                CaptionML=[DEU=Zugelassene Stunden Periode;
                           ENU=Allowed Hours Period;
                           NLD=Toegestane Uren Periode;
                           NOR=Tillatte timer, periode;
                           SVE=TillÜtna timmar, period];
                SourceExpr=AllowedHoursDec-PrevAllowedHoursDec;
                Visible=FALSE }

    { 1210190090;3;Field  ;
                Name=PurchaseResult;
                CaptionML=[DEU=Einkaufsergebnis;
                           ENU=Purchase Result;
                           NLD=Inkoopresultaat;
                           NOR=Innkjõpsresultat;
                           SVE=Inkîpsresultat];
                SourceExpr=PurchResultDec;
                Visible=FALSE }

    { 1210190092;3;Field  ;
                Name=EstimatedPurchResultdec;
                CaptionML=[DEU=Vorkalkulatorisches Einkaufsergebnis;
                           ENU=Estimated Purchase Result;
                           NLD=Voorcalculatorisch inkoopresultaat;
                           NOR=Kalkulert Innkjõpsresultat;
                           SVE=Kalkylerat inkîpsresultat];
                SourceExpr=EstimPurchResultDec;
                Visible=FALSE }

    { 1210190094;3;Field  ;
                Name=ActualPurchResultDec;
                CaptionML=[DEU=Leistungsergebnis;
                           ENU=Actual Purchase Result;
                           NLD=Uitvoeringsresultaat;
                           NOR=Reellt Innkjõpsresultat;
                           SVE=Verkligt inkîpsresultat];
                SourceExpr=ActualPurchResultDec;
                Visible=FALSE }

    { 1210190096;3;Field  ;
                Name=TotPurchResultDec;
                CaptionML=[DEU=Summe Ergebnis;
                           ENU=Total Result;
                           NLD=Totaal Resultaat;
                           NOR=Totalresultat;
                           SVE=Totalresultat];
                SourceExpr=TotPurchResultDec;
                Visible=FALSE }

    { 1210190072;3;Field  ;
                Name=HoursResult;
                CaptionML=[DEU=Ergebnis Stunden;
                           ENU=Hours Result;
                           NLD=Resultaat Uren;
                           NOR=Timer (resultat);
                           SVE=Timmar (resultat)];
                SourceExpr=HoursResultDec }

    { 1210190098;3;Field  ;
                Name=PeriodResult;
                CaptionML=[DEU=Ergebnis Periode;
                           ENU=Result Period;
                           NLD=Resultaat Periode;
                           NOR=Resultatperiode;
                           SVE=Resultatperiod];
                SourceExpr=ResultDec - PrevResultDec;
                Visible=FALSE }

    { 1210190056;3;Field  ;
                Name=HoursResultPeriod;
                CaptionML=[DEU=Ergebnis Stunden Periode;
                           ENU=Result Hours Period;
                           NLD=Resultaat uren periode;
                           NOR=Resultat timeperiode;
                           SVE=Resultattimperiod];
                SourceExpr=HoursResultDec - PrevHoursResultDec;
                Visible=FALSE }

    { 1100527300;3;Field  ;
                Name=TotCostPeriod;
                CaptionML=[DEU=Gesamtkosten Periode;
                           ENU=Total Cost Period;
                           NLD=Totale kosten periode];
                SourceExpr=TotCostDec - PrevTotCostDec }

  }
  CODE
  {
    VAR
      gJobRec@1210190043 : Record 11072003;
      SearchPeriodCu@1210190042 : Codeunit 11012013;
      CostContrCreateCu@1100485004 : Codeunit 11012011;
      CostContMgt@1210190041 : Codeunit 11012006;
      PeriodType@1210190040 : 'Day,Week,Month,Quarter,Year,Accounting Period';
      TotCostDec@1210190008 : Decimal;
      TotHoursDec@1100485001 : Decimal;
      PrognTotCostDec@1210190009 : Decimal;
      PrognResultDec@1210190010 : Decimal;
      PurchResultDec@1210190039 : Decimal;
      OriginalBudgetAmountDec@1210190000 : Decimal;
      AdjustmentsDec@1210190001 : Decimal;
      AdjustmentsHoursDec@1210190002 : Decimal;
      ExtensionDec@1210190003 : Decimal;
      ExtensionHoursDec@1210190004 : Decimal;
      OptionsDec@1210190005 : Decimal;
      BudgetHoursDec@1210190007 : Decimal;
      ActualCostsDec@1210190011 : Decimal;
      ActualHoursDec@1210190012 : Decimal;
      AllowedHoursDec@1210190014 : Decimal;
      ActualsPeriodDec@1210190015 : Decimal;
      ActualHoursPeriodDec@1210190016 : Decimal;
      PurchaseBudgetDec@1210190017 : Decimal;
      OpenPurchDec@1210190018 : Decimal;
      ReceivedNotInvoicedDec@1210190019 : Decimal;
      OpenOvhSurchPurchaseDec@1210190020 : Decimal;
      RiscCoverageDec@1210190021 : Decimal;
      RiscCoveragWithdrawDec@1210190022 : Decimal;
      PurchaseDec@1210190023 : Decimal;
      PurchasePeriodDec@1100485000 : Decimal;
      PurchaseCostDec@1210190025 : Decimal;
      AllowedDec@1210190026 : Decimal;
      PrognEndResultDec@1210190027 : Decimal;
      PrevAllowedDec@1210190028 : Decimal;
      EstimPurchResultDec@1210190029 : Decimal;
      ActualPurchResultDec@1210190030 : Decimal;
      TotPurchResultDec@1210190031 : Decimal;
      PurchasePurchActionDec@1210190032 : Decimal;
      Prognosisdec@1210190033 : Decimal;
      PrevAllowedHoursDec@1210190034 : Decimal;
      ReceivedNotInvoicedHoursDec@1210190035 : Decimal;
      ResultDec@1210190036 : Decimal;
      OpenProdDec@1210190038 : Decimal;
      OpenOvhSurchProdDec@1210190037 : Decimal;
      OpenAmountHoursDec@1210190006 : Decimal;
      OpenOvhSurchHoursDec@1210190024 : Decimal;
      AvailableDec@1100485002 : Decimal;
      PrognHoursDec@1210190013 : Decimal;
      PeriodFilter@1100485003 : Text[50];
      CostObjectFormOther@1210190113 : Page 11012090;
      CostObjectFormLAbor@1210190044 : Page 11012091;
      PrevResultDec@1100527300 : Decimal;
      HoursResultDec@1100527302 : Decimal;
      PrevHoursResultDec@1100527303 : Decimal;
      PrevActualHoursDec@1100527301 : Decimal;
      PrevTotCostDec@1100527304 : Decimal;

    PROCEDURE CalcAmounts@1210190001();
    VAR
      CostObjectControl@1210190000 : Record 11012047;
      lAllowedDec@1210190010 : Decimal;
      lAllowedHoursDec@1210190009 : Decimal;
      lPrevAllowedDec@1210190008 : Decimal;
      lPrevAllowedHoursDec@1210190007 : Decimal;
      lPurchaseDec@1210190006 : Decimal;
      lEstimPurchResultDec@1210190005 : Decimal;
      lPurchCostDec@1210190004 : Decimal;
      lActualPurchResultDec@1210190003 : Decimal;
      lTotPurchResultDec@1210190002 : Decimal;
      CostControlManagement@1100527301 : Codeunit 11012006;
      Job@1100527300 : Record 11072003;
      ControlProjectCostObject@1100527302 : Record 11012047;
    BEGIN
      ClearVariables;
      WITH CostObjectControl DO BEGIN
        Job.COPY(gJobRec);
        SearchPeriodCu.FindPeriod(Job, PeriodType, '<=');

        SETCURRENTKEY("Project No.","Cost Component","Cost Object");
        SETRANGE("Project No.",gJobRec."No.");
        SETRANGE("Cost Component", Rec."Cost Component");
        IF FINDSET(FALSE, FALSE) THEN BEGIN
          REPEAT
            SETFILTER("Period Filter",gJobRec.GETFILTER("Period Filter"));
            SETFILTER("Cumulation Filter",gJobRec.GETFILTER("Cumulation Filter"));
            SETFILTER("Progress Filter",gJobRec.GETFILTER("Progress Filter"));
            SETFILTER(PrevProgressFilter,gJobRec.GETFILTER(PrevProgressFilter));
            SETFILTER("Prognosis Filter",gJobRec.GETFILTER("Prognosis Filter"));
            SETFILTER(PrevPrognosisFilter,gJobRec.GETFILTER(PrevPrognosisFilter));
            SETFILTER("Purchase Action Filter",gJobRec.GETFILTER("Purchase Action Filter"));

            CostContMgt.CalcFieldsCostObj(CostObjectControl);

            OriginalBudgetAmountDec := OriginalBudgetAmountDec + "Original Budget Amount";
            AdjustmentsDec := AdjustmentsDec + Adjustments;
            AdjustmentsHoursDec := AdjustmentsHoursDec + "Adjustments Hours";
            ExtensionDec := ExtensionDec + Extension;
            ExtensionHoursDec := ExtensionHoursDec + "Extension Hours";
            OptionsDec := OptionsDec + Options;
            BudgetHoursDec := BudgetHoursDec + "Budget Hours";
            PurchaseBudgetDec := PurchaseBudgetDec + "Purchase Budget";
            PurchaseDec := PurchaseDec + Purchase;
            PurchasePeriodDec := PurchasePeriodDec + "Purchase Period";
            PrognResultDec := PrognResultDec + Prognosis;

            OpenPurchDec := OpenPurchDec + CostContMgt.OutstandingCostObj(CostObjectControl,FALSE);
            ReceivedNotInvoicedDec := ReceivedNotInvoicedDec + CostContMgt.ReceivedNotInvoicedCostObj(CostObjectControl,FALSE);
            ReceivedNotInvoicedHoursDec :=
              ReceivedNotInvoicedHoursDec + CostContMgt.ReceivedNotInvHoursCostObj(CostObjectControl, FALSE);
            OpenOvhSurchPurchaseDec := OpenOvhSurchPurchaseDec + CostContMgt.OpenOvhPurchCostObj(CostObjectControl,FALSE);

            RiscCoverageDec := RiscCoverageDec + "Risc Coverage";
            RiscCoveragWithdrawDec := RiscCoveragWithdrawDec + "Risc Coverage Withdraw";
            ActualCostsDec := ActualCostsDec + "Actual Costs";
            ActualHoursDec := ActualHoursDec + "Actual Hours";
            ActualsPeriodDec := ActualsPeriodDec + "Actuals Period";
            ActualHoursPeriodDec := ActualHoursPeriodDec + "Actual Hours Period";
            OpenAmountHoursDec := OpenAmountHoursDec + "Open Amount (Hours)";
            OpenOvhSurchHoursDec := OpenOvhSurchHoursDec + "Open Ovh. Surch. (Hours)";
            OpenProdDec := OpenProdDec + "Open (Inventory)";
            OpenOvhSurchProdDec := OpenOvhSurchProdDec + "Open Ovh. Surch. (Inventory)";
            PrognHoursDec := PrognHoursDec + "Hours Prognosis";

            CostContMgt.AllowedAndPurchCostObj(
              CostObjectControl,
              lAllowedDec, lAllowedHoursDec, lPrevAllowedDec, lPrevAllowedHoursDec,
              lPurchaseDec, lEstimPurchResultDec, lPurchCostDec, lActualPurchResultDec, lTotPurchResultDec,TRUE);
            AllowedDec  := AllowedDec + lAllowedDec;
            AllowedHoursDec  := AllowedHoursDec +  lAllowedHoursDec;
            PrevAllowedDec  := PrevAllowedDec + lPrevAllowedDec;
            PrevAllowedHoursDec  := PrevAllowedHoursDec + lPrevAllowedHoursDec;
            PurchaseDec  := PurchaseDec + lPurchaseDec;
            EstimPurchResultDec  := EstimPurchResultDec + lEstimPurchResultDec;
            PurchaseCostDec  := PurchaseCostDec + lPurchCostDec;
            ActualPurchResultDec  := ActualPurchResultDec + lActualPurchResultDec;
            TotPurchResultDec  := TotPurchResultDec + lTotPurchResultDec;

            TotCostDec := TotCostDec + CostContMgt.TotCostCostObj(CostObjectControl,FALSE);
            TotHoursDec := TotHoursDec + CostContMgt.TotHoursCostObj(CostObjectControl,FALSE);
            ResultDec := ResultDec + CostContMgt.PurchResultCostObj(CostObjectControl,FALSE);
            PrognEndResultDec := PrognEndResultDec + CostContMgt.PrognEndResultCostObj(CostObjectControl,FALSE);
            PrognTotCostDec := PrognTotCostDec + CostContMgt.PrognTotCostCostObj(CostObjectControl,FALSE);
            PrognResultDec := PrognResultDec + CostContMgt.PrognResultCostObj(CostObjectControl,FALSE);
            PurchResultDec := PurchResultDec + CostContMgt.PurchResultCostObj(CostObjectControl,FALSE);

            ControlProjectCostObject.COPY(CostObjectControl);
            Job.COPYFILTER("Period Filter", ControlProjectCostObject."Period Filter");
            Job.COPYFILTER("Cumulation Filter", ControlProjectCostObject."Cumulation Filter");
            Job.COPYFILTER("Progress Filter", ControlProjectCostObject."Progress Filter");
            Job.COPYFILTER(PrevProgressFilter, ControlProjectCostObject.PrevProgressFilter);
            Job.COPYFILTER("Prognosis Filter", ControlProjectCostObject."Prognosis Filter");
            Job.COPYFILTER(PrevPrognosisFilter, ControlProjectCostObject.PrevPrognosisFilter);
            Job.COPYFILTER("Purchase Action Filter", ControlProjectCostObject."Purchase Action Filter");
            ControlProjectCostObject.CALCFIELDS("Actual Hours");
            PrevResultDec += CostControlManagement.PurchResultCostObj(ControlProjectCostObject, TRUE);
            PrevActualHoursDec += ControlProjectCostObject."Actual Hours";
            PrevTotCostDec += CostControlManagement.TotCostCostObj(ControlProjectCostObject, TRUE);

            //AvailableDec := Budget - TotCostDec;
          UNTIL NEXT = 0;
        END;
        HoursResultDec := AllowedHoursDec - ActualHoursDec;
        PrevHoursResultDec := PrevAllowedHoursDec - PrevActualHoursDec;
        AvailableDec := OriginalBudgetAmountDec + AdjustmentsDec + ExtensionDec + OptionsDec - TotCostDec
      END;
    END;

    PROCEDURE ClearVariables@1210190002();
    BEGIN
      CLEAR(TotCostDec);
      CLEAR(TotHoursDec);
      CLEAR(ResultDec);
      CLEAR(PrognTotCostDec);
      CLEAR(PrognResultDec);
      CLEAR(PurchResultDec);
      CLEAR(OriginalBudgetAmountDec);
      CLEAR(AdjustmentsDec);
      CLEAR(AdjustmentsHoursDec);
      CLEAR(ExtensionDec);
      CLEAR(ExtensionHoursDec);
      CLEAR(OptionsDec);
      CLEAR(BudgetHoursDec);
      CLEAR(PurchaseBudgetDec);
      CLEAR(PurchaseDec);
      CLEAR(PurchasePurchActionDec);
      CLEAR(OpenPurchDec);
      CLEAR(ReceivedNotInvoicedDec);
      CLEAR(OpenOvhSurchPurchaseDec);
      CLEAR(ReceivedNotInvoicedHoursDec);
      CLEAR(RiscCoverageDec);
      CLEAR(RiscCoveragWithdrawDec);
      CLEAR(ActualCostsDec);
      CLEAR(ActualHoursDec);
      CLEAR(PurchaseCostDec);
      CLEAR(AllowedDec);
      CLEAR(AllowedHoursDec);
      CLEAR(Prognosisdec);
      CLEAR(PrognEndResultDec);
      CLEAR(PrognHoursDec);
      CLEAR(ActualsPeriodDec);
      CLEAR(ActualHoursPeriodDec);
      CLEAR(PrevAllowedDec);
      CLEAR(PrevAllowedHoursDec);
      CLEAR(EstimPurchResultDec);
      CLEAR(ActualPurchResultDec);
      CLEAR(TotPurchResultDec);
      CLEAR(OpenAmountHoursDec);
      CLEAR(OpenOvhSurchHoursDec);
      CLEAR(PrevResultDec);
      CLEAR(PrevActualHoursDec);
      CLEAR(HoursResultDec);
      CLEAR(PrevHoursResultDec);
      CLEAR(PrevTotCostDec);
    END;

    PROCEDURE SetDefault@1210190014(VAR lJobRec@1210190000 : Record 11072003);
    BEGIN
      gJobRec.COPY(lJobRec);
    END;

    PROCEDURE Caption@1210190000() Caption : Text[250];
    BEGIN
      EXIT(gJobRec."No." + ' ' + gJobRec.Description);
    END;

    LOCAL PROCEDURE gJobRecGETFILTERCumulationFilt@19043881(VAR Text@19043882 : Text[1024]);
    BEGIN
      PeriodFilter := Text;
    END;

    LOCAL PROCEDURE DayPeriodTypeOnPush@19008851();
    BEGIN
      SearchPeriodCu.FindPeriod(gJobRec,PeriodType,'');
      CurrPage.UPDATE;
    END;

    LOCAL PROCEDURE WeekPeriodTypeOnPush@19046063();
    BEGIN
      SearchPeriodCu.FindPeriod(gJobRec,PeriodType,'');
      CurrPage.UPDATE;
    END;

    LOCAL PROCEDURE MonthPeriodTypeOnPush@19047374();
    BEGIN
      SearchPeriodCu.FindPeriod(gJobRec,PeriodType,'');
      CurrPage.UPDATE;
    END;

    LOCAL PROCEDURE QuarterPeriodTypeOnPush@19018850();
    BEGIN
      SearchPeriodCu.FindPeriod(gJobRec,PeriodType,'');
      CurrPage.UPDATE;
    END;

    LOCAL PROCEDURE YearPeriodTypeOnPush@19051042();
    BEGIN
      SearchPeriodCu.FindPeriod(gJobRec,PeriodType,'');
      CurrPage.UPDATE;
    END;

    LOCAL PROCEDURE AccountingPerioPeriodTypOnPush@19038761();
    BEGIN
      SearchPeriodCu.FindPeriod(gJobRec,PeriodType,'');
      CurrPage.UPDATE;
    END;

    LOCAL PROCEDURE DayPeriodTypeOnValidate@19012979();
    BEGIN
      DayPeriodTypeOnPush;
    END;

    LOCAL PROCEDURE WeekPeriodTypeOnValidate@19058475();
    BEGIN
      WeekPeriodTypeOnPush;
    END;

    LOCAL PROCEDURE MonthPeriodTypeOnValidate@19021027();
    BEGIN
      MonthPeriodTypeOnPush;
    END;

    LOCAL PROCEDURE QuarterPeriodTypeOnValidate@19015346();
    BEGIN
      QuarterPeriodTypeOnPush;
    END;

    LOCAL PROCEDURE YearPeriodTypeOnValidate@19064743();
    BEGIN
      YearPeriodTypeOnPush;
    END;

    LOCAL PROCEDURE AccountingPerioPeriodTypeOnVal@19058901();
    BEGIN
      AccountingPerioPeriodTypOnPush;
    END;

    LOCAL PROCEDURE PeriodTypeOnAfterValidate@1210190003();
    BEGIN
      PeriodFilter := gJobRec.GETFILTER("Period Filter");
      CurrPage.UPDATE;
    END;

    LOCAL PROCEDURE PeriodFilterOnAfterValidate@1210190007();
    BEGIN
      gJobRec.SETFILTER("Cumulation Filter", '..%1', gJobRec.GETRANGEMAX("Period Filter"));
      CurrPage.UPDATE;
    END;

    PROCEDURE FindPeriod@1210190006(SearchString@1210190000 : Text[3]);
    BEGIN
      SearchPeriodCu.FindPeriod(gJobRec,PeriodType,SearchString);
    END;

    BEGIN
    END.
  }
}

