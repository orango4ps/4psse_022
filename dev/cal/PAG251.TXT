OBJECT Page 251 General Journal Batches
{
  OBJECT-PROPERTIES
  {
    Date=;
    Time=;
    Version List=NAVW114.00,4PS14.00;
  }
  PROPERTIES
  {
    CaptionML=[ENU=General Journal Batches;
               NOR=Finanskladder;
               SVE=Redovisningsjournaler];
    SourceTable=Table232;
    DataCaptionExpr=DataCaption;
    PageType=List;
    PromotedActionCategoriesML=[ENU=New,Process,Report,Navigate;
                                NOR=Ny,Prosess,Rapport,Naviger;
                                SVE=Ny,Process,Rapport,Navigera];
    OnOpenPage=BEGIN
                 GenJnlManagement.OpenJnlBatch(Rec);
                 ShowAllowPaymentExportForPaymentTemplate;
                 // Doing this because if user is using web client then filters on REC are being removed
                 // Since filter is removed we need to persist value for template
                 // name and use it 'OnNewRecord'
                 GenJnlTemplateName := "Journal Template Name";
               END;

    OnNewRecord=BEGIN
                  IF GenJnlTemplateName <> '' THEN
                    "Journal Template Name" := GenJnlTemplateName;
                  SetupNewBatch;
                END;

    ActionList=ACTIONS
    {
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 29      ;1   ;Action    ;
                      Name=EditJournal;
                      ShortCutKey=Return;
                      CaptionML=[ENU=Edit Journal;
                                 NOR=Rediger kladd;
                                 SVE=Redigera journal];
                      ToolTipML=[ENU=Open a journal based on the journal batch.;
                                 NOR=èpner en kladd basert pÜ kladden.;
                                 SVE=ôppna en journal baserad pÜ journalbatchen.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=OpenJournal;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 //**4PS.sn
                                 CALCFIELDS("Template Type");
                                 IF "Template Type" <> "Template Type"::Leave THEN
                                 //**4PS.en
                                   GenJnlManagement.TemplateSelectionFromBatch(Rec)
                                 //**4PS.sn
                                 ELSE
                                   LeaveJnlManagement.TemplateSelectionFromBatch(Rec);
                                 //**4PS.en
                               END;
                                }
      { 15      ;1   ;ActionGroup;
                      CaptionML=[ENU=P&osting;
                                 NOR=B&okfõring;
                                 SVE=B&okfîring];
                      Image=Post }
      { 16      ;2   ;Action    ;
                      Name=TestReport;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Test Report;
                                 NOR=Kontrollrapport;
                                 SVE=Testrapport];
                      ToolTipML=[ENU=View a test report so that you can find and correct any errors before you perform the actual posting of the journal or document.;
                                 NOR=Vis en kontrollrapport slik at du kan finne og rette eventuelle feil fõr du bokfõrer kladden eller dokumentet.;
                                 SVE=Visa en testrapport sÜ att du kan hitta och rÑtta till eventuella fel innan du bokfîr journalen eller dokumentet.];
                      ApplicationArea=#Basic,#Suite;
                      Image=TestReport;
                      OnAction=BEGIN
                                 ReportPrint.PrintGenJnlBatch(Rec);
                               END;
                                }
      { 17      ;2   ;Action    ;
                      ShortCutKey=F9;
                      CaptionML=[ENU=P&ost;
                                 NOR=B&okfõr;
                                 SVE=&Bokfîr];
                      ToolTipML=[ENU=Finalize the document or journal by posting the amounts and quantities to the related accounts in your company books.;
                                 NOR=Fullfõr dokumentet eller kladden ved Ü bokfõre belõpene og antallene til de relaterte kontiene i selskapstablÜene.;
                                 SVE=Slutfîr dokumentet eller journalen genom att bokfîra beloppen och kvantiteterna till de relaterade kontona i fîretagets redovisning.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Codeunit 233;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=PostOrder;
                      PromotedCategory=Process }
      { 18      ;2   ;Action    ;
                      ShortCutKey=Shift+F9;
                      CaptionML=[ENU=Post and &Print;
                                 NOR=Bokfõr og &skriv ut;
                                 SVE=Bokfîr och skriv &ut];
                      ToolTipML=[ENU=Finalize and prepare to print the document or journal. The values and quantities are posted to the related accounts. A report request window where you can specify what to include on the print-out.;
                                 NOR=Fullfõr og klargjõr for Ü skrive ut dokumentet eller kladden. Verdiene og antallene blir bokfõrt til de relaterte kontiene. Det vises en rapportforespõrselsside der du kan angi hva som skal inkluderes pÜ utskriften.;
                                 SVE=Slutfîr och fîrbered utskrift av dokumentet eller journalen. VÑrdena och kvantiteterna bokfîrs pÜ de relaterade kontona. Ett fînster med en rapportbegÑran dÑr du kan ange vad som ska tas med pÜ utskriften.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Codeunit 234;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=PostPrint;
                      PromotedCategory=Process }
      { 26      ;2   ;Action    ;
                      Name=MarkedOnOff;
                      CaptionML=[ENU=Marked On/Off;
                                 NOR=Merket PÜ/av;
                                 SVE=MÑrkta pÜ/av];
                      ToolTipML=[ENU=View all journal batches or only marked journal batches. A journal batch is marked if an attempt to post the general journal fails.;
                                 NOR=Vis alle kladder eller bare merkede kladder. En kladd merkes hvis et forsõk pÜ Ü bokfõre finanskladden mislykkes.;
                                 SVE=Visa alla journaler eller endast markerade journaler. En journal markeras om det inte gÜr att bokfîra redovisningsjournalen.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Change;
                      OnAction=BEGIN
                                 MARKEDONLY(NOT MARKEDONLY);
                                 CurrPage.UPDATE(FALSE);
                               END;
                                }
      { 8       ;1   ;ActionGroup;
                      CaptionML=[ENU=Periodic Activities;
                                 NOR=Periodiske aktiviteter;
                                 SVE=Periodiska aktiviteter] }
      { 7       ;2   ;Action    ;
                      CaptionML=[ENU=Recurring General Journal;
                                 NOR=Gjentakende finanskladd;
                                 SVE=èterkommande redov.journal];
                      ToolTipML=[ENU=Define how to post transactions that recur with few or no changes to general ledger, bank, customer, vendor, and fixed assets accounts.;
                                 NOR=Definerer hvordan du bokfõrer transaksjoner som gjentas med ingen eller fÜ endringer i finans-, bank-, kunde-, leverandõr- og aktivakontoer.;
                                 SVE=Definiera bokfîring av Üterkommande transaktioner med fÜ eller inga Ñndringar pÜ redovisnings-, bank-, kund-, leverantîrskonton och konton fîr anlÑggningstillgÜngar.];
                      ApplicationArea=#Suite;
                      RunObject=Page 283;
                      Promoted=Yes;
                      Image=Journal;
                      PromotedCategory=Category4 }
      { 9       ;2   ;Action    ;
                      CaptionML=[ENU=G/L Register;
                                 NOR=Finansjournal;
                                 SVE=Bokfîrd redovisningsjournal];
                      ToolTipML=[ENU=View posted G/L entries.;
                                 NOR=Viser bokfõrte finansposter.;
                                 SVE=Visa bokfîrda transaktioner.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 116;
                      Promoted=Yes;
                      Image=GLRegisters;
                      PromotedCategory=Category4 }
      { 22      ;    ;ActionContainer;
                      ActionContainerType=Reports }
      { 20      ;1   ;Action    ;
                      CaptionML=[ENU=Detail Trial Balance;
                                 NOR=Finanskontoutdrag;
                                 SVE=Huvudbok];
                      ToolTipML=[ENU=View detail general ledger account balances and activities.;
                                 NOR=Vis detaljerte saldi og aktiviteter for finanskonto.;
                                 SVE=Visa detaljerade saldon och aktiviteter fîr redovisningskonton.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Report 4;
                      Promoted=Yes;
                      Image=Report;
                      PromotedCategory=Report;
                      PromotedOnly=Yes }
      { 14      ;1   ;Action    ;
                      CaptionML=[ENU=Trial Balance;
                                 NOR=RÜbalanse;
                                 SVE=RÜbalans];
                      ToolTipML=[ENU=View general ledger account balances and activities.;
                                 NOR=Vis saldi og aktiviteter for finanskonto.;
                                 SVE=Visa saldon och aktiviteter fîr redovisningskonton.];
                      ApplicationArea=#Suite;
                      RunObject=Report 6;
                      Promoted=Yes;
                      Image=Report;
                      PromotedCategory=Report;
                      PromotedOnly=Yes }
      { 12      ;1   ;Action    ;
                      CaptionML=[ENU=Trial Balance by Period;
                                 NOR=RÜbalanse etter periode;
                                 SVE=RÜbalans per period];
                      ToolTipML=[ENU=View general ledger account balances and activities within a selected period.;
                                 NOR=Vis saldi og aktiviteter for finanskonto i en valgt periode.;
                                 SVE=Visa saldon och aktiviteter pÜ redovisningskonton inom en vald tidsperiod.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Report 38;
                      Image=Report;
                      PromotedCategory=Report }
      { 10      ;1   ;Action    ;
                      CaptionML=[ENU=G/L Register;
                                 NOR=Finansjournal;
                                 SVE=Bokfîrd redovisningsjournal];
                      ToolTipML=[ENU=View posted G/L entries.;
                                 NOR=Viser bokfõrte finansposter.;
                                 SVE=Visa bokfîrda transaktioner.];
                      ApplicationArea=#Suite;
                      RunObject=Report 3;
                      Image=GLRegisters }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                GroupType=Repeater }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the name of the journal you are creating.;
                           NOR=Angir navnet pÜ kladden du oppretter.;
                           SVE=Anger namnet pÜ journalen som du skapar.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Name }

    { 4   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a brief description of the journal batch you are creating.;
                           NOR=Angir en kort beskrivelse av kladden du oppretter.;
                           SVE=Anger en kortfattad beskrivning av journalbunten som du skapar.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Description }

    { 11  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the type of account that a balancing entry is posted to, such as BANK for a cash account.;
                           NOR=Angir kontotypen som en motpost bokfõres til, for eksempel BANK for en kassakonto.;
                           SVE=Anger typen av konto som en balanserande transaktion bokfîrs pÜ, till exempel BANK fîr ett kassakonto.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bal. Account Type" }

    { 13  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the general ledger, customer, vendor, or bank account that the balancing entry is posted to, such as a cash account for cash purchases.;
                           NOR=Angir nummeret pÜ finans-, kunde-, leverandõr- eller bankkontoen som motposten bokfõres til, for eksempel en kassakonto for kontantkjõp.;
                           SVE=Anger numret pÜ redovisnings-, kund-, leverantîrs- eller bankkontot som den balanserande transaktionen bokfîrs pÜ, t.ex. ett kassakonto fîr kontantinkîp.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bal. Account No." }

    { 19  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number series from which entry or record numbers are assigned to new entries or records.;
                           NOR=Angir nummerserien som oppfõrings- eller postnumre tilordnes fra, til nye oppfõringer eller poster.;
                           SVE=Anger nummerserien frÜn vilken transaktions- eller postnummer tilldelas till nya transaktioner eller poster.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="No. Series" }

    { 21  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign document numbers to ledger entries that are posted from this journal batch.;
                           NOR=Angir koden for nummerserien som skal brukes til Ü tilordne bilagsnumre til poster som bokfõres fra denne kladden.;
                           SVE=Anger koden fîr nummerserien som anvÑnds fîr att tilldela dokumentnummer till transaktioner som bokfîrs frÜn den hÑr journalbunten.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Posting No. Series" }

    { 6   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the reason code, a supplementary source code that enables you to trace the entry.;
                           NOR=Angir Ürsakskoden, som er en ekstra kildekode som gjõr det mulig Ü spore posten.;
                           SVE=Anger uppfîljningskoden, en extra ursprungskod som anvÑnds fîr att spÜra transaktionen.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Reason Code" }

    { 25  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether the program to calculate VAT for accounts and balancing accounts on the journal line of the selected journal batch.;
                           NOR=Angir om det automatisk skal beregnes mva for konti og motkonti pÜ kladdelinjen til den valgte kladden.;
                           SVE=Anger om programmet berÑknar moms berÑknas pÜ konton och balanskonton pÜ journalraden i den valda journalbunten.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Copy VAT Setup to Jnl. Lines" }

    { 27  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether to allow the manual adjustment of VAT amounts in journal templates.;
                           NOR=Angir om du vil tillate manuell justering av mva-belõp i kladdemaler.;
                           SVE=Anger om manuell justering av momsbeloppet i journalmallar Ñr tillÜten.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Allow VAT Difference" }

    { 3   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if you can export bank payment files from payment journal lines using this general journal batch.;
                           NOR=Angir om du kan eksportere bankbetalingsfiler fra utbetalingskladdelinjer ved hjelp av denne finanskladden.;
                           SVE=Anger om det gÜr att exportera bankbetalningsfiler frÜn Utbetalningsjournalrader med den hÑr redovisningsjournalbunten.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Allow Payment Export";
                Visible=IsPaymentTemplate }

    { 23  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the Amount field on journal lines for the same document number is automatically prefilled with the value that is required to balance the document.;
                           NOR=Angir om feltet Belõp pÜ kladdelinjer for det samme dokumentnummeret blir fylt ut automatisk med verdien som kreves for Ü balansere dokumentet.;
                           SVE=Anger om fÑltet Belopp pÜ journalrader fîr samma dokumentnummer fylls i automatiskt med vÑrdet som krÑvs fîr att balansera dokumentet.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Suggest Balancing Amount" }

    { 5   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the format of the bank statement file that can be imported into this general journal batch.;
                           NOR=Angir formatet for bankkontoutdragsfilen som kan importeres til denne finanskladden.;
                           SVE=Anger formatet pÜ bankutdragsfilen som gÜr att importera till den hÑr redovisningsjournalbunten.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bank Statement Import Format";
                Visible=FALSE }

    { 1100409000;2;Field  ;
                SourceExpr="Suppress Plant Entry Depr.";
                Visible=FALSE }

    { 1900000007;0;Container;
                ContainerType=FactBoxArea }

    { 1900383207;1;Part   ;
                ApplicationArea=#RecordLinks;
                Visible=FALSE;
                PartType=System;
                SystemPartID=RecordLinks }

    { 1905767507;1;Part   ;
                ApplicationArea=#Notes;
                Visible=FALSE;
                PartType=System;
                SystemPartID=Notes }

  }
  CODE
  {
    VAR
      ReportPrint@1000 : Codeunit 228;
      GenJnlManagement@1003 : Codeunit 230;
      IsPaymentTemplate@1001 : Boolean;
      GenJnlTemplateName@1002 : Code[10];
      LeaveJnlManagement@1100525000 : Codeunit 11012062;

    LOCAL PROCEDURE DataCaption@1() : Text[250];
    VAR
      GenJnlTemplate@1000 : Record 80;
    BEGIN
      IF NOT CurrPage.LOOKUPMODE THEN
        IF GETFILTER("Journal Template Name") <> '' THEN BEGIN
          GenJnlTemplate.SETFILTER(Name,GETFILTER("Journal Template Name"));
          IF GenJnlTemplate.FINDSET THEN
            IF GenJnlTemplate.NEXT = 0 THEN
              EXIT(GenJnlTemplate.Name + ' ' + GenJnlTemplate.Description);
        END;
    END;

    LOCAL PROCEDURE ShowAllowPaymentExportForPaymentTemplate@2();
    VAR
      GenJournalTemplate@1000 : Record 80;
    BEGIN
      IF GenJournalTemplate.GET("Journal Template Name") THEN
        IsPaymentTemplate := GenJournalTemplate.Type = GenJournalTemplate.Type::Payments;
    END;

    BEGIN
    END.
  }
}

