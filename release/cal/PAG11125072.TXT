OBJECT Page 11125072 Base Recipe Lines Subform
{
  OBJECT-PROPERTIES
  {
    Date=;
    Time=;
    Version List=4PS14.00;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Recipe Lines;
               NOR=Malrader;
               SVE=Mallrader];
    SourceTable=Table11020582;
    PageType=ListPart;
    AutoSplitKey=Yes;
    OnOpenPage=VAR
                 CompRel@1100525005 : Record 11012059;
                 CentrManagementCU@1100525004 : Codeunit 11012010;
                 NavBln@1100525003 : Boolean;
                 DiscBln@1100525002 : Boolean;
                 DiscGrpBln@1100525001 : Boolean;
                 RcpBln@1100525000 : Boolean;
                 FPSLicenseManagement@1100527400 : Codeunit 11229289;
               BEGIN
                 IF FPSLicenseManagement.LicenseAndReadPermissionForTable(CompRel) THEN BEGIN  //db, 28-03-14
                   CentrManagementCU.ItemFormEditable(NavBln,DiscBln,DiscGrpBln,RcpBln);
                   IF RcpBln THEN
                     CurrPage.EDITABLE(FALSE);
                 END;
               END;

    OnAfterGetRecord=BEGIN
                       //IF NOT BaseRecipe.GET("Recipe Group",Recipe) THEN BaseRecipe.INIT;  //db, 13-10-15: C026465
                       FieldIsEditable;
                       CALCFIELDS("Rates Based On");  //DP00686 (reuired for lookup RateCode)
                       //C033829.sn
                       ChargePresent(chrg0,chrg1,chrg2,chrg3,chrg4,chrg5);
                       SurchargeStyleExpr := (chrg0 = TRUE);
                       NormStyleExpr := (chrg1 = TRUE);
                       PriceStyleExpr := (chrg2 = TRUE) OR (chrg3 = TRUE) OR (chrg4 = TRUE) OR (chrg5 = TRUE);
                       //C033829.en
                       //DeviatingSalesQuantityBln := ("Quantity (Sales)" <> Quantity);  //C035486
                       DeviatingSalesPriceBln := ("Price Agreement (Sales)");  //C034809
                       DeviatingSalesNormBln := ("Norm Agreement (Sales)");  //C034809
                     END;

    OnNewRecord=BEGIN
                  //C050221.sn
                  "Cost Type (Price)" := xRec."Cost Type (Price)";
                  GetAbsenceValue;
                  GetDefaultsCostObject("Cost Type (Price)", "Cost Object Price");
                  //C050221.en
                  InitRecord;  //C045041
                END;

    OnInsertRecord=BEGIN
                     IF IsFixed THEN BEGIN  //db, 04-08-14
                       ERROR(Text000, FIELDCAPTION(Recipe));
                     END;
                   END;

    OnModifyRecord=BEGIN
                     IF IsFixed THEN BEGIN  //db, 04-08-14
                       CurrPage.UPDATE(FALSE);
                       ERROR(Text001, FIELDCAPTION(Recipe));
                     END;
                   END;

    OnDeleteRecord=BEGIN
                     IF IsFixed THEN BEGIN  //db, 04-08-14
                       CurrPage.UPDATE(FALSE);
                       ERROR(Text002, FIELDCAPTION(Recipe));
                     END;
                   END;

    OnAfterGetCurrRecord=BEGIN
                           //IF NOT BaseRecipe.GET("Recipe Group",Recipe) THEN BaseRecipe.INIT;  //db, 13-10-15: C026465
                           FieldIsEditable;
                         END;

    ActionList=ACTIONS
    {
      { 1100525064;  ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 1100525077;1 ;ActionGroup;
                      CaptionML=[ENU=&Recipe Line;
                                 NOR=&Malrad;
                                 SVE=&Mallrad] }
      { 1100525063;2 ;Action    ;
                      ShortCutKey=Shift+Ctrl+I;
                      CaptionML=[ENU=Details;
                                 NOR=Detaljer;
                                 SVE=Detaljer];
                      RunObject=Page 11125075;
                      RunPageLink=Recipe=FIELD(Recipe),
                                  Recipe Group=FIELD(Recipe Group),
                                  Line No.=FIELD(Line No.);
                      Promoted=Yes;
                      Image=ItemTrackingLines;
                      PromotedCategory=Process }
      { 1100525076;2 ;Action    ;
                      ShortCutKey=Shift+Ctrl+I;
                      CaptionML=[ENU=&Internal Text;
                                 NOR=&Intern tekst;
                                 SVE=&Intern text];
                      Image=SNInfo;
                      OnAction=BEGIN
                                 EditText(0);
                               END;
                                }
      { 1100525075;2 ;Action    ;
                      ShortCutKey=Shift+Ctrl+E;
                      CaptionML=[ENU=&External Text;
                                 NOR=&Ekstern tekst;
                                 SVE=&Extern text];
                      Image=SNInfo;
                      OnAction=BEGIN
                                 EditText(1);
                               END;
                                }
      { 1100409005;2 ;Action    ;
                      Name=CommentRecipeLine;
                      CaptionML=ENU=Comment (Recipe Line);
                      RunObject=Page 11124914;
                      RunPageLink=Table Name=CONST(Estimate),
                                  Group=FIELD(Recipe Group),
                                  No.=FIELD(Recipe),
                                  Recipe Line No.=FIELD(Line No.),
                                  Estimate No.=FILTER('');
                      Image=ViewComments }
      { 1100409003;2 ;Action    ;
                      Name=Quantity Sheet;
                      CaptionML=[ENU=Quantity Sheet;
                                 NOR=Antallspesifikasjon;
                                 SVE=Antalsspecifikation];
                      RunObject=Page 11229786;
                      RunPageLink=Recipe Group=FIELD(Recipe Group),
                                  Recipe=FIELD(Recipe);
                      Image=Worksheet }
      { 1100525073;1 ;ActionGroup;
                      CaptionML=[ENU=Buffer;
                                 NOR=Buffer;
                                 SVE=Buffert] }
      { 1100525072;2 ;Action    ;
                      CaptionML=[ENU=Show Buffer;
                                 NOR=Vis buffer;
                                 SVE=Visa buffert];
                      Image=ListPage;
                      OnAction=BEGIN
                                 ShowBuffer;
                               END;
                                }
      { 1100525071;2 ;Action    ;
                      ShortCutKey=Ctrl+F11;
                      CaptionML=[ENU=Copy &to Buffer;
                                 NOR=Kopier &til buffer;
                                 SVE=Kopiera &till buffert];
                      Image=Copy;
                      OnAction=BEGIN
                                 CopyToBuffer;
                               END;
                                }
      { 1100525070;2 ;Action    ;
                      ShortCutKey=Shift+F11;
                      CaptionML=[ENU=Copy from Buffer;
                                 NOR=Kopier fra buffer;
                                 SVE=Kopiera fr†n buffert];
                      Image=CopyWorksheet;
                      OnAction=BEGIN
                                 CopyFromBuffer;
                               END;
                                }
      { 1100529500;1 ;ActionGroup;
                      CaptionML=[ENU=Plant;
                                 NOR=Maskin;
                                 SVE=Maskin] }
      { 1100525067;2 ;Action    ;
                      CaptionML=[ENU=&Explode Sets;
                                 NOR=&Utfold sett;
                                 SVE=&Expandera set];
                      Image=ExplodeBOM;
                      OnAction=BEGIN
                                 ExplodeSetLines;
                               END;
                                }
      { 1100525066;2 ;Action    ;
                      CaptionML=[ENU=Add Std. P&lant Costs and Items;
                                 NOR=Legg til standard M&askinkoster og -Artikler;
                                 SVE=L„gg till std. A&nl„ggningskostnader och -artiklar];
                      Image=Costs;
                      OnAction=BEGIN
                                 InsertPlantCostLines;
                               END;
                                }
      { 1100525069;1 ;ActionGroup;
                      CaptionML=[ENU=F&unctions;
                                 NOR=Fu&nksjon;
                                 SVE=Fu&nktion] }
      { 1100525068;2 ;Action    ;
                      Name=ChrgButton;
                      CaptionML=[ENU=&Surcharge;
                                 NOR=&Tilleggsgebyr;
                                 SVE=&Till„ggsavgift];
                      Image=InsertStartingFee;
                      OnAction=BEGIN
                                 GenerateCharge;
                               END;
                                }
      { 1100525074;2 ;Action    ;
                      CaptionML=[ENU=Update Recipies;
                                 NOR=Oppdater maler;
                                 SVE=Uppdatera mallar];
                      Image=RefreshText;
                      OnAction=VAR
                                 BaseRecipeLine@1100409000 : Record 11020582;
                               BEGIN
                                 //db, 18-01-13: DP00258
                                 BaseRecipeLine.SETRANGE("Recipe Group", "Recipe Group");
                                 BaseRecipeLine.SETRANGE(Recipe, Recipe);
                                 REPORT.RUNMODAL(REPORT::"Update Recipe",TRUE,TRUE, BaseRecipeLine);
                               END;
                                }
      { 1100528507;2 ;Action    ;
                      Name=Hyperlink;
                      ShortCutKey=Shift+Ctrl+H;
                      CaptionML=ENU=Hyperlink;
                      ToolTipML=ENU=Hyperlink;
                      Image=LaunchWeb;
                      OnAction=VAR
                                 TradeItem@1100528500 : Record 11012317;
                               BEGIN
                                 TradeItem.StartHyperlink("Vendor (Trade Item)", "Trade Item");  //C052598
                               END;
                                }
      { 1100528505;1 ;ActionGroup;
                      CaptionML=ENU=BOM-Item }
      { 1100528504;2 ;Action    ;
                      Name=Explode BOM;
                      CaptionML=[ENU=&Explode BOM;
                                 NOR=&Utfold stykkliste;
                                 SVE=&Expandera struktur];
                      Image=ExplodeBOM;
                      OnAction=BEGIN
                                 ExplodeBOM;
                               END;
                                }
      { 1100528503;2 ;Action    ;
                      Name=Modify BOM Discount;
                      CaptionML=[ENU=Modify BOM Discount;
                                 NOR=Endre stykklisterabatt;
                                 SVE=Žndra strukturrabatt];
                      Image=CalculateDiscount;
                      OnAction=BEGIN
                                 UpgradeBOMDiscount;
                               END;
                                }
      { 1100528502;2 ;Action    ;
                      Name=Modify BOM Amount;
                      CaptionML=[ENU=Modify BOM Amount;
                                 NOR=Endre stykklistebel›p;
                                 SVE=Žndra strukturbelopp];
                      Image=ContractPayment;
                      OnAction=BEGIN
                                 UpgradeBOMAmount;
                               END;
                                }
      { 1100528501;2 ;Action    ;
                      Name=Remove Zero-Lines BOM;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Remove Zero-Lines BOM;
                                 NOR=Vil du fjerne Null-rader i stykkliste?;
                                 SVE=Vill du ta bort nollrader i strukturen?];
                      Image=CancelLine;
                      OnAction=BEGIN
                                 RemoveZeroLinesBOM;
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1100525000;0;Container;
                ContainerType=ContentArea }

    { 1100525001;1;Group  ;
                Name=Group;
                GroupType=Repeater }

    { 1100528500;2;Field  ;
                SourceExpr="Line No.";
                Visible=FALSE }

    { 1100525002;2;Field  ;
                SourceExpr="Cost Type (Price)";
                Editable=CostTypePriceEditable }

    { 1100525031;2;Field  ;
                SourceExpr="Cost Type (Hours)";
                Visible=FALSE;
                Editable=CostTypePriceEditable;
                OnValidate=BEGIN
                             FieldIsEditable;
                           END;
                            }

    { 1100525003;2;Field  ;
                SourceExpr="Recipe Group (Child)";
                Editable=RecipeGroupChildEditable }

    { 1100525004;2;Field  ;
                SourceExpr="Recipe (Child)";
                Editable=RecipeChildEditable;
                OnValidate=BEGIN
                             RecalcTotals;
                           END;

                OnLookup=BEGIN
                           IF HandleLookupRecipe THEN
                             CurrPage.UPDATE(TRUE);
                         END;
                          }

    { 1100525005;2;Field  ;
                SourceExpr="Set Code";
                Importance=Additional;
                Editable=SetCodeEditable;
                OnValidate=BEGIN
                             IF Quantity = 0 THEN Quantity := 1;  //db, 29-12-14: init quantity before explode to fill cumulative quantity on related lines
                             CurrPage.SAVERECORD;
                             ExplodeSetLines;
                           END;

                OnLookup=BEGIN
                           OnBeforeLookup;
                           LookupSetCode;  //DP01407
                           IF "Set Code" <> xRec."Set Code" THEN BEGIN
                             IF Quantity = 0 THEN Quantity := 1;
                             CurrPage.SAVERECORD;
                             ExplodeSetLines;
                           END;
                         END;
                          }

    { 1100525006;2;Field  ;
                SourceExpr="Plant Type";
                Importance=Additional;
                Editable=PlantTypeEditable;
                OnValidate=BEGIN
                             CurrPage.SAVERECORD;
                             InsertPlantCostLines;
                           END;

                OnLookup=BEGIN
                           LookupPlantType;  //DP01407
                           CurrPage.SAVERECORD;
                           InsertPlantCostLines;
                         END;
                          }

    { 1100525007;2;Field  ;
                SourceExpr="Item No.";
                Editable=ItemNoEditable;
                OnValidate=BEGIN
                             CopyItemText;  //C044685
                             RecalcTotals;
                           END;

                OnLookup=BEGIN
                           OnBeforeLookup;
                           IF HandleLookupItem(FIELDNO("Item No.")) THEN BEGIN
                             CurrPage.UPDATE(TRUE);
                           END ELSE BEGIN
                             IF ("Item No." <> xRec."Item No.") THEN BEGIN
                               CopyItemText;  //C044685
                               RecalcTotals;
                             END;
                           END;
                         END;
                          }

    { 1100525008;2;Field  ;
                SourceExpr=Manufacturer;
                Importance=Additional;
                Visible=FALSE;
                Editable=ManufacturerEditable }

    { 1100525009;2;Field  ;
                SourceExpr="Basic Item";
                Importance=Additional;
                Visible=FALSE;
                Editable=BasicItemEditable;
                OnValidate=BEGIN
                             RecalcTotals;
                           END;

                OnLookup=BEGIN
                           OnBeforeLookup;
                           IF HandleLookupItem(FIELDNO("Basic Item")) THEN
                             CurrPage.UPDATE(TRUE)
                           ELSE
                             IF ("Basic Item" <> xRec."Basic Item") THEN
                               RecalcTotals;
                         END;
                          }

    { 1100525010;2;Field  ;
                SourceExpr="Vendor (Trade Item)";
                Editable=VendorTradeItemEditable;
                OnValidate=BEGIN
                             RecalcTotals;
                           END;
                            }

    { 1100525011;2;Field  ;
                SourceExpr="Trade Item";
                Editable=TradeItemEditable;
                OnValidate=BEGIN
                             RecalcTotals;
                           END;

                OnLookup=BEGIN
                           OnBeforeLookup;
                           IF HandleLookupItem(FIELDNO("Trade Item")) THEN
                             CurrPage.UPDATE(TRUE)
                           ELSE
                             IF ("Trade Item" <> xRec."Trade Item") THEN
                               RecalcTotals;
                         END;

                OnAssistEdit=BEGIN
                               //db, 12-05-15
                               OnBeforeLookup;
                               IF (HandleAssistEditItem(FIELDNO("Trade Item"))) THEN
                                 CurrPage.UPDATE(TRUE);
                             END;
                              }

    { 1100525012;2;Field  ;
                SourceExpr="Cost Object Labor";
                Editable=CostObjectLaborEditable;
                OnValidate=BEGIN
                             ProcessCostObject(1,0,"Cost Object Labor");
                             RecalcTotals;
                           END;

                OnLookup=BEGIN
                           OnBeforeLookup;
                           IF "Recipe (Child)" <> '' THEN EXIT;
                           ProcessCostObject(2,0,"Cost Object Labor");
                           RecalcTotals;
                         END;
                          }

    { 1100525013;2;Field  ;
                SourceExpr="Cost Object Price";
                Editable=CostObjectPriceEditable;
                OnValidate=BEGIN
                             ProcessCostObject(1,"Cost Type (Price)","Cost Object Price");
                             RecalcTotals;
                           END;

                OnLookup=BEGIN
                           OnBeforeLookup;
                           IF "Recipe (Child)" <> '' THEN EXIT;
                           ProcessCostObject(2,"Cost Type (Price)","Cost Object Price");
                           RecalcTotals;
                         END;
                          }

    { 1100525065;2;Field  ;
                SourceExpr="Cost Component";
                Editable=CostComponentEditable }

    { 1100525014;2;Field  ;
                SourceExpr=Code;
                Editable=CodeEditable }

    { 1100525015;2;Field  ;
                SourceExpr=Description;
                Style=Attention;
                StyleExpr=PriceAgreement }

    { 1100525016;2;Field  ;
                SourceExpr="Time Quantity";
                Importance=Additional;
                Visible=FALSE;
                Editable=TimeQuantityEditable;
                OnValidate=BEGIN
                             RecalcTotals;
                           END;
                            }

    { 1100525017;2;Field  ;
                SourceExpr="Unit of Time";
                Importance=Additional;
                Visible=FALSE;
                Editable=UnitofTimeEditable }

    { 1100525018;2;Field  ;
                SourceExpr=Length;
                Importance=Additional;
                Visible=FALSE;
                Editable=LengthEditable;
                OnValidate=BEGIN
                             RecalcTotals;
                           END;
                            }

    { 1100525019;2;Field  ;
                SourceExpr=Width;
                Importance=Additional;
                Visible=FALSE;
                Editable=WidthEditable;
                OnValidate=BEGIN
                             RecalcTotals;
                           END;
                            }

    { 1100525020;2;Field  ;
                SourceExpr=Height;
                Importance=Additional;
                Visible=FALSE;
                Editable=HeightEditable;
                OnValidate=BEGIN
                             RecalcTotals;
                           END;
                            }

    { 1100525021;2;Field  ;
                SourceExpr=Quantity;
                Editable=QuantityEditable;
                OnValidate=BEGIN
                             RecalcTotals;
                           END;
                            }

    { 1100525022;2;Field  ;
                SourceExpr="Unit of Measure" }

    { 1100525023;2;Field  ;
                SourceExpr="Ignore Recipe Quantity";
                Importance=Additional;
                Visible=FALSE }

    { 1100525024;2;Field  ;
                SourceExpr="Line Status" }

    { 1100525025;2;Field  ;
                SourceExpr="Surcharge Type";
                Visible=FALSE;
                Editable=SurchargeTypeEditable;
                Style=Strong;
                StyleExpr=SurchargeStyleExpr;
                OnValidate=BEGIN
                             FieldIsEditable;
                           END;
                            }

    { 1100525026;2;Field  ;
                DrillDown=Yes;
                SourceExpr="Surcharge %";
                Visible=FALSE;
                Editable=SurchargePercEditable;
                Style=Strong;
                StyleExpr=SurchargeStyleExpr;
                OnValidate=BEGIN
                             RecalcTotals;
                           END;

                OnDrillDown=VAR
                              ChrgFrm@1100525000 : Page 11229327;
                            BEGIN
                              OnBeforeLookup;
                              ChrgRec.RESET;
                              ChrgRec.SETFILTER("Estimate No.", '%1', '');
                              ChrgRec.SETFILTER("Sub-Estimate No.", '%1', '');
                              ChrgRec.SETFILTER("Part Group", '%1', '');
                              ChrgRec.SETFILTER(Part, '%1', '');
                              ChrgRec.SETRANGE("Recipe Line", 0);
                              ChrgRec.SETFILTER("Sales Document No.", '%1', '');  //DP00481
                              ChrgRec.SETRANGE("Recipe Group", "Recipe Group");
                              ChrgRec.SETRANGE(Recipe, Recipe);
                              ChrgRec.SETRANGE("Surcharge Line", "Line No.");
                              ChrgFrm.SETTABLEVIEW(ChrgRec);
                              ChrgFrm.SetSelection(3);
                              ChrgFrm.RUNMODAL;

                              RecalcTotals;
                              CurrPage.UPDATE(FALSE);  //C033874
                            END;
                             }

    { 1100525027;2;Field  ;
                SourceExpr="Norm Group";
                Editable=NormGroupEditable;
                OnValidate=BEGIN
                             RecalcTotals;
                           END;
                            }

    { 1100525028;2;Field  ;
                SourceExpr="Sub Operation Code";
                Editable=SubOperationCodeEditable;
                OnValidate=BEGIN
                             ProcessSubOperation;
                             RecalcTotals;
                           END;

                OnLookup=VAR
                           OperFrm@1100525001 : Page 11012178;
                           OperRec@1100525000 : Record 11012166;
                         BEGIN
                           OnBeforeLookup;
                           IF NOT EstimatePlantMgt.BaseRcpFieldIsEditable(FIELDNO("Sub Operation Code"),Rec) THEN EXIT;

                           CLEAR(OperFrm);
                           OperFrm.LOOKUPMODE(TRUE);

                           OperFrm.SetSelection(DATABASE::"Base Recipe Line",'','','','',0,"Recipe Group",Recipe);

                           OperRec.Code := "Sub Operation Code";
                           OperFrm.SETRECORD(OperRec);

                           IF OperFrm.RUNMODAL = ACTION::LookupOK THEN BEGIN
                             OperFrm.GETRECORD(OperRec);
                             VALIDATE("Sub Operation Code", OperRec.Code);

                             ProcessSubOperation;

                             RecalcTotals;
                             //UpdateEstLines;
                           END;
                           CurrPage.UPDATE(TRUE);
                         END;
                          }

    { 1100525029;2;Field  ;
                SourceExpr=Norm;
                Editable=NormEditable;
                Style=Strong;
                StyleExpr=NormStyleExpr;
                OnValidate=BEGIN
                             "Norm Agreement" := TRUE;
                             RecalcTotals;
                           END;

                OnLookup=BEGIN
                           OnBeforeLookup;
                           IF HandleLookupOperationNorm THEN
                             CurrPage.UPDATE(TRUE)
                           ELSE
                             RecalcTotals;
                         END;
                          }

    { 1100528900;2;Field  ;
                CaptionML=ENU=Norm (minuts);
                SourceExpr=GetMinuts(0,0);
                Visible=FALSE;
                Editable=FALSE }

    { 1100525030;2;Field  ;
                SourceExpr="Production Rate";
                Importance=Additional;
                Editable=NormEditable }

    { 1100529901;2;Field  ;
                SourceExpr="Plant Rates in Hours";
                Visible=FALSE;
                OnValidate=BEGIN
                             FieldIsEditable;
                           END;
                            }

    { 1100528506;2;Field  ;
                SourceExpr="Subcontracting in Hours";
                Visible=FALSE;
                OnValidate=BEGIN
                             FieldIsEditable;
                           END;
                            }

    { 1100525034;2;Field  ;
                SourceExpr="Rate Code";
                Editable=RateCodeEditable;
                OnValidate=BEGIN
                             RecalcTotals;
                           END;

                OnLookup=BEGIN
                           OnBeforeLookup;
                           HandleLookupRateCode;  //db, 02-02-15
                           RecalcTotals;
                         END;
                          }

    { 1100525035;2;Field  ;
                SourceExpr="Cost Rate" }

    { 1100528902;2;Field  ;
                SourceExpr="Cost Rate (FCY)";
                Visible=FALSE }

    { 1100525036;2;Field  ;
                SourceExpr="Sales Rate" }

    { 1100528903;2;Field  ;
                SourceExpr="Sales Rate (FCY)";
                Visible=FALSE }

    { 1100525037;2;Field  ;
                SourceExpr="Wage Component";
                Visible=FALSE;
                Editable=WageComponentEditable;
                OnValidate=BEGIN
                             RecalcTotals;
                           END;
                            }

    { 1100528909;2;Field  ;
                SourceExpr="Currency Code";
                Visible=FALSE }

    { 1100528908;2;Field  ;
                SourceExpr="Currency Agreement";
                Visible=FALSE }

    { 1100525038;2;Field  ;
                SourceExpr="Gross Price";
                Editable=GrossPriceEditable;
                Style=Strong;
                StyleExpr=PriceStyleExpr;
                OnValidate=BEGIN
                             RecalcTotals;
                           END;
                            }

    { 1100528904;2;Field  ;
                SourceExpr="Gross Price (FCY)";
                Visible=FALSE }

    { 1100525039;2;Field  ;
                SourceExpr="Purchase Discount %";
                Editable=PurchDiscountEditable }

    { 1100525040;2;Field  ;
                SourceExpr="Net Cost Price";
                Editable=NetCostPriceEditable;
                Style=Strong;
                StyleExpr=PriceStyleExpr;
                OnValidate=BEGIN
                             "Price Agreement" := TRUE;  //db, 22-12-14
                             RecalcTotals;
                           END;
                            }

    { 1100528905;2;Field  ;
                SourceExpr="Net Cost Price (FCY)";
                Visible=FALSE }

    { 1100525041;2;Field  ;
                SourceExpr="Sales Discount %";
                Editable=SalesDiscountEditable;
                Style=Attention;
                StyleExpr=DeviatingSalesPriceBln;
                OnValidate=BEGIN
                             "Price Agreement (Sales)" := TRUE;  //db, 04-04-17: C034809
                           END;
                            }

    { 1100525042;2;Field  ;
                SourceExpr="Net Sales Price";
                Editable=NetSalesPriceEditable;
                Style=Attention;
                StyleExpr=DeviatingSalesPriceBln;
                OnValidate=BEGIN
                             "Price Agreement (Sales)" := TRUE;  //db, 14-04-14: DP00594
                             RecalcTotals;
                           END;
                            }

    { 1100528906;2;Field  ;
                SourceExpr="Net Sales Price (FCY)";
                Visible=FALSE }

    { 1100525043;2;Field  ;
                SourceExpr="Buy Back Price";
                Importance=Additional;
                Visible=FALSE;
                Editable=BuyBackPriceEditable }

    { 1100528907;2;Field  ;
                SourceExpr="Buy Back Price (FCY)";
                Visible=FALSE }

    { 1100525044;2;Field  ;
                SourceExpr="Buy Back %";
                Importance=Additional;
                Visible=FALSE;
                Editable=BuyBackPercEditable }

    { 1100525078;2;Field  ;
                SourceExpr="Surcharge % Labor";
                Style=Attention;
                StyleExpr=DeviatingSalesNormBln;
                OnValidate=BEGIN
                             "Norm Agreement (Sales)" := TRUE;  //db, 04-04-17: C034809
                             RecalcTotals;  //C033781
                           END;
                            }

    { 1100525079;2;Field  ;
                SourceExpr="Surcharge % Price";
                Style=Attention;
                StyleExpr=DeviatingSalesPriceBln;
                OnValidate=BEGIN
                             "Price Agreement (Sales)" := TRUE;  //db, 04-04-17: C034809
                             RecalcTotals;  //C033781
                           END;
                            }

    { 1100529501;2;Field  ;
                SourceExpr="Recipe Surcharge % Material";
                OnValidate=BEGIN
                             RecalcTotals;  //C033781
                           END;
                            }

    { 1100529502;2;Field  ;
                SourceExpr="Recipe Surcharge % Subc.";
                OnValidate=BEGIN
                             RecalcTotals;  //C033781
                           END;
                            }

    { 1100529504;2;Field  ;
                SourceExpr="Recipe Surcharge % Plant";
                OnValidate=BEGIN
                             RecalcTotals;  //C033781
                           END;
                            }

    { 1100529503;2;Field  ;
                SourceExpr="Recipe Surcharge % Sundry";
                OnValidate=BEGIN
                             RecalcTotals;  //C033781
                           END;
                            }

    { 1100409000;2;Field  ;
                SourceExpr="Adjustment Factor Hours";
                Importance=Additional;
                Visible=FALSE }

    { 1100409001;2;Field  ;
                SourceExpr="Adjustment Factor Price";
                Importance=Additional;
                Visible=FALSE }

    { 1100409002;2;Field  ;
                SourceExpr="Adj. Factor Hours (Sales)";
                Importance=Additional;
                Visible=FALSE }

    { 1100525045;2;Field  ;
                SourceExpr="VAT Prod. Posting Group";
                Importance=Additional;
                Visible=FALSE }

    { 1100525046;2;Field  ;
                SourceExpr=Hours }

    { 1100528901;2;Field  ;
                CaptionML=[ENU=Minuts;
                           NOR=Minutter;
                           SVE=Minuter];
                SourceExpr=GetMinuts(1,0);
                Visible=FALSE;
                Editable=FALSE }

    { 1100525047;2;Field  ;
                SourceExpr="Labor Cost Amount" }

    { 1100528910;2;Field  ;
                SourceExpr="Labor Cost Amount (FCY)";
                Visible=FALSE }

    { 1100525048;2;Field  ;
                SourceExpr="Net Cost Amount" }

    { 1100528911;2;Field  ;
                SourceExpr="Net Cost Amount (FCY)";
                Visible=FALSE }

    { 1100525049;2;Field  ;
                SourceExpr="Cost Amount" }

    { 1100528912;2;Field  ;
                SourceExpr="Cost Amount (FCY)";
                Visible=FALSE }

    { 1100525050;2;Field  ;
                SourceExpr="Labor Sales Amount" }

    { 1100528913;2;Field  ;
                SourceExpr="Labor Sales Amount (FCY)";
                Visible=FALSE }

    { 1100525051;2;Field  ;
                SourceExpr="Net Sales Amount" }

    { 1100528914;2;Field  ;
                SourceExpr="Net Sales Amount (FCY)";
                Visible=FALSE }

    { 1100525052;2;Field  ;
                SourceExpr="Sales Amount" }

    { 1100528915;2;Field  ;
                SourceExpr="Sales Amount (FCY)";
                Visible=FALSE }

    { 1100525053;2;Field  ;
                SourceExpr="Price Reference Date";
                Importance=Additional;
                Visible=FALSE }

    { 1100525054;2;Field  ;
                SourceExpr="Norm Agreement" }

    { 1100525055;2;Field  ;
                SourceExpr="Price Agreement" }

    { 1100525080;2;Field  ;
                SourceExpr="Price Agreement (Sales)";
                Visible=FALSE }

    { 1100525056;2;Field  ;
                SourceExpr="Additional Cost";
                Visible=FALSE }

    { 1100525057;2;Field  ;
                SourceExpr=Vendor }

    { 1100525058;2;Field  ;
                SourceExpr="Vendor Name";
                Visible=FALSE }

    { 1100529900;2;Field  ;
                SourceExpr="Subcontracting Activity";
                OnValidate=BEGIN
                             CurrPage.UPDATE;
                           END;
                            }

    { 1100525059;2;Field  ;
                SourceExpr=Subcontractor;
                OnValidate=BEGIN
                             CurrPage.UPDATE;
                           END;
                            }

    { 1100525060;2;Field  ;
                SourceExpr="Subcontractor Name";
                Visible=FALSE }

    { 1100525061;2;Field  ;
                SourceExpr=Element }

    { 1100525062;2;Field  ;
                SourceExpr="Project Planning Activity Code" }

    { 1100528916;2;Field  ;
                SourceExpr=Discipline }

    { 1100528600;2;Field  ;
                SourceExpr="Price History 0 Exists";
                Visible=FALSE }

    { 1100409004;2;Field  ;
                SourceExpr="Quantity Sheet Feature" }

    { 1100525032;2;Field  ;
                SourceExpr="Ask for Quote" }

  }
  CODE
  {
    VAR
      BudgetRateRec@1100525034 : Record 11012000;
      BufferMgt@1100525030 : Codeunit 11012230;
      EstimatePlantMgt@1100525032 : Codeunit 11012232;
      ChrgRec@1100525037 : Record 11229771;
      RecipeGroupChildEditable@1100525000 : Boolean INDATASET;
      RecipeChildEditable@1100525001 : Boolean INDATASET;
      SetCodeEditable@1100525002 : Boolean INDATASET;
      PlantTypeEditable@1100525003 : Boolean INDATASET;
      ItemNoEditable@1100525004 : Boolean INDATASET;
      ManufacturerEditable@1100525005 : Boolean INDATASET;
      BasicItemEditable@1100525006 : Boolean INDATASET;
      VendorTradeItemEditable@1100525007 : Boolean INDATASET;
      TradeItemEditable@1100525008 : Boolean INDATASET;
      CodeEditable@1100525009 : Boolean INDATASET;
      TimeQuantityEditable@1100525010 : Boolean INDATASET;
      UnitofTimeEditable@1100525011 : Boolean INDATASET;
      SurchargeTypeEditable@1100525012 : Boolean INDATASET;
      SurchargePercEditable@1100525013 : Boolean INDATASET;
      NormGroupEditable@1100525014 : Boolean INDATASET;
      SubOperationCodeEditable@1100525015 : Boolean INDATASET;
      NormEditable@1100525016 : Boolean INDATASET;
      RateCodeEditable@1100525017 : Boolean INDATASET;
      WageComponentEditable@1100525018 : Boolean INDATASET;
      GrossPriceEditable@1100525019 : Boolean INDATASET;
      NetCostPriceEditable@1100525020 : Boolean INDATASET;
      NetSalesPriceEditable@1100528900 : Boolean INDATASET;
      PurchDiscountEditable@1100528901 : Boolean INDATASET;
      SalesDiscountEditable@1100528902 : Boolean INDATASET;
      BuyBackPriceEditable@1100525021 : Boolean INDATASET;
      BuyBackPercEditable@1100525022 : Boolean INDATASET;
      CostObjectLaborEditable@1100525023 : Boolean INDATASET;
      CostObjectPriceEditable@1100525024 : Boolean INDATASET;
      CostComponentEditable@1100528903 : Boolean INDATASET;
      CostTypePriceEditable@1100528904 : Boolean INDATASET;
      LengthEditable@1100525025 : Boolean INDATASET;
      WidthEditable@1100525026 : Boolean INDATASET;
      HeightEditable@1100525027 : Boolean INDATASET;
      QuantityEditable@1100525028 : Boolean INDATASET;
      Text000@1100409002 : TextConst 'ENU=Adding not allowed: %1 is fixed.;NOR=Legge til er ikke tillatt: %1 er fast.;SVE=Till„gg „r inte till†tet: %1 „r fast.';
      Text001@1100409001 : TextConst 'ENU=Changing not allowed: %1 is fixed.;NOR=Endring ikke tillatt: %1 er fast.;SVE=Žndring inte till†tet: %1 „r fast.';
      Text002@1100409000 : TextConst 'ENU=Deleting not allowed: %1 is fixed.;NOR=Fjerning ikke tillatt: %1 er fast.;SVE=Borttagning inte till†ten: %1 „r fast.';
      Text009@1100525029 : TextConst 'ENU=Add Line first.;NOR=Legg til rad f›rst.;SVE=L„gg till rad f”rst.';
      PriceAgreement@1100525035 : Boolean INDATASET;
      SurchargeStyleExpr@1100529402 : Boolean INDATASET;
      NormStyleExpr@1100529401 : Boolean INDATASET;
      PriceStyleExpr@1100529400 : Boolean INDATASET;
      chrg0@1100529409 : Boolean;
      chrg1@1100529408 : Boolean;
      chrg2@1100529407 : Boolean;
      chrg3@1100529406 : Boolean;
      chrg4@1100529405 : Boolean;
      chrg5@1100529404 : Boolean;
      DeviatingSalesPriceBln@1100525036 : Boolean INDATASET;
      DeviatingSalesNormBln@1100525031 : Boolean INDATASET;
      Text010@1100528500 : TextConst 'ENU=Remove Zero Lines BOM ?;NOR=Vil du fjerne Null-rader i stykkliste?;SVE=Vill du ta bort nollrader i strukturen?';
      ChangedCostAmountBOM@1100528501 : Decimal;
      ChangedSalesAmountBOM@1100528502 : Decimal;

    PROCEDURE RecalcTotals@1();
    BEGIN
      CurrPage.SAVERECORD;
      CalculateTotals;
      CheckRecipeCharge;
      UpdateRelatedRecipe("Recipe Group", Recipe);
      CurrPage.UPDATE(FALSE);
    END;

    PROCEDURE ExplodeSetLines@1100525002();
    VAR
      Rec2@1100525000 : Record 11020582;
    BEGIN
      Rec2.COPY(Rec);
      CurrPage.SETSELECTIONFILTER(Rec2);
      Rec2.SETFILTER(Rec2."Set Code",'<>%1','');

      IF EstimatePlantMgt.ExplodeSetLinesToBaseRcpLine(Rec2) THEN
        CurrPage.UPDATE(TRUE);
    END;

    PROCEDURE InsertPlantCostLines@1100525001();
    VAR
      Rec2@1100525000 : Record 11020582;
    BEGIN
      Rec2.COPY(Rec);
      CurrPage.SETSELECTIONFILTER(Rec2);
      Rec2.SETFILTER(Rec2."Plant Type",'<>%1','');

      EstimatePlantMgt.SkipQuestion;  //db, 04-02-19
      IF EstimatePlantMgt.InsPltCostItmLinesToBasRcpLine(Rec2) THEN
        CurrPage.UPDATE(TRUE);
    END;

    PROCEDURE FieldIsEditable@1100525008() : Boolean;
    VAR
      EstMgmt@1100525001 : Codeunit 11012232;
      Fixed@1100409000 : Boolean;
    BEGIN
      //db, 04-08-14:  (synchronized with page 11012158)
      Fixed := IsFixed;

      RecipeGroupChildEditable := NOT Fixed;
      RecipeChildEditable := NOT Fixed;
      SetCodeEditable := NOT Fixed;
      PlantTypeEditable := NOT Fixed;
      ItemNoEditable := NOT Fixed;
      BasicItemEditable := NOT Fixed;
      ManufacturerEditable := NOT Fixed;
      VendorTradeItemEditable := NOT Fixed;
      TradeItemEditable := NOT Fixed;
      CodeEditable := NOT Fixed;
      TimeQuantityEditable := NOT Fixed;
      UnitofTimeEditable := NOT Fixed;
      SurchargeTypeEditable := NOT Fixed;
      SurchargePercEditable := NOT Fixed;
      SubOperationCodeEditable := NOT Fixed;
      NormGroupEditable := NOT Fixed;
      NormEditable := NOT Fixed;

      RateCodeEditable := NOT Fixed;
      GrossPriceEditable := NOT Fixed;
      NetCostPriceEditable := NOT Fixed;
      NetSalesPriceEditable := NOT Fixed;
      PurchDiscountEditable := NOT Fixed;
      SalesDiscountEditable := NOT Fixed;
      BuyBackPriceEditable := NOT Fixed;
      BuyBackPercEditable := NOT Fixed;

      CostObjectLaborEditable := NOT Fixed;
      CostObjectPriceEditable := NOT Fixed;
      CostComponentEditable := NOT Fixed;
      CostTypePriceEditable := NOT Fixed;

      QuantityEditable := NOT Fixed;
      LengthEditable := NOT Fixed;
      WidthEditable := NOT Fixed;
      HeightEditable := NOT Fixed;

      //AdditionalCostEditable := NOT Fixed;
      //VendorEditable := NOT Fixed;
      //PriceAgreementEditable := NOT Fixed;
      //AskForQuoteEditable := NOT Fixed;
      //DocumentNoEditable := NOT Fixed;
      //LineStatusEditable := NOT Fixed;
      //UnitOfMeasureEditable := NOT Fixed;
      //DescriptionEditable := NOT Fixed;

      IF NOT Fixed THEN BEGIN
        RecipeGroupChildEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Recipe Group (Child)"),Rec);
        RecipeChildEditable := EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Recipe (Child)"),Rec);
        SetCodeEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Set Code"),Rec);
        PlantTypeEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Plant Type"),Rec);
        ItemNoEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Item No."),Rec);
        ManufacturerEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO(Manufacturer),Rec);
        BasicItemEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Basic Item"),Rec);
        VendorTradeItemEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Vendor (Trade Item)"),Rec);
        TradeItemEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Trade Item"),Rec);
        CodeEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO(Code),Rec);
        TimeQuantityEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Time Quantity"),Rec);
        UnitofTimeEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Unit of Time"),Rec);
        SurchargeTypeEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Surcharge Type"),Rec);
        SurchargePercEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Surcharge %"),Rec);
        NormGroupEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Norm Group"),Rec);
        SubOperationCodeEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Sub Operation Code"),Rec);
        NormEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO(Norm),Rec);
        RateCodeEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Rate Code"),Rec);
        WageComponentEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Wage Component"),Rec);
        GrossPriceEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Gross Price"),Rec);
        NetCostPriceEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Net Cost Price"),Rec);
        NetSalesPriceEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Net Sales Price"),Rec);
        PurchDiscountEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Purchase Discount %"),Rec);
        SalesDiscountEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Sales Discount %"),Rec);
        BuyBackPriceEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Buy Back Price"),Rec);
        BuyBackPercEditable :=  EstMgmt.BaseRcpFieldIsEditable(FIELDNO("Buy Back %"),Rec);
        IF ("Cost Type (Price)" = "Cost Type (Price)"::Plant) OR
           ("Cost Type (Price)" = "Cost Type (Price)"::Subcontracting) THEN
          RateCodeEditable := FALSE;  //C061168
        //C038451.sn
        CostObjectLaborEditable := ("Recipe (Child)" = '');
        CostObjectPriceEditable := ("Recipe (Child)" = '');
        CostComponentEditable :=  ("Recipe (Child)" = '');
        CostTypePriceEditable :=  ("Recipe (Child)" = '');
        //C038451.en
        LengthEditable := EnterQuantity(1);
        WidthEditable := EnterQuantity(1);
        HeightEditable := EnterQuantity(1);
        QuantityEditable := EnterQuantity(2);

        PriceAgreement := ("Price Agreement" OR  "Norm Agreement");
      END;
    END;

    PROCEDURE EditText@8(lvType@1210190000 : 'intern,extern');
    VAR
      TextFrm@11012001 : Page 11012120;
    BEGIN
      IF "Line No." = 0 THEN
        ERROR(Text009);

      TextFrm.TextType(lvType);
      TextFrm.SetSelection(DATABASE::"Base Recipe Line","Recipe Group", Recipe, '', '', '', '',  "Line No.", 0);

      TextFrm.RUNMODAL;
      CLEAR(TextFrm);
    END;

    PROCEDURE CopyToBuffer@1100485003();
    VAR
      BaseRecipeLine@1100525000 : Record 11020582;
      EstLineRec@1100525003 : Record 11072072;
      EstRcpLineRec@1100525002 : Record 11072075;
      PartLineRec@1100525001 : Record 11072076;
      SalesRecipeLineRec@1100525004 : Record 11229789;
    BEGIN
      BaseRecipeLine.COPY(Rec);
      CurrPage.SETSELECTIONFILTER(BaseRecipeLine);
      BufferMgt.CopyToBuffer(3,EstLineRec,EstRcpLineRec,PartLineRec,BaseRecipeLine, SalesRecipeLineRec);
    END;

    PROCEDURE CopyFromBuffer@1100485002();
    VAR
      EstLineRec@1100525002 : Record 11072072;
      EstRcpLineRec@1100525001 : Record 11072075;
      PartLineRec@1100525000 : Record 11072076;
      SalesRecipeLineRec@1100525003 : Record 11229789;
    BEGIN
      BufferMgt.CopyFromBuffer(3,EstLineRec,EstRcpLineRec,PartLineRec,Rec, SalesRecipeLineRec);
    END;

    PROCEDURE ShowBuffer@1100485001();
    VAR
      EstLineRec@1100525002 : Record 11072072;
      EstRcpLineRec@1100525001 : Record 11072075;
      PartLineRec@1100525000 : Record 11072076;
      SalesRecipeLineRec@1100525003 : Record 11229789;
    BEGIN
      BufferMgt.ShowBuffer(3,EstLineRec,EstRcpLineRec,PartLineRec,Rec, SalesRecipeLineRec);
    END;

    PROCEDURE GenerateCharge@4();
    VAR
      BaseRecipeLine@1100529400 : Record 11020582;
    BEGIN
      //C033829.sn
      BaseRecipeLine.COPY(Rec);
      CurrPage.SETSELECTIONFILTER(BaseRecipeLine);
      BaseRecipeLine.CreateCharge;
      //C033829.en
      RecalcTotals;
    END;

    PROCEDURE EditDetailRecipeLine@1100528901();
    BEGIN
      PAGE.RUNMODAL(PAGE::"Base Recipe Line Card", Rec);
    END;

    PROCEDURE ActivateChildRecipe@1100525000();
    VAR
      RecipeRec@1100525000 : Record 11020581;
      RcpFrm@1100525001 : Page 11125071;
    BEGIN
      //db, 24-06-14
      IF "Recipe (Child)" = '' THEN EXIT;
      RecipeRec.RESET;
      RecipeRec.SETRANGE("Recipe Group", "Recipe Group (Child)");
      RecipeRec.SETRANGE("No.", "Recipe (Child)");
      RcpFrm.EDITABLE(FALSE);
      RcpFrm.SETTABLEVIEW(RecipeRec);
      RcpFrm.RUNMODAL;
    END;

    PROCEDURE EditCommentLines@1100525015();
    BEGIN
    END;

    PROCEDURE HandleLookupRateCode@1100409001();
    VAR
      EstSetup@1100409000 : Record 11012150;
      RecipeRec@1100409001 : Record 11020581;
      RateGroupRec@1100409002 : Record 11012162;
      BudgetRateRec@1100409003 : Record 11012000;
    BEGIN
      //db, 02-02-15
      EstSetup.GET;
      IF EstSetup."Rates Based On" = EstSetup."Rates Based On"::"Budget Rate" THEN BEGIN
        IF PAGE.RUNMODAL(0, BudgetRateRec) = ACTION::LookupOK THEN
          VALIDATE("Rate Code", BudgetRateRec.Code);
      END ELSE BEGIN
        RecipeRec.GET("Recipe Group", Recipe);
        RateGroupRec.SETRANGE("Rate Group", RecipeRec."Rate Group");
        IF PAGE.RUNMODAL(0, RateGroupRec) = ACTION::LookupOK THEN
          VALIDATE("Rate Code", RateGroupRec."Rate Code");
      END;
    END;

    LOCAL PROCEDURE OnBeforeLookup@1100527000();
    BEGIN
      xRec := Rec;  //C046148: avoid problem with CurrPage.SAVERECORD by RecalcTotals
    END;

    PROCEDURE ExplodeBOM@1100528502();
    VAR
      BaseRecipeLine@1100525000 : Record 11020582;
    BEGIN
      BaseRecipeLine.COPY(Rec);
      BaseRecipeLine.MARKEDONLY(TRUE);
      IF BaseRecipeLine.ISEMPTY THEN
        BaseRecipeLine.MARK(TRUE);
      IF BaseRecipeLine.FINDSET THEN BEGIN
        REPEAT
          ChangedCostAmountBOM := BaseRecipeLine."Cost Amount";
          ChangedSalesAmountBOM := BaseRecipeLine."Sales Amount";  //C028603
          CODEUNIT.RUN(CODEUNIT::"BaseRecipeLine-Explode BOM",BaseRecipeLine);  //DP00381
          UpgradeBOMAmountAfter(BaseRecipeLine);
          COMMIT;
        UNTIL BaseRecipeLine.NEXT = 0;
      END;
      CLEARMARKS;
    END;

    PROCEDURE UpgradeBOMDiscount@1100528501();
    VAR
      BaseRecipeLine@1100525000 : Record 11020582;
      ProcessBOMDiscount@1100525001 : Report 11012549;
    BEGIN
      BaseRecipeLine.COPY(Rec);
      BaseRecipeLine.SETRECFILTER;
      ProcessBOMDiscount.SetSelection(DATABASE::"Base Recipe Line");
      ProcessBOMDiscount.SetSelectionBaseRecipe(BaseRecipeLine,1);  //C028603: 1=cost, 2=sales
      ProcessBOMDiscount.SETTABLEVIEW(BaseRecipeLine);
      ProcessBOMDiscount.RUNMODAL;
      CurrPage.UPDATE;
    END;

    PROCEDURE RemoveZeroLinesBOM@1100525003();
    VAR
      BaseRecipeLine@1100525001 : Record 11020582;
      RemoveZeroLinesBOM@1100525002 : Report 11012358;
    BEGIN
      IF NOT CONFIRM(Text010,FALSE) THEN
        EXIT;

      BaseRecipeLine.COPY(Rec);
      BaseRecipeLine.MARKEDONLY(TRUE);
      IF BaseRecipeLine.ISEMPTY THEN BEGIN
        BaseRecipeLine.MARKEDONLY(FALSE);
        BaseRecipeLine.SETRANGE("Line No.", "Line No.");
      END;
      IF BaseRecipeLine.FINDSET THEN BEGIN
        REPEAT
          RemoveZeroLinesBOM.SetSelection(DATABASE::"Base Recipe Line");
          RemoveZeroLinesBOM.SetSelectionBaseRecipe(BaseRecipeLine);
          RemoveZeroLinesBOM.SETTABLEVIEW(BaseRecipeLine);
          RemoveZeroLinesBOM.USEREQUESTPAGE(FALSE);
          RemoveZeroLinesBOM.RUNMODAL;
          COMMIT;
          CLEAR(RemoveZeroLinesBOM);
        UNTIL BaseRecipeLine.NEXT = 0;
      END;
      CLEARMARKS;
    END;

    PROCEDURE UpgradeBOMAmount@1100528500();
    VAR
      BaseRecipeLine@1100525002 : Record 11020582;
      ProcessBOMAmount@1100525001 : Report 11012359;
    BEGIN
      BaseRecipeLine.COPY(Rec);
      BaseRecipeLine.SETRECFILTER;
      ProcessBOMAmount.SetSelection(DATABASE::"Base Recipe Line");
      ProcessBOMAmount.SetSelectionBaseRecipe(BaseRecipeLine,1);  //C028603 : 1=cost, 2=sales
      ProcessBOMAmount.SETTABLEVIEW(BaseRecipeLine);
      ProcessBOMAmount.RUNMODAL;
      CurrPage.UPDATE;
    END;

    PROCEDURE UpgradeBOMAmountAfter@1100525005(VAR BaseRecipeLine2@1100525000 : Record 11020582);
    VAR
      BaseRecipeLine@1100525002 : Record 11020582;
      ProcessBOMAmount@1100525001 : Report 11012359;
    BEGIN
      BaseRecipeLine.COPY(BaseRecipeLine2);
      BaseRecipeLine.SETRECFILTER;
      ProcessBOMAmount.SetSelection(DATABASE::"Base Recipe Line");
      ProcessBOMAmount.SetSelectionBaseRecipeAmount(BaseRecipeLine,ChangedCostAmountBOM,ChangedSalesAmountBOM);  //C028603
      ProcessBOMAmount.SETTABLEVIEW(BaseRecipeLine);
      ProcessBOMAmount.USEREQUESTPAGE(FALSE);
      ProcessBOMAmount.RUNMODAL;
      CurrPage.UPDATE;
    END;

    BEGIN
    {
      //db, 02-12-14: lookup RateCode removed; use lookup tablefield (based on EstSetup)
    }
    END.
  }
}

