OBJECT Page 291 Req. Worksheet
{
  OBJECT-PROPERTIES
  {
    Date=;
    Time=;
    Version List=NAVW114.03,4PS14.00;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Requisition Worksheets;
               NOR=Bestillingsforslag;
               SVE=Inkîpsfîrslag];
    ApplicationArea=#Basic,#Suite,#Planning;
    SaveValues=Yes;
    LinksAllowed=No;
    SourceTable=Table246;
    DelayedInsert=Yes;
    DataCaptionFields=Journal Batch Name;
    PageType=Worksheet;
    UsageCategory=Tasks;
    AdditionalSearchTermsML=[ENU=supply planning,mrp,mps;
                             NOR=forsyningsplanlegging,mrp,mps;
                             SVE=leveransplanering,nettobehov,prod.program];
    AutoSplitKey=Yes;
    PromotedActionCategoriesML=[ENU=New,Process,Report,Drop Shipment,Special Order,Line,Item Availability by;
                                NOR=Ny,Prosess,Rapport,Direkte levering,Spesialordre,Linje,Varedisposisjon av;
                                SVE=Ny,Process,Rapport,Direktleverans,Specialorder,Rad,Artikeldisp. per];
    OnInit=BEGIN
             "Vendor (Trade Item)Visible" := TRUE;
             "Trade ItemVisible" := TRUE;
             ManufacturerVisible := TRUE;
             "Basic ItemVisible" := TRUE;
             "Ref. Order No.Editable" := TRUE;
           END;

    OnOpenPage=VAR
                 JnlSelected@1000 : Boolean;
                 FPSLicenseManagement@1100527400 : Codeunit 11229289;
               BEGIN
                 //**4PS Generated Code. Do Not Change.sn01
                 DPA_IsHardFilter := DPA_SetFilters(CurrPage.OBJECTID(FALSE));
                 //**4PS Generated Code.en01
                 OpenedFromBatch := ("Journal Batch Name" <> '') AND ("Worksheet Template Name" = '');
                 IF OpenedFromBatch THEN BEGIN
                   CurrentJnlBatchName := "Journal Batch Name";
                   ReqJnlManagement.OpenJnl(CurrentJnlBatchName,Rec);
                   EXIT;
                 END;
                 OnBeforeTemplateSelection(Rec,CurrentJnlBatchName);
                 ReqJnlManagement.TemplateSelection(PAGE::"Req. Worksheet",FALSE,0,Rec,JnlSelected);
                 IF NOT JnlSelected THEN
                   ERROR('');

                 OnBeforeOpenReqWorksheet(CurrentJnlBatchName);
                 ReqJnlManagement.OpenJnl(CurrentJnlBatchName,Rec);

                 //**4PS.sn
                 IF NOT FPSLicenseManagement.LicenseAndReadPermissionForTable(ItemSetup) THEN BEGIN
                   "Basic ItemVisible" := (FALSE);
                   ManufacturerVisible := (FALSE);
                   "Trade ItemVisible" := (FALSE);
                   "Vendor (Trade Item)Visible" := (FALSE);
                 END;
                 //**4PS.en
               END;

    OnFindRecord=VAR
                   Found@1100528200 : Boolean;
                 BEGIN
                   //**4PS.sn
                   Found := FindPosition(Which);
                   EXIT(Found);
                   //**4PS.en
                 END;

    OnNextRecord=VAR
                   lRequisitionLine@1100528201 : Record 246;
                   NextStep@1100528200 : Integer;
                 BEGIN
                   //**4PS.sn
                   lRequisitionLine.COPY(Rec);
                   NextStep := NextPosition(lRequisitionLine,Steps);
                   IF NextStep <> 0 THEN Rec.COPY(lRequisitionLine);
                   EXIT(NextStep);
                   //**4PS.en
                 END;

    OnAfterGetRecord=BEGIN
                       ShowShortcutDimCode(ShortcutDimCode);
                       //**4PS.sn
                       StrategicPurchMgt.FindContractForReqLine(Rec);
                       GetBaseQuanUnit(BaseQuan, BaseUnit);
                       InventoryReservation("No.");
                       CheckHideValues;
                       PlanningWarningLevel1OnFormat;
                       GetPurchaser(Rec);
                       GetItemInfo;
                       IF Type = Type::Item THEN BEGIN
                         IF (("Ref. Order Type" = "Ref. Order Type"::Purchase) AND (Item."Purchasing Blocked")) OR
                           Item.Blocked
                         THEN
                           ItemIsblocked := TRUE;
                       END ELSE
                         ItemIsblocked := FALSE;
                       //**4PS.en
                     END;

    OnNewRecord=BEGIN
                  //**4PS Generated Code. Do Not Change.sn02
                  DPA_SetDefaultDepartment;
                  //**4PS Generated Code.en02
                  CLEAR(BaseQuan);
                  CLEAR(BaseUnit);
                  ReqJnlManagement.SetUpNewLine(Rec,xRec);
                  CLEAR(ShortcutDimCode);
                  InventoryQuan := 0;
                  LocInventoryQuan := 0;
                END;

    OnInsertRecord=VAR
                     xRecRef@1100000999 : RecordRef;
                   BEGIN
                     //**4PS Generated Code. Do Not Change.sn05
                     xRecRef.GETTABLE(xRec);
                     DPA_SetDefaultDpmtFromNoSeries(xRecRef);
                     //**4PS Generated Code.en05
                   END;

    OnDeleteRecord=BEGIN
                     "Accept Action Message" := FALSE;
                   END;

    OnAfterGetCurrRecord=BEGIN
                           ReqJnlManagement.GetDescriptionAndRcptName(Rec,Description2,BuyFromVendorName);
                           "Ref. Order No.Editable" := ("Use Blanket Order" AND ("Action Message" = "Action Message"::New)); //**4PS.n
                         END;

    ActionList=ACTIONS
    {
      { 1900000003;0 ;ActionContainer;
                      ActionContainerType=RelatedInformation }
      { 29      ;1   ;ActionGroup;
                      CaptionML=[ENU=&Line;
                                 NOR=&Linje;
                                 SVE=Ra&d];
                      Image=Line }
      { 30      ;2   ;Action    ;
                      ShortCutKey=Shift+F7;
                      CaptionML=[ENU=Card;
                                 NOR=Kort;
                                 SVE=Kort];
                      ToolTipML=[ENU=View or change detailed information about the item or resource.;
                                 NOR=Vis eller endre detaljert informasjon om varene eller ressursen.;
                                 SVE=Visa eller Ñndra detaljerad information om artikeln eller resursen.];
                      ApplicationArea=#Planning;
                      RunObject=Codeunit 335;
                      Promoted=Yes;
                      PromotedIsBig=No;
                      Image=EditLines;
                      PromotedCategory=Category6 }
      { 76      ;2   ;ActionGroup;
                      CaptionML=[ENU=Item Availability by;
                                 NOR=Varetilgjengelighet per;
                                 SVE=Artikeldisp. per];
                      Image=ItemAvailability }
      { 3       ;3   ;Action    ;
                      CaptionML=[ENU=Event;
                                 NOR=Hendelse;
                                 SVE=UtstÑllning];
                      ToolTipML=[ENU=View how the actual and the projected available balance of an item will develop over time according to supply and demand events.;
                                 NOR=Vis hvordan den aktuelle og forventede disponible beholdningen for en vare vil utvikle seg over tid i henhold til tilbud og etterspõrselhendelser.;
                                 SVE=Visa hur aktuell och planerad lagerutveckling fîr en artikel utvecklas med tiden enligt tillgÜngs- och efterfrÜgehÑndelser.];
                      ApplicationArea=#Planning;
                      Promoted=Yes;
                      Visible=False;
                      Image=Event;
                      PromotedCategory=Category7;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromReqLine(Rec,ItemAvailFormsMgt.ByEvent)
                               END;
                                }
      { 77      ;3   ;Action    ;
                      CaptionML=[ENU=Period;
                                 NOR=Periode;
                                 SVE=Period];
                      ToolTipML=[ENU=Show the projected quantity of the item over time according to time periods, such as day, week, or month.;
                                 NOR=Viser beregnet antall av varen over tid i henhold til tidsperioder, for eksempel dag, uke eller mÜned.;
                                 SVE=Visa planerat antal fîr artikeln îver tiden enligt tidsperioder, sÜsom dag, vecka eller mÜnad.];
                      ApplicationArea=#Planning;
                      Promoted=Yes;
                      Image=Period;
                      PromotedCategory=Category7;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromReqLine(Rec,ItemAvailFormsMgt.ByPeriod)
                               END;
                                }
      { 78      ;3   ;Action    ;
                      CaptionML=[ENU=Variant;
                                 NOR=Variant;
                                 SVE=Variant];
                      ToolTipML=[ENU=View or edit the item's variants. Instead of setting up each color of an item as a separate item, you can set up the various colors as variants of the item.;
                                 NOR=Vis eller rediger varens varianter. Du kan definere de ulike fargene som varianter av varen i stedet for Ü definere hver variant som en egen vare.;
                                 SVE=Visa eller redigera artikelns varianter. I stÑllet fîr att registrera varje fÑrg pÜ en artikel som en separat artikel, kan du registrera de olika fÑrgerna som varianter av artikeln.];
                      ApplicationArea=#Planning;
                      Promoted=Yes;
                      Visible=FALSE;
                      Image=ItemVariant;
                      PromotedCategory=Category7;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromReqLine(Rec,ItemAvailFormsMgt.ByVariant)
                               END;
                                }
      { 61      ;3   ;Action    ;
                      AccessByPermission=TableData 14=R;
                      CaptionML=[ENU=Location;
                                 NOR=Lokasjon;
                                 SVE=LagerstÑlle];
                      ToolTipML=[ENU=View the actual and projected quantity of the item per location.;
                                 NOR=Vis faktisk og beregnet antall av varen per lokasjon.;
                                 SVE=Visa aktuellt och planerat antal artiklar per lagerstÑlle.];
                      ApplicationArea=#Location;
                      Promoted=Yes;
                      Image=Warehouse;
                      PromotedCategory=Category7;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromReqLine(Rec,ItemAvailFormsMgt.ByLocation)
                               END;
                                }
      { 7       ;3   ;Action    ;
                      CaptionML=[ENU=BOM Level;
                                 NOR=StykklistenivÜ;
                                 SVE=StrukturnivÜ];
                      ToolTipML=[ENU=View availability figures for items on bills of materials that show how many units of a parent item you can make based on the availability of child items.;
                                 NOR=Vis tilgjengelighetstall for stykklistevarer som angir hvor mange enheter av en overordnet vare du kan lage basert pÜ tilgjengeligheten av underordnede varer.;
                                 SVE=Visa tillgÑnglighetssiffror fîr artiklar i strukturer som visar hur mÜnga enheter av en îverordnad artikel som gÜr att tillverka baserat pÜ underartiklarnas tillgÑnglighet.];
                      ApplicationArea=#Assembly;
                      Promoted=Yes;
                      Visible=False;
                      Image=BOMLevel;
                      PromotedCategory=Category7;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromReqLine(Rec,ItemAvailFormsMgt.ByBOM)
                               END;
                                }
      { 5       ;3   ;Action    ;
                      CaptionML=[ENU=Timeline;
                                 NOR=Tidslinje;
                                 SVE=Tidslinje];
                      ToolTipML=[ENU=Get a graphical view of an item's projected inventory based on future supply and demand events, with or without planning suggestions. The result is a graphical representation of the inventory profile.;
                                 NOR=FÜ en grafisk visning av beregnet beholdning for en vare, basert pÜ fremtidige tilbud og etterspõrselhendelser, med eller uten planleggingsforslag. Resultatet er en grafisk visning av beholdningsprofilen.;
                                 SVE=Visa en grafisk vy îver en artikels planerade lager baserat pÜ framtida tillgÜngs- och efterfrÜgehÑndelser, med eller utan planeringsfîrslag. Resultatet Ñr en grafisk representation av lagerprofilen.];
                      ApplicationArea=#Planning;
                      Promoted=Yes;
                      Visible=False;
                      Enabled=True;
                      Image=Timeline;
                      PromotedCategory=Category7;
                      OnAction=BEGIN
                                 ShowTimeline(Rec);
                               END;
                                }
      { 83      ;2   ;Action    ;
                      AccessByPermission=TableData 348=R;
                      ShortCutKey=Shift+Ctrl+D;
                      CaptionML=[ENU=Dimensions;
                                 NOR=Dimensjoner;
                                 SVE=Dimensioner];
                      ToolTipML=[ENU=View or edit dimensions, such as area, project, or department, that you can assign to sales and purchase documents to distribute costs and analyze transaction history.;
                                 NOR=Vis eller rediger dimensjoner, for eksempel omrÜde, prosjekt eller avdeling, som du kan tilordne til salgs- og kjõpsdokumenter for Ü distribuere kostnader og analysere transaksjonshistorikk.;
                                 SVE=Visa eller redigera mÜtt, till exempel omrÜde, projekt eller avdelning, som du kan tilldela till fîrsÑljnings- och inkîpsdokument fîr att fîrdela kostnader och analysera transaktionshistorik.];
                      ApplicationArea=#Dimensions;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Dimensions;
                      PromotedCategory=Category6;
                      OnAction=BEGIN
                                 ShowDimensions;
                                 CurrPage.SAVERECORD;
                               END;
                                }
      { 6500    ;2   ;Action    ;
                      ShortCutKey=Shift+Ctrl+I;
                      CaptionML=[ENU=Item &Tracking Lines;
                                 NOR=Vare&sporingslinjer;
                                 SVE=Artikel&spÜrningsrader];
                      ToolTipML=[ENU=View or edit serial numbers and lot numbers that are assigned to the item on the document or journal line.;
                                 NOR=Vis eller rediger serienumre og partinumre som er tilordnet til varen i dokumentet eller pÜ kladdelinjen.;
                                 SVE=Visa eller redigera serie- och partinummer som har tilldelats artikeln pÜ dokument- eller journalraden.];
                      ApplicationArea=#ItemTracking;
                      Promoted=Yes;
                      Visible=FALSE;
                      PromotedIsBig=Yes;
                      Image=ItemTrackingLines;
                      PromotedCategory=Category6;
                      OnAction=BEGIN
                                 OpenItemTrackingLines;
                               END;
                                }
      { 1100525037;2 ;Action    ;
                      CaptionML=[ENU=Purchase Orders;
                                 SVE=Inkîpsorder];
                      Image=Document;
                      OnAction=VAR
                                 Job@1100525001 : Record 11072003;
                                 ServiceOrder@1100525002 : Record 11012823;
                               BEGIN
                                 //**4PS
                                 IF ("Project No." = '') AND ("Service Order No." = '') THEN
                                   ERROR(Text11012002);

                                 IF "Project No." <> '' THEN
                                   IF Job.GET("Project No.") THEN
                                     Job.ShowPurchaseOrdersForProject;

                                 IF "Service Order No." <> '' THEN
                                   IF ServiceOrder.GET("Service Order No.") THEN
                                     ServiceOrder.ShowPurchaseOrdersForServiceOrder;
                               END;
                                }
      { 1210190011;2 ;Action    ;
                      CaptionML=[ENU=&Text Block;
                                 SVE=&Textblock];
                      Image=Text;
                      OnAction=BEGIN
                                 EditText();  //**4PS
                               END;
                                }
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 31      ;1   ;ActionGroup;
                      CaptionML=[ENU=F&unctions;
                                 NOR=F&unksjoner;
                                 SVE=Fu&nktion];
                      Image=Action }
      { 32      ;2   ;Action    ;
                      Name=CalculatePlan;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Calculate Plan;
                                 NOR=Beregn plan;
                                 SVE=Skapa inkîpsfîrslag];
                      ToolTipML=[ENU=Use a batch job to help you calculate a supply plan for items and stockkeeping units that have the Replenishment System field set to Purchase or Transfer.;
                                 NOR=Bruk en kjõrsel til Ü beregne en forsyningsplan for varer og lagerfõringsenheter som har verdien Kjõp eller Overfõring i feltet Etterfyllingssystem.;
                                 SVE=AnvÑnd ett batch-jobb fîr att berÑkna en leveransplan fîr de artiklar och lagerstÑlleenheter dÑr fÑltet èteranskaffningssystem anges till Inkîp eller ôverfîring.];
                      ApplicationArea=#Planning;
                      Promoted=Yes;
                      Visible=FALSE;
                      PromotedIsBig=Yes;
                      Image=CalculatePlan;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 CalculatePlan.SetTemplAndWorksheet("Worksheet Template Name","Journal Batch Name");
                                 CalculatePlan.RUNMODAL;
                                 CLEAR(CalculatePlan);
                               END;
                                }
      { 33      ;2   ;ActionGroup;
                      CaptionML=[ENU=Drop Shipment;
                                 NOR=Direkte levering;
                                 SVE=Direktutleverans];
                      Visible=FALSE;
                      Image=Delivery }
      { 34      ;3   ;Action    ;
                      AccessByPermission=TableData 223=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Get &Sales Orders;
                                 NOR=H&ent ordrer;
                                 SVE=HÑmta &fîrs.order];
                      ToolTipML=[ENU=Copy sales lines to the requisition worksheet. You can use the batch job to create requisition worksheet proposal lines from sales lines for drop shipments or special orders.;
                                 NOR=Kopier salgslinjer til bestillingsforslaget. Du kan bruke kjõrselen til Ü opprette bestillingsforslagslinjer fra salgslinjer for direkte leveringer eller spesialbestillinger.;
                                 SVE=Kopiera fîrsÑljningsrader till inkîpsfîrslaget. Du kan anvÑnda batch-jobbet fîr att skapa inkîpsfîrslagsrader frÜn fîrsÑljningsraderna fîr direktleveranser eller specialorder.];
                      ApplicationArea=#Planning;
                      Promoted=Yes;
                      Visible=FALSE;
                      Image=Order;
                      PromotedCategory=Category4;
                      OnAction=BEGIN
                                 GetSalesOrder.SetReqWkshLine(Rec,0);
                                 GetSalesOrder.RUNMODAL;
                                 CLEAR(GetSalesOrder);
                               END;
                                }
      { 35      ;3   ;Action    ;
                      AccessByPermission=TableData 110=R;
                      CaptionML=[ENU=Sales &Order;
                                 NOR=O&rdre;
                                 SVE=&FîrsÑljningsorder];
                      ToolTipML=[ENU=Create a new sales order for an item that is shipped directly from the vendor to the customer. The Drop Shipment check box must be selected on the sales order line, and the Vendor No. field must be filled on the item card.;
                                 NOR=Opprett en ny ordre for en vare som er levert direkte fra leverandõren til kunden. Det mÜ merkes av i avmerkingsboksen Direkte levering pÜ ordrelinjen, og feltet Leverandõrnr. mÜ fylles ut pÜ varekortet.;
                                 SVE=Skapa en ny fîrsÑljningsorder fîr en artikel som levererades direkt frÜn leverantîren till kunden. Kryssrutan Direktutleverans mÜste markeras pÜ fîrsÑljningsorderraden och fÑltet Leverantîrsnr mÜste fyllas i pÜ artikelkortet.];
                      ApplicationArea=#Planning;
                      Promoted=Yes;
                      Visible=FALSE;
                      Image=Document;
                      PromotedCategory=Category4;
                      OnAction=BEGIN
                                 SalesHeader.SETRANGE("No.","Sales Order No.");
                                 SalesOrder.SETTABLEVIEW(SalesHeader);
                                 SalesOrder.EDITABLE := FALSE;
                                 SalesOrder.RUN;
                               END;
                                }
      { 52      ;2   ;ActionGroup;
                      CaptionML=[ENU=Special Order;
                                 NOR=Spesialbestilling;
                                 SVE=Specialorder];
                      Visible=FALSE;
                      Image=SpecialOrder }
      { 53      ;3   ;Action    ;
                      AccessByPermission=TableData 223=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Get &Sales Orders;
                                 NOR=&Hent ordrer;
                                 SVE=HÑmta &fîrs.order];
                      ToolTipML=[ENU=Copy sales lines to the requisition worksheet. You can use the batch job to create requisition worksheet proposal lines from sales lines for drop shipments or special orders.;
                                 NOR=Kopier salgslinjer til bestillingsforslaget. Du kan bruke kjõrselen til Ü opprette bestillingsforslagslinjer fra salgslinjer for direkte leveringer eller spesialbestillinger.;
                                 SVE=Kopiera fîrsÑljningsrader till inkîpsfîrslaget. Du kan anvÑnda batch-jobbet fîr att skapa inkîpsfîrslagsrader frÜn fîrsÑljningsraderna fîr direktleveranser eller specialorder.];
                      ApplicationArea=#Planning;
                      Promoted=Yes;
                      Visible=FALSE;
                      Image=Order;
                      PromotedCategory=Category5;
                      OnAction=BEGIN
                                 GetSalesOrder.SetReqWkshLine(Rec,1);
                                 GetSalesOrder.RUNMODAL;
                                 CLEAR(GetSalesOrder);
                               END;
                                }
      { 75      ;3   ;Action    ;
                      AccessByPermission=TableData 110=R;
                      CaptionML=[ENU=Sales &Order;
                                 NOR=&Ordre;
                                 SVE=&FîrsÑljningsorder];
                      ToolTipML=[ENU=Create a new sales order for an item that is shipped directly from the vendor to the customer. The Drop Shipment check box must be selected on the sales order line, and the Vendor No. field must be filled on the item card.;
                                 NOR=Opprett en ny ordre for en vare som er levert direkte fra leverandõren til kunden. Det mÜ merkes av i avmerkingsboksen Direkte levering pÜ ordrelinjen, og feltet Leverandõrnr. mÜ fylles ut pÜ varekortet.;
                                 SVE=Skapa en ny fîrsÑljningsorder fîr en artikel som levererades direkt frÜn leverantîren till kunden. Kryssrutan Direktutleverans mÜste markeras pÜ fîrsÑljningsorderraden och fÑltet Leverantîrsnr mÜste fyllas i pÜ artikelkortet.];
                      ApplicationArea=#Planning;
                      Promoted=Yes;
                      Visible=FALSE;
                      Image=Document;
                      PromotedCategory=Category5;
                      OnAction=BEGIN
                                 SalesHeader.SETRANGE("No.","Sales Order No.");
                                 SalesOrder.SETTABLEVIEW(SalesHeader);
                                 SalesOrder.EDITABLE := FALSE;
                                 SalesOrder.RUN;
                               END;
                                }
      { 81      ;2   ;Separator  }
      { 90      ;2   ;Action    ;
                      Name=Reserve;
                      CaptionML=[ENU=&Reserve;
                                 NOR=Reser&ver;
                                 SVE=&Reservera];
                      ToolTipML=[ENU=Reserve one or more units of the item on the job planning line, either from inventory or from incoming supply.;
                                 NOR=Reserver Çn eller flere enheter av varen pÜ prosjektplanleggingslinjen, enten fra beholdningen eller fra innkommende forsyning.;
                                 SVE=Reservera en eller flera enheter av artikeln pÜ projektplaneringsraden, antingen frÜn lagret eller inkommande leverans.];
                      ApplicationArea=#Reservation;
                      Promoted=Yes;
                      Visible=FALSE;
                      PromotedIsBig=Yes;
                      Image=Reserve;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 CurrPage.SAVERECORD;
                                 ShowReservation;
                               END;
                                }
      { 37      ;2   ;Action    ;
                      Name=CarryOutActionMessage;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Generate Orders;
                                 NOR=&Utfõr handlingsmelding;
                                 SVE=&VerkstÑll ÜtgÑrdsmeddelande];
                      ToolTipML=[ENU=Use a batch job to help you create actual supply orders from the order proposals.;
                                 NOR=Bruk en kjõrsel til Ü opprette faktiske forsyningsordrer fra ordreforslagene.;
                                 SVE=AnvÑnd ett batch-jobb om du vill skapa faktiska leveransorder frÜn orderfîrslag.];
                      ApplicationArea=#Planning;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=MakeOrder;
                      PromotedCategory=Process;
                      OnAction=VAR
                                 PerformAction@1001 : Report 493;
                                 lvPurchHeadRec@1210190001 : Record 38;
                                 lvNoSeries@1210190002 : Code[10];
                                 RequisitionLine@1100529500 : Record 246;
                               BEGIN
                                 //**4PS.sn
                                 lvPurchHeadRec.CheckAskForNoSeries(lvPurchHeadRec."Document Type"::Order, lvNoSeries);
                                 PerformAction.SetAskForNoSerie(lvNoSeries);
                                 CheckMarkedLines(RequisitionLine);  //C034187 (db, 28-11-16)
                                 PerformAction.SetReqWkshLine(RequisitionLine);
                                 //**4PS.sn
                                 PerformAction.RUNMODAL;
                                 PerformAction.GetReqWkshLine(Rec);
                                 CurrentJnlBatchName := GETRANGEMAX("Journal Batch Name");
                                 CurrPage.UPDATE(FALSE);
                               END;
                                }
      { 1100485004;2 ;Action    ;
                      CaptionML=[ENU=Modify Vendor Collectively;
                                 SVE=éndra leverantîr kollektivt];
                      Image=Vendor;
                      OnAction=BEGIN
                                 UpdateVendor;
                               END;
                                }
      { 9       ;1   ;ActionGroup;
                      CaptionML=[ENU=Order Tracking;
                                 NOR=Sporing;
                                 SVE=OrderspÜrning];
                      Image=OrderTracking }
      { 80      ;2   ;Action    ;
                      CaptionML=[ENU=Order &Tracking;
                                 NOR=Sporin&g;
                                 SVE=Ordersp&Ürning];
                      ToolTipML=[ENU=Tracks the connection of a supply to its corresponding demand. This can help you find the original demand that created a specific production order or purchase order.;
                                 NOR=Sporer forbindelsen mellom en forsyning og tilhõrende behov. Dette bidrar til Ü finne det opprinnelige behovet som opprettet en bestemt produksjonsordre eller bestilling.;
                                 SVE=SpÜrar anslutningen fîr en tillgÜng till dess motsvarande efterfrÜgan. Det hÑr hjÑlper dig att hitta den ursprungliga tillgÜngen som skapade en viss produktionsorder eller inkîpsorder.];
                      ApplicationArea=#Planning;
                      Promoted=Yes;
                      Visible=FALSE;
                      PromotedIsBig=Yes;
                      Image=OrderTracking;
                      PromotedCategory=Category6;
                      OnAction=VAR
                                 TrackingForm@1001 : Page 99000822;
                               BEGIN
                                 TrackingForm.SetReqLine(Rec);
                                 TrackingForm.RUNMODAL;
                               END;
                                }
      { 1210190008;2 ;Action    ;
                      CaptionML=[ENU=Compress Requisition Lines;
                                 SVE=Komprimera rekvisitionsrader];
                      Image=Compress;
                      OnAction=VAR
                                 ReqLineRec@1210190000 : Record 246;
                               BEGIN
                                 //**4PS
                                 ReqLineRec.SETRANGE("Worksheet Template Name", "Worksheet Template Name");
                                 ReqLineRec.SETRANGE("Journal Batch Name", "Journal Batch Name");
                                 REPORT.RUNMODAL(REPORT::"Compress Requisition Lines",TRUE,TRUE, ReqLineRec);
                               END;
                                }
      { 1100485002;1 ;ActionGroup;
                      CaptionML=[ENU=&Print;
                                 SVE=Skriv &ut] }
      { 1100485003;2 ;Action    ;
                      CaptionML=[ENU=Lists Purchase Offers;
                                 SVE=Listor med inkîpsanbud];
                      Image=Report;
                      OnAction=BEGIN
                                 RequisitionLineRec.COPY(Rec);
                                 RequisitionLineRec.SETRANGE(Type,Type::"G/L Account");
                                 PrintDoc.PrintReqWksh(RequisitionLineRec);
                               END;
                                }
      { 1900000006;0 ;ActionContainer;
                      ActionContainerType=Reports }
      { 1901091106;1 ;Action    ;
                      CaptionML=[ENU=Inventory Availability;
                                 NOR=Lagertilgjengelighet;
                                 SVE=Lagerdisposition];
                      ToolTipML=[ENU=View, print, or save a summary of historical inventory transactions with selected items, for example, to decide when to purchase the items. The report specifies quantity on sales order, quantity on purchase order, back orders from vendors, minimum inventory, and whether there are reorders.;
                                 NOR=Vis, skriv ut eller lagre et sammendrag over historiske lagertransaksjoner med valgte varer, for eksempel for Ü bestemme nÜr varene skal kjõpes. Rapporten angir antall i ordre, antall i bestilling, restordre fra leverandõrer, minimumsbeholdning og hvorvidt det er gjenbestillinger.;
                                 SVE=Visa, skriv ut eller spara en sammanfattning av historiska lagertransaktioner fîr valda artiklar, till exempel fîr att avgîra nÑr artiklarna ska kîpas. Rapporten anger antal pÜ fîrsÑljningsorder, antal pÜ inkîpsorder, restorder frÜn leverantîrer, minimilager och huruvida det finns nÜgra lagerbestÑllningar.];
                      ApplicationArea=#Planning;
                      RunObject=Report 705;
                      Promoted=Yes;
                      Image=Report;
                      PromotedCategory=Report }
      { 1901254106;1 ;Action    ;
                      CaptionML=[ENU=Status;
                                 NOR=Status;
                                 SVE=Status];
                      ToolTipML=[ENU=View the status of the worksheet.;
                                 NOR=Vis statusen til forslaget.;
                                 SVE=Visa fîrslagets status.];
                      ApplicationArea=#Planning;
                      RunObject=Report 706;
                      Promoted=Yes;
                      Image=Report;
                      PromotedCategory=Report }
      { 1906212206;1 ;Action    ;
                      CaptionML=[ENU=Inventory - Availability Plan;
                                 NOR=Lager - tilgjengelighetsoversikt;
                                 SVE=Lagerdispositionsplan];
                      ToolTipML=[ENU=View a list of the quantity of each item in customer, purchase, and transfer orders and the quantity available in inventory. The list is divided into columns that cover six periods with starting and ending dates as well as the periods before and after those periods. The list is useful when you are planning your inventory purchases.;
                                 NOR=Vis en oversikt over mengden av hver vare i kundeordrer, bestillinger og overfõringsordrer samt den tilgjengelige lagermengden. Oversikten er delt inn i kolonner som dekker seks perioder, med start- og sluttdatoer i tillegg til periodene fõr og etter periodene. Listen er nyttig nÜr du planlegger varebestilling.;
                                 SVE=Visa en lista îver antalet enheter av varje artikel pÜ kund-, inkîps- och îverfîringsorder, samt tillgÑngligt antal i lager. Listan Ñr indelad i kolumner som omfattar sex perioder med start- och slutdatum, samt perioderna fîre och efter dessa perioder. Listan kan vara till stor hjÑlp vid inkîpsplanering.];
                      ApplicationArea=#Planning;
                      RunObject=Report 707;
                      Promoted=Yes;
                      Image=ItemAvailability;
                      PromotedCategory=Report }
      { 1903262806;1 ;Action    ;
                      CaptionML=[ENU=Inventory Order Details;
                                 NOR=Varer i ordrer;
                                 SVE=Artikel - orderdetaljer];
                      ToolTipML=[ENU=View a list of the orders that have not yet been shipped or received and the items in the orders. It shows the order number, customer's name, shipment date, order quantity, quantity on back order, outstanding quantity and unit price, as well as possible discount percentage and amount. The quantity on back order and outstanding quantity and amount are totaled for each item. The list can be used to find out whether there are currently shipment problems or any can be expected.;
                                 NOR=Vis en oversikt over ordrene som ennÜ ikke er levert eller mottatt, samt varene i ordrene. Den viser ordrenummer, kundens navn, leveringsdato, ordreantall, antall i restordrer, restantall, salgspris, eventuell rabattprosent og -belõp. Antall i restordrer, restantall og belõp legges sammen for hver vare. Listen kan brukes til Ü vise om det finnes akutte eller kommende leveringsproblemer.;
                                 SVE=Visa en lista îver order som Ñnnu inte har ut- eller inlevererats, samt orderartiklarna. Rapporten visar ordernummer, kundnamn, utleveransdatum, bestÑllningskvantitet, antal pÜ restorder, enhetspris samt mîjlig procentuell rabatt och belopp. Antal pÜ restorder samt belopp summeras fîr respektive artikel. Listan kan anvÑndas fîr att se om det finns leveransproblem.];
                      ApplicationArea=#Planning;
                      RunObject=Report 708;
                      Promoted=No;
                      Visible=FALSE;
                      Image=Report;
                      PromotedCategory=Report }
      { 1904739806;1 ;Action    ;
                      CaptionML=[ENU=Inventory Purchase Orders;
                                 NOR=Varer i bestillinger;
                                 SVE=Lager inkîpsorder];
                      ToolTipML=[ENU=View a list of items on order from vendors. It also shows the expected receipt date and the quantity and amount on back orders. The report can be used, for example, to see when items should be received and whether a reminder of a back order should be issued.;
                                 NOR=Vis en oversikt over varer i bestilling fra leverandõrer. Den viser ogsÜ opplysninger om mottaksdato og eventuell restordre i antall og belõp. Rapporten kan for eksempel brukes til Ü gi et overblikk over nÜr man kan forvente Ü fÜ levert varer, og om det skal utstedes en pÜminnelse om restordre.;
                                 SVE=Visa en lista îver artiklar pÜ order frÜn leverantîrer. Den visar Ñven fîrvÑntat inleveransdatum samt antal och belopp fîr restorder. Rapporten kan t.ex. anvÑndas fîr att se nÑr man kan fîrvÑnta sig leverans av artiklar och om det ska utfÑrdas en pÜminnelse fîr restorder.];
                      ApplicationArea=#Planning;
                      RunObject=Report 709;
                      Promoted=Yes;
                      Image=Report;
                      PromotedCategory=Report }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 25  ;1   ;Field     ;
                Lookup=Yes;
                CaptionML=[ENU=Name;
                           NOR=Navn;
                           SVE=Namn];
                ToolTipML=[ENU=Specifies the name of the record.;
                           NOR=Angir navnet pÜ posten.;
                           SVE=Anger postens namn.];
                ApplicationArea=#Planning;
                SourceExpr=CurrentJnlBatchName;
                Visible=FALSE;
                OnValidate=BEGIN
                             ReqJnlManagement.CheckName(CurrentJnlBatchName,Rec);
                             CurrentJnlBatchNameOnAfterVali;
                           END;

                OnLookup=BEGIN
                           CurrPage.SAVERECORD;
                           ReqJnlManagement.LookupName(CurrentJnlBatchName,Rec);
                           CurrPage.UPDATE(FALSE);
                         END;
                          }

    { 1100528204;1;Field  ;
                Lookup=Yes;
                CaptionML=[ENU=Purchaser;
                           SVE=Inkîpare];
                SourceExpr=PurchaserFilter;
                Visible=FALSE;
                OnValidate=BEGIN
                             CurrPage.SAVERECORD;
                             CurrPage.UPDATE(FALSE);
                           END;

                OnLookup=VAR
                           lSalespersonPurchaser@1100528201 : Record 13;
                         BEGIN
                           IF (PurchaserFilter <> '') THEN
                             IF lSalespersonPurchaser.GET(PurchaserFilter) THEN;

                           IF PAGE.RUNMODAL(0,lSalespersonPurchaser) = ACTION::LookupOK THEN
                             PurchaserFilter := lSalespersonPurchaser.Code;

                           CurrPage.SAVERECORD;
                           CurrPage.UPDATE(FALSE);
                         END;
                          }

    { 1   ;1   ;Group     ;
                GroupType=Repeater }

    { 1100525001;2;Field  ;
                Name=Warning;
                CaptionML=[ENU=Warning;
                           SVE=Varning];
                OptionCaptionML=[ENU=" ,Emergency,Exception,Attention";
                                 SVE=" ,Nîdsituation,Undantag,Varning"];
                SourceExpr=Warning;
                Visible=FALSE;
                Editable=FALSE;
                OnDrillDown=BEGIN
                              PlanningTransparency.SetCurrReqLine(Rec);
                              PlanningTransparency.DrillDownUntrackedQty('');
                            END;
                             }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the type of requisition worksheet line you are creating.;
                           NOR=Angir typen bestillingsforslagslinje du vil opprette.;
                           SVE=Anger vilken typ av rekvisitionsfîrslagsrad du skapar.];
                ApplicationArea=#Planning;
                SourceExpr=Type;
                Visible=FALSE;
                OnValidate=BEGIN
                             ReqJnlManagement.GetDescriptionAndRcptName(Rec,Description2,BuyFromVendorName);
                           END;
                            }

    { 4   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the involved entry or record, according to the specified number series.;
                           NOR=Angir nummeret pÜ den aktuelle oppfõringen eller posten, i henhold til den angitte nummerserien.;
                           SVE=Anger numret fîr den berîrda transaktionen eller posten, enligt den angivna nummerserien.];
                ApplicationArea=#Planning;
                SourceExpr="No.";
                OnValidate=BEGIN
                             ReqJnlManagement.GetDescriptionAndRcptName(Rec,Description2,BuyFromVendorName);
                             ShowShortcutDimCode(ShortcutDimCode);
                             GetBaseQuanUnit(BaseQuan, BaseUnit);
                           END;
                            }

    { 1101200002;2;Field  ;
                SourceExpr=Manufacturer;
                Visible=ManufacturerVisible }

    { 1101200000;2;Field  ;
                SourceExpr="Basic Item";
                Visible="Basic ItemVisible";
                OnValidate=BEGIN
                             GetBaseQuanUnit(BaseQuan, BaseUnit);
                           END;

                OnLookup=VAR
                           BasicItemRec@1100485001 : Record 11012316;
                           BasicItemFrm@1100485000 : Page 11012333;
                         BEGIN
                           //**4PS
                           CLEAR(BasicItemFrm);
                           BasicItemFrm.LOOKUPMODE(TRUE);

                           BasicItemFrm.SetSelection(DATABASE::"Requisition Line",
                            "Project No.",Element,"Extension Contract","Service Order No.",
                            0,'','',"Line No.",'','');

                           BasicItemRec.InitLookup(BasicItemRec, "Basic Item", Manufacturer);
                           BasicItemFrm.SETRECORD(BasicItemRec);

                           IF BasicItemFrm.RUNMODAL = ACTION::LookupOK THEN BEGIN
                             BasicItemFrm.GETRECORD(BasicItemRec);
                             Manufacturer := BasicItemRec.Manufacturer;
                             VALIDATE("Basic Item", BasicItemRec."Product Code");
                           END;
                         END;
                          }

    { 1101200006;2;Field  ;
                SourceExpr="Vendor (Trade Item)";
                Visible="Vendor (Trade Item)Visible" }

    { 1101200004;2;Field  ;
                SourceExpr="Trade Item";
                Visible="Trade ItemVisible";
                OnLookup=VAR
                           TradeItemRec@1100485001 : Record 11012317;
                           TradeItemFrm@1100485000 : Page 11012334;
                           lvTempRequisitionLine@1100525002 : TEMPORARY Record 246;
                         BEGIN
                           //**4PS
                           IF "No." <> '' THEN BEGIN
                             lvTempRequisitionLine.COPY(Rec);
                             lvTempRequisitionLine.VALIDATE("No.","No.");
                             g_ItemCode := lvTempRequisitionLine."Trade Item";
                             g_Vendor := lvTempRequisitionLine."Vendor (Trade Item)";
                             COMMIT;
                           END ELSE BEGIN
                             g_ItemCode := '';
                             g_Vendor := '';
                           END;


                           CLEAR(TradeItemFrm);
                           TradeItemFrm.LOOKUPMODE(TRUE);

                           TradeItemFrm.SetSelection(DATABASE::"Requisition Line",
                             "Worksheet Template Name",Element,"Journal Batch Name","Project No.",
                             0,"Service Order No.",'',"Line No.",'','',
                             "Vendor (Trade Item)", "Trade Item", Manufacturer, "Basic Item", g_ItemCode, g_Vendor);

                           TradeItemRec.InitLookup(TradeItemRec, "Basic Item", Manufacturer, "Trade Item", "Vendor (Trade Item)");
                           TradeItemFrm.SETRECORD(TradeItemRec);

                           IF TradeItemFrm.RUNMODAL = ACTION::LookupOK THEN BEGIN
                             TradeItemFrm.GETRECORD(TradeItemRec);
                             Manufacturer := TradeItemRec.Manufacturer;
                             "Basic Item" := TradeItemRec."Product Code";
                             "Vendor (Trade Item)" := TradeItemRec.Vendor;
                             VALIDATE("Trade Item", TradeItemRec."Item Code");
                             CheckVendorRelation(FIELDNO("Vendor (Trade Item)"));
                           END;
                         END;

                OnAssistEdit=BEGIN
                               IF HandleAssistEditTradeItem THEN
                                 CurrPage.UPDATE(TRUE);
                             END;
                              }

    { 60  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies an action to take to rebalance the demand-supply situation.;
                           NOR=Angir en handling som skal utfõres for Ü gjenopprette balansen i behovs-/forsyningssituasjonen.;
                           SVE=Anger en ÜtgÑrd som ska vidtas fîr att balansera om efterfrÜgan och tillgÜng.];
                ApplicationArea=#Planning;
                SourceExpr="Action Message";
                Visible=FALSE;
                OnValidate=BEGIN
                             ActionMessageOnAfterValidate;
                           END;
                            }

    { 65  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether to accept the action message proposed for the line.;
                           NOR=Angir om du vil godta den foreslÜtte handlingsmeldingen for linjen eller ikke.;
                           SVE=Anger om ÜtgÑrdsmeddelandet som fîreslÜs fîr raden ska accepteras eller inte.];
                ApplicationArea=#Planning;
                SourceExpr="Accept Action Message";
                Visible=FALSE }

    { 92  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code of the location that items are transferred from.;
                           NOR=Angir koden for lokasjonen som varer overfõres fra.;
                           SVE=Anger koden fîr lagerstÑllet som artiklarna îverfîrs frÜn.];
                ApplicationArea=#Location;
                SourceExpr="Transfer-from Code";
                Visible=FALSE }

    { 44  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a code for an inventory location where the items that are being ordered will be registered.;
                           NOR=Angir en kode for lagerlokasjonen som de bestilte varene skal registreres pÜ.;
                           SVE=Anger en kod fîr ett lagerstÑlle dÑr artiklarna som bestÑlls registreras.];
                ApplicationArea=#Location;
                SourceExpr="Location Code" }

    { 1100526200;2;Field  ;
                SourceExpr="Bin Code";
                Visible=FALSE }

    { 1100485005;2;Field  ;
                SourceExpr="Shelf No. (Item)";
                Visible=FALSE;
                HideValue="Shelf No. (Item)HideValue" }

    { 1100528400;2;Field  ;
                SourceExpr="Shelf No. (SKU)";
                Visible=FALSE;
                HideValue="Shelf No. (SKU)HideValue" }

    { 62  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the variant of the item on the line.;
                           NOR=Angir varianten for varen pÜ linjen.;
                           SVE=Anger varianten av artikeln pÜ raden.];
                ApplicationArea=#Planning;
                SourceExpr="Variant Code";
                Visible=FALSE }

    { 6   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies text that describes the entry.;
                           NOR=Angir en tekst som beskriver posten.;
                           SVE=Anger text som beskriver transaktionen.];
                ApplicationArea=#Planning;
                SourceExpr=Description }

    { 36  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies additional text describing the entry, or a remark about the requisition worksheet line.;
                           NOR=Angir mer tekst som beskriver posten, eller en merknad om bestillingsforslagslinjen.;
                           SVE=Anger ytterligare text som beskriver transaktionen eller en kommentar om rekvisitionsfîrslagsraden.];
                ApplicationArea=#Planning;
                SourceExpr="Description 2";
                Visible=FALSE }

    { 1210190012;2;Field  ;
                CaptionML=[ENU=Inventory;
                           SVE=Lager];
                SourceExpr=InventoryQuan;
                Editable=FALSE;
                OnDrillDown=BEGIN
                              DrillDownInventory(ShowLocations::All);
                            END;
                             }

    { 1100528201;2;Field  ;
                CaptionML=[ENU=Qty. on Purch. Order (Inv.);
                           SVE=Antal pÜ inkîp Order (fakt.)];
                DecimalPlaces=2:2;
                SourceExpr=Item."Qty. on Purch. Order (Inv.)";
                Editable=FALSE;
                OnDrillDown=VAR
                              PurchaseLine@1100528200 : Record 39;
                              PurchaseLines@1100528201 : Page 518;
                            BEGIN
                              //**4PS
                              IF (Type = Type::Item) AND ("No." <> '') THEN BEGIN
                                PurchaseLine.SETRANGE("Document Type", PurchaseLine."Document Type"::Order);
                                PurchaseLine.SETRANGE(Type, PurchaseLine.Type::Item);
                                PurchaseLine.SETRANGE("Item No.", "No.");
                                PurchaseLines.SETTABLEVIEW(PurchaseLine);
                                PurchaseLines.RUNMODAL;
                              END;
                            END;
                             }

    { 1210190014;2;Field  ;
                CaptionML=[ENU=Location Inventory;
                           SVE=LagerstÑlle];
                SourceExpr=LocInventoryQuan;
                Editable=FALSE;
                OnDrillDown=BEGIN
                              DrillDownInventory(ShowLocations::Location);
                            END;
                             }

    { 1210190009;2;Field  ;
                SourceExpr="Text Block";
                Visible=FALSE }

    { 1100525008;2;Field  ;
                SourceExpr="Price Agreement";
                Visible=FALSE }

    { 1100485000;2;Field  ;
                SourceExpr="Additional Cost (Service)";
                Visible=FALSE }

    { 69  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the quantity stated on the production or purchase order, when an action message proposes to change the quantity on an order.;
                           NOR=NÜr en handlingsmelding foreslÜr Ü endre antallet i en ordre, angir dette feltet antallet i den eksisterende produksjonsordren eller bestillingen.;
                           SVE=Anger antalet som angavs pÜ produktions- eller inkîpsordern nÑr ett ÜtgÑrdsmeddelande fîreslÜr att antalet pÜ en order ska Ñndras.];
                ApplicationArea=#Planning;
                SourceExpr="Original Quantity";
                Visible=FALSE }

    { 8   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of units of the item or resource specified on the line.;
                           NOR=Angir hvor mange enheter av varen eller ressursen som er angitt pÜ linjen.;
                           SVE=Anger antalet artiklar eller resurser som anges pÜ raden.];
                ApplicationArea=#Planning;
                SourceExpr=Quantity;
                OnValidate=BEGIN
                             CurrPage.UPDATE;
                           END;
                            }

    { 66  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how each unit of the item or resource is measured, such as in pieces or hours. By default, the value in the Base Unit of Measure field on the item or resource card is inserted.;
                           NOR=Angir hvordan hver enhet av varen eller ressursen mÜles, for eksempel i stykker eller timer. Verdien i feltet Lagerenhet pÜ vare- eller ressurskortet settes inn som standard.;
                           SVE=Anger hur varje enhet av artikeln eller resursen mÑts, till exempel i stycken eller timmar. Som standard infogas vÑrdet i fÑltet Basenhet pÜ artikel- eller resurskortet.];
                ApplicationArea=#Planning;
                SourceExpr="Unit of Measure Code" }

    { 1100525020;2;Field  ;
                CaptionML=[ENU=Quantity (Base);
                           SVE=Antal (bas)];
                SourceExpr=BaseQuan;
                Visible=FALSE;
                Editable=FALSE }

    { 1100525022;2;Field  ;
                CaptionML=[ENU=Base Unit of Measure;
                           SVE=Basenhet];
                SourceExpr=BaseUnit;
                Visible=FALSE;
                Editable=FALSE }

    { 16  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the cost of one unit of the selected item or resource.;
                           NOR=Angir den kostnaden for Çn enhet av den valgte varen eller ressursen.;
                           SVE=Anger styckkostnaden fîr den valda artikeln eller resursen.];
                ApplicationArea=#Planning;
                SourceExpr="Direct Unit Cost";
                Visible=FALSE;
                OnValidate=BEGIN
                             CurrPage.UPDATE;  //**4PS
                           END;
                            }

    { 27  ;2   ;Field     ;
                AssistEdit=Yes;
                ToolTipML=[ENU=Specifies the currency code for the requisition lines.;
                           NOR=Angir valutakoden for forslagslinjene.;
                           SVE=Anger valutakoden fîr rekvisitionsraderna.];
                ApplicationArea=#Planning;
                SourceExpr="Currency Code";
                Visible=FALSE;
                OnAssistEdit=BEGIN
                               ChangeExchangeRate.SetParameter("Currency Code","Currency Factor",WORKDATE);
                               IF ChangeExchangeRate.RUNMODAL = ACTION::OK THEN
                                 VALIDATE("Currency Factor",ChangeExchangeRate.GetParameter);

                               CLEAR(ChangeExchangeRate);
                             END;
                              }

    { 1100525006;2;Field  ;
                SourceExpr="Unit Price (LCY)";
                Visible=FALSE;
                OnValidate=BEGIN
                             CurrPage.UPDATE;  //**4PS
                           END;
                            }

    { 1100525012;2;Field  ;
                SourceExpr="Discount % (Item)";
                Visible=FALSE;
                OnValidate=BEGIN
                             CurrPage.UPDATE;  //**4PS
                           END;
                            }

    { 1100525002;2;Field  ;
                SourceExpr="Unit Cost (LCY)";
                Visible=FALSE;
                OnValidate=BEGIN
                             CurrPage.UPDATE;  //**4PS
                           END;
                            }

    { 1100525010;2;Field  ;
                SourceExpr="Cost Amount";
                Visible=FALSE }

    { 46  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the discount percentage that is granted for the item on the line.;
                           NOR=Angir rabattprosenten som blir gitt for varen pÜ linjen.;
                           SVE=Anger rabattprocentsatsen som beviljas fîr artikeln pÜ raden.];
                ApplicationArea=#Planning;
                SourceExpr="Line Discount %";
                Visible=FALSE }

    { 73  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the due date stated on the production or purchase order, when an action message proposes to reschedule an order.;
                           NOR=NÜr en handlingsmelding foreslÜr Ü tidsplanlegge en ordre pÜ nytt, angis forfallsdatoen pÜ produksjonsordren eller bestillingen.;
                           SVE=Anger fîrfallodatumet som angetts pÜ produktions- eller inkîpsordern nÑr ett ÜtgÑrdsmeddelande fîreslÜr att en order ska omplaneras.];
                ApplicationArea=#Planning;
                SourceExpr="Original Due Date";
                Visible=FALSE }

    { 14  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date when you can expect to receive the items.;
                           NOR=Angir datoen da du kan forvente Ü motta varene.;
                           SVE=Anger det datum dÜ du kan fîrvÑnta dig att ta emot artiklarna.];
                ApplicationArea=#Planning;
                SourceExpr="Due Date" }

    { 48  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the date when the related order was created.;
                           NOR=Angir datoen da den relaterte ordren ble opprettet.;
                           SVE=Anger datumet nÑr den relaterade ordern skapades.];
                ApplicationArea=#Planning;
                SourceExpr="Order Date";
                Visible=FALSE }

    { 10  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the vendor who will ship the items in the purchase order.;
                           NOR=Angir nummeret pÜ leverandõren som skal levere varene som er angitt i bestillingen.;
                           SVE=Anger numret fîr leverantîren som ska leverera artiklarna pÜ inkîpsordern.];
                ApplicationArea=#Planning;
                SourceExpr="Vendor No.";
                OnValidate=BEGIN
                             ReqJnlManagement.GetDescriptionAndRcptName(Rec,Description2,BuyFromVendorName);
                             ShowShortcutDimCode(ShortcutDimCode);
                           END;
                            }

    { 1100528202;2;Field  ;
                CaptionML=[ENU=Purchaser;
                           SVE=Inkîpare];
                SourceExpr=SalesPersonPurchaser.Code;
                Visible=FALSE;
                Editable=FALSE }

    { 1100528203;2;Field  ;
                CaptionML=[ENU=Name Purchaser;
                           SVE=Namn pÜ inkîpare];
                SourceExpr=SalesPersonPurchaser.Name;
                Visible=FALSE;
                Editable=FALSE }

    { 12  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number that the vendor uses for this item.;
                           NOR=Angir nummeret som leverandõren bruker for varen.;
                           SVE=Anger numret som leverantîren anvÑnder fîr denna artikel.];
                ApplicationArea=#Planning;
                SourceExpr="Vendor Item No." }

    { 54  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the order address of the related vendor.;
                           NOR=Angir bestillingsadressen for den relaterte leverandõren.;
                           SVE=Anger den relaterade leverantîrens orderadress.];
                ApplicationArea=#Planning;
                SourceExpr="Order Address Code";
                Visible=FALSE }

    { 56  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the customer.;
                           NOR=Angir nummeret for kunden.;
                           SVE=Anger kundens nummer.];
                ApplicationArea=#Planning;
                SourceExpr="Sell-to Customer No.";
                Visible=FALSE }

    { 1101200010;2;Field  ;
                SourceExpr="Project No.";
                Visible=FALSE }

    { 1101200012;2;Field  ;
                SourceExpr=Element;
                Visible=FALSE }

    { 1210190000;2;Field  ;
                SourceExpr="Extension Contract";
                Visible=FALSE }

    { 1210190002;2;Field  ;
                SourceExpr="Service Order No.";
                Visible=FALSE }

    { 1101200014;2;Field  ;
                SourceExpr=Deliver }

    { 1101200016;2;Field  ;
                SourceExpr="Ship To Location" }

    { 58  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a code for an alternate shipment address if you want to ship to another address than the one that has been entered automatically. This field is also used in case of drop shipment.;
                           NOR=Angir en kode for en alternativ leveringsadresse hvis du vil levere til en annen adresse enn den som er angitt automatisk. Dette feltet brukes ogsÜ ved direkte levering.;
                           SVE=Anger en kod fîr en alternativ leveransadress om du vill leverera till en annan adress Ñn den som har angetts automatiskt. Det hÑr fÑltet anvÑnds ocksÜ vid direktutleverans.];
                ApplicationArea=#Planning;
                SourceExpr="Ship-to Code";
                Visible=FALSE }

    { 1100525000;2;Field  ;
                SourceExpr="Requested Receipt Date";
                Visible=FALSE }

    { 70  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the related production order.;
                           NOR=Angir nummeret for den relaterte produksjonsordren.;
                           SVE=Anger den relaterade produktionsorderns nummer.];
                ApplicationArea=#Planning;
                SourceExpr="Prod. Order No.";
                Visible=FALSE }

    { 50  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the ID of the user who is ordering the items on the line.;
                           NOR=Angir ID-en for brukeren som bestiller varene pÜ linjen.;
                           SVE=Anger ID:t fîr anvÑndaren som bestÑller artiklarna pÜ raden.];
                ApplicationArea=#Planning;
                SourceExpr="Requester ID";
                Visible=FALSE }

    { 18  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether the items on the line have been approved for purchase.;
                           NOR=Angir om varene pÜ linjen er godkjent for bestilling.;
                           SVE=Anger om artiklarna pÜ raden har godkÑnts fîr inkîp.];
                ApplicationArea=#Planning;
                SourceExpr=Confirmed;
                Visible=FALSE }

    { 40  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 1, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           NOR=Angir koden til Snarveisdimensjon 1, som er Çn av to globale dimensjonskoder som du har definert i vinduet Finansoppsett.;
                           SVE=Anger koden fîr GenvÑg dimension 1, som Ñr en av tvÜ globala dimensionskoder som du stÑller in i fînstret RedovisningsinstÑllningar.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 1 Code";
                Visible=FALSE;
                OnValidate=BEGIN
                             //**4PS Generated Code. Do Not Change.sn03
                             DPA_ChkDepartmentCodeAllowed(DPA_IsHardFilter);
                             //**4PS Generated Code.en03
                           END;
                            }

    { 42  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 2, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           NOR=Angir koden til Snarveisdimensjon 2, som er Çn av to globale dimensjonskoder som du har definert i vinduet Finansoppsett.;
                           SVE=Anger koden fîr GenvÑg dimension 2, som Ñr en av tvÜ globala dimensionskoder som du stÑller in i fînstret RedovisningsinstÑllningar.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 2 Code";
                LookupPageID=Cost Object List }

    { 1100525036;2;Field  ;
                SourceExpr="Cost Component";
                Visible=FALSE }

    { 300 ;2   ;Field     ;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[3];
                CaptionClass='1,2,3';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(3),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=FALSE;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(3,ShortcutDimCode[3]);
                           END;
                            }

    { 302 ;2   ;Field     ;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[4];
                CaptionClass='1,2,4';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(4),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=FALSE;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(4,ShortcutDimCode[4]);
                           END;
                            }

    { 304 ;2   ;Field     ;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[5];
                CaptionClass='1,2,5';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(5),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=FALSE;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(5,ShortcutDimCode[5]);
                           END;
                            }

    { 306 ;2   ;Field     ;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[6];
                CaptionClass='1,2,6';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(6),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=FALSE;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(6,ShortcutDimCode[6]);
                           END;
                            }

    { 308 ;2   ;Field     ;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[7];
                CaptionClass='1,2,7';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(7),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=FALSE;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(7,ShortcutDimCode[7]);
                           END;
                            }

    { 310 ;2   ;Field     ;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[8];
                CaptionClass='1,2,8';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(8),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=FALSE;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(8,ShortcutDimCode[8]);
                           END;
                            }

    { 79  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the relevant production or purchase order.;
                           NOR=Angir nummeret for den aktuelle produksjonsordren eller bestillingen.;
                           SVE=Anger numret pÜ relevant produktions- eller inkîpsorder.];
                ApplicationArea=#Planning;
                SourceExpr="Ref. Order No.";
                Visible=FALSE;
                Editable="Ref. Order No.Editable" }

    { 85  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether the order is a purchase order, a production order, or a transfer order.;
                           NOR=Angir om ordren er en bestilling, en produksjonsordre eller en overfõringsordre.;
                           SVE=Anger om ordern Ñr en inkîps-, produktions- eller îverfîringsorder.];
                ApplicationArea=#Planning;
                SourceExpr="Ref. Order Type";
                Visible=FALSE }

    { 89  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies which kind of order to use to create replenishment orders and order proposals.;
                           NOR=Angir hvilken type ordre du vil bruke til Ü opprette etterfyllingsordrer og ordreforslag.;
                           SVE=Anger vilken typ av order som ska anvÑndas fîr att skapa Üteranskaffningsorder och orderfîrslag.];
                ApplicationArea=#Planning;
                SourceExpr="Replenishment System";
                Visible=FALSE }

    { 87  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the purchase or production order line.;
                           NOR=Angir nummeret for bestillings- eller produksjonsordrelinjen.;
                           SVE=Anger numret pÜ inkîps- eller produktionsorderraden.];
                ApplicationArea=#Planning;
                SourceExpr="Ref. Line No.";
                Visible=FALSE }

    { 94  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether the supply represented by this line is considered by the planning system when calculating action messages.;
                           NOR=Angir om forsyningen, som representeres denne linjen, vurderes av planleggingssystemet ved beregning av handlingsmeldinger.;
                           SVE=Anger om leveransen som representeras av denna rad tas i beaktande av planeringssystemet nÑr ÜtgÑrdsmeddelanden berÑknas.];
                ApplicationArea=#Planning;
                SourceExpr="Planning Flexibility";
                Visible=FALSE }

    { 13  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if a blanket purchase order exists for the item on the requisition line.;
                           NOR=Angir om det finnes en rammebestilling for varen pÜ bestillingsforslagslinjen.;
                           SVE=Anger om det finns en inkîpsavropsorder fîr artikeln pÜ rekvisitionsraden.];
                ApplicationArea=#Planning;
                BlankZero=Yes;
                SourceExpr="Blanket Purch. Order Exists";
                Visible=FALSE }

    { 1100485007;2;Field  ;
                SourceExpr="Order Multiple";
                Visible=FALSE;
                HideValue="Order MultipleHideValue" }

    { 1100525004;2;Field  ;
                SourceExpr="Use Blanket Order";
                Visible=FALSE;
                OnValidate=BEGIN
                             UseBlanketOrderOnAfterValidate;
                           END;
                            }

    { 1100525016;2;Field  ;
                SourceExpr="Contract Type";
                Visible=FALSE }

    { 1100525018;2;Field  ;
                CaptionML=[ENU=Blanket Order;
                           SVE=Avropsorder];
                SourceExpr=StrategicPurchMgt.NumberOfBlOrdersReqLine(Rec);
                Visible=FALSE;
                OnLookup=BEGIN
                           StrategicPurchMgt.LookupBlOrderReqLine(Rec);
                         END;
                          }

    { 1100525026;2;Field  ;
                CaptionML=[ENU=Blanket Order Line;
                           SVE=Avropsorderrad];
                SourceExpr=StrategicPurchMgt.NumberOfBlOrderLinesReqLine(Rec);
                Visible=FALSE;
                OnLookup=BEGIN
                           StrategicPurchMgt.LookupBlOrderLinesReqLine(Rec);
                         END;
                          }

    { 1100525014;2;Field  ;
                CaptionML=[ENU=Quantity in Blanket Orders;
                           SVE=Antal i avropsorder];
                SourceExpr=StrategicPurchMgt.QtyInBlanketOrdersReqLine(Rec);
                Visible=FALSE;
                OnLookup=BEGIN
                           StrategicPurchMgt.LookupBlOrderLinesReqLine(Rec);
                         END;
                          }

    { 1100525003;2;Field  ;
                SourceExpr="Sales Order No.";
                Visible=FALSE }

    { 1100525005;2;Field  ;
                SourceExpr="Sales Order Line No.";
                Visible=FALSE }

    { 1100525024;2;Field  ;
                SourceExpr="Comments for Logistics";
                Visible=FALSE }

    { 1100525028;2;Field  ;
                SourceExpr="Created by";
                Visible=FALSE }

    { 1100525032;2;Field  ;
                SourceExpr="Modified by";
                Visible=FALSE }

    { 1100528205;2;Field  ;
                Name=ItemIsBlocked;
                CaptionML=ENU=Item Blocked;
                SourceExpr=ItemIsblocked;
                Editable=FALSE }

    { 20  ;1   ;Group     ;
                Visible=FALSE;
                GroupType=Group }

    { 1901776201;2;Group  ;
                Visible=FALSE;
                GroupType=FixedLayout }

    { 1902759801;3;Group  ;
                CaptionML=[ENU=Description;
                           NOR=Beskrivelse;
                           SVE=Beskrivning];
                Visible=FALSE;
                GroupType=Group }

    { 21  ;4   ;Field     ;
                ToolTipML=[ENU=Specifies an additional part of the worksheet description.;
                           NOR=Angir en tilleggsdel av forslagsbeskrivelsen.;
                           SVE=Anger en ytterligare beskrivning av fîrslaget.];
                ApplicationArea=#Planning;
                SourceExpr=Description2;
                Visible=FALSE;
                Editable=FALSE;
                ShowCaption=No }

    { 1901652601;3;Group  ;
                CaptionML=[ENU=Buy-from Vendor Name;
                           NOR=Kjõp fra-leverandõrnavn;
                           SVE=Inkîpsnamn];
                Visible=FALSE;
                GroupType=Group }

    { 23  ;4   ;Field     ;
                CaptionML=[ENU=Buy-from Vendor Name;
                           NOR=Kjõp fra-leverandõrnavn;
                           SVE=Inkîpsnamn];
                ToolTipML=[ENU=Specifies the vendor according to the values in the Document No. and Document Type fields.;
                           NOR=Angir leverandõren i henhold til verdiene i feltene Dokumentnr. og Dokumenttype.;
                           SVE=Anger leverantîren enligt vÑrdena i fÑlten Dokumentnr och Dokumenttyp.];
                ApplicationArea=#Planning;
                SourceExpr=BuyFromVendorName;
                Visible=FALSE;
                Editable=FALSE }

    { 1900000007;;Container;
                ContainerType=FactBoxArea }

    { 1903326807;1;Part   ;
                ApplicationArea=#Planning;
                SubPageLink=No.=FIELD(No.);
                PagePartID=Page9090;
                PartType=Page }

    { 1100528200;1;Part   ;
                SubPageLink=Worksheet Template Name=FIELD(Worksheet Template Name),
                            Journal Batch Name=FIELD(Journal Batch Name),
                            Line No.=FIELD(Line No.);
                PagePartID=Page11126622;
                PartType=Page }

  }
  CODE
  {
    VAR
      SalesHeader@1000 : Record 36;
      GetSalesOrder@1004 : Report 698;
      CalculatePlan@1003 : Report 699;
      ReqJnlManagement@1005 : Codeunit 330;
      ItemAvailFormsMgt@1011 : Codeunit 353;
      ChangeExchangeRate@1002 : Page 511;
      SalesOrder@1001 : Page 42;
      CurrentJnlBatchName@1006 : Code[10];
      Description2@1007 : Text[100];
      BuyFromVendorName@1008 : Text[100];
      ShortcutDimCode@1009 : ARRAY [8] OF Code[20];
      OpenedFromBatch@1010 : Boolean;
      Text11012001@1210190001 : TextConst 'ENU=Before editing text enter the line first;SVE=VÑlj rad innan du redigerar text.';
      Text11012002@1100525007 : TextConst 'ENU=Only Purchase Order Lines with a filled Job Number or Service Order will be showed;SVE=Endast inkîpsorderrader med ifyllt jobbnummer eller ifylld serviceorder visas';
      Text11012999@1100528900 : TextConst 'ENU=Process available lines (%1) in filter instead of marked line ?';
      ItemSetup@1100525003 : Record 11012300;
      RequisitionLineRec@1100485000 : Record 246;
      PrintDoc@1100485001 : Codeunit 229;
      g_ItemCode@1100525002 : Code[20];
      g_Vendor@1100525001 : Code[20];
      StrategicPurchMgt@1100525004 : Codeunit 11020211;
      BaseQuan@1100525006 : Decimal;
      BaseUnit@1100525005 : Code[20];
      InventoryQuan@1210190000 : Decimal;
      LocInventoryQuan@1210190004 : Decimal;
      ShowLocations@1210190003 : 'All,PrefLocations,Location';
      DPA_IsHardFilter@1100000999 : Boolean;
      "Ref. Order No.Editable"@19038314 : Boolean INDATASET;
      "Basic ItemVisible"@19042756 : Boolean INDATASET;
      ManufacturerVisible@19015155 : Boolean INDATASET;
      "Trade ItemVisible"@19042429 : Boolean INDATASET;
      "Vendor (Trade Item)Visible"@19043796 : Boolean INDATASET;
      "Shelf No. (Item)HideValue"@19064238 : Boolean INDATASET;
      "Shelf No. (SKU)HideValue"@19046372 : Boolean INDATASET;
      "Order MultipleHideValue"@19004126 : Boolean INDATASET;
      PlanningTransparency@1100525009 : Codeunit 99000856;
      Warning@1100525008 : ',Emergency,Exception,Attention';
      Item@1100528200 : Record 27;
      SalesPersonPurchaser@1100528201 : Record 13;
      PurchaserFilter@1100528202 : Text[50];
      ItemIsblocked@1100528203 : Boolean;

    LOCAL PROCEDURE CurrentJnlBatchNameOnAfterVali@6212();
    BEGIN
      CurrPage.SAVERECORD;
      ReqJnlManagement.SetName(CurrentJnlBatchName,Rec);
      CurrPage.UPDATE(FALSE);
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeOpenReqWorksheet@1(VAR CUrrentJnlBatchName@1000 : Code[10]);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeTemplateSelection@2(VAR RequisitionLine@1000 : Record 246;CurrentJnlBatchName@1001 : Code[10]);
    BEGIN
    END;

    PROCEDURE EditText@1210190001();
    VAR
      TextFrm@1210190001 : Page 11012120;
    BEGIN
      //**4PS
      IF "Line No." = 0 THEN
        ERROR(Text11012001);

      TextFrm.SetSelection(DATABASE::"Requisition Line","Worksheet Template Name", "Journal Batch Name",
        '','','','',"Line No.", 0);

      TextFrm.RUNMODAL;
      CLEAR(TextFrm);
    END;

    PROCEDURE UpdateVendor@1100485000();
    VAR
      RequisitionLine@1100525000 : Record 246;
      ModifyItemVendor@1100485000 : Page 11020420;
    BEGIN
      //**4PS
      RequisitionLine.COPY(Rec);
      CheckMarkedLines(RequisitionLine);  //C034187
      ModifyItemVendor.SetRequisitionLineRec(RequisitionLine);
      ModifyItemVendor.RUNMODAL;
      CurrPage.UPDATE(TRUE);
    END;

    PROCEDURE InventoryReservation@4(lItem@11012000 : Code[20]);
    VAR
      ItemRec@1210190000 : Record 27;
    BEGIN
      //**4PS
      LocInventoryQuan := 0;
      InventoryQuan := 0;

      IF ItemRec.GET(lItem) THEN BEGIN
        IF "Project No." <> '' THEN
          ItemRec.SETRANGE("Project Filter","Project No.");
        ItemRec.CALCFIELDS(Inventory, "Qty. on Item Journal Project", "Qty. on Item Journal Service");
        LocInventoryQuan := GetInventory("Location Code",ItemRec,FALSE);
        InventoryQuan := GetInventory('',ItemRec,TRUE);
      END;
    END;

    PROCEDURE DrillDownInventory@1100525002(ShowLocations@1100525003 : 'All,PrefLocations,Location');
    VAR
      ItemAvailByLoc@1210190000 : Page 492;
      PrefLocationRec@1210190002 : Record 11020353;
      LocationRec@1210190001 : Record 14;
      ItemRec@1210190003 : Record 27;
    BEGIN
      //**4PS
      TESTFIELD("No.");
      CASE ShowLocations OF
        ShowLocations::PrefLocations:
          BEGIN
            IF "Project No." <> '' THEN BEGIN
              PrefLocationRec.SETRANGE(Type,PrefLocationRec.Type::Job);
              PrefLocationRec.SETRANGE("No.","Project No.");
            END;
            IF "Service Order No." <> '' THEN BEGIN
              PrefLocationRec.SETRANGE(Type,PrefLocationRec.Type::"Service Order");
              PrefLocationRec.SETRANGE("No.","Service Order No.");
            END;
            IF PrefLocationRec.FINDSET THEN
              REPEAT
                IF LocationRec.GET(PrefLocationRec."Location Code") THEN
                  LocationRec.MARK(TRUE);
              UNTIL PrefLocationRec.NEXT = 0;
            LocationRec.MARKEDONLY(TRUE);
          END;
        ShowLocations::Location:
          BEGIN
            LocationRec.GET("Location Code");
            LocationRec.SETRECFILTER;
          END;
      END;
      ItemAvailByLoc.SetLocations(LocationRec);
      ItemRec.GET("No.");
      IF "Project No." <> '' THEN
        ItemRec.SETRANGE("Project Filter","Project No.");
      ItemRec.SETRANGE("Date Filter","Due Date");
      ItemAvailByLoc.SETRECORD(ItemRec);
      ItemAvailByLoc.SETTABLEVIEW(ItemRec);
      ItemAvailByLoc.RUN;
      ItemRec.SETRANGE("Date Filter");
    END;

    LOCAL PROCEDURE ActionMessageOnAfterValidate@19060929();
    BEGIN
      "Ref. Order No.Editable" := ("Use Blanket Order" AND ("Action Message" = "Action Message"::New)); //**4PS.n
    END;

    LOCAL PROCEDURE UseBlanketOrderOnAfterValidate@19063887();
    BEGIN
      "Ref. Order No.Editable" := ("Use Blanket Order" AND ("Action Message" = "Action Message"::New)); //**4PS.n
    END;

    LOCAL PROCEDURE PlanningWarningLevel1OnFormat@19030151();
    BEGIN
      //**4PS
      PlanningWarningLevel;
    END;

    PROCEDURE PlanningWarningLevel@40() : Integer;
    VAR
      Transparency@1001 : Codeunit 99000856;
    BEGIN
      //**4PS
      Warning := Transparency.ReqLineWarningLevel(Rec);
    END;

    PROCEDURE GetItemInfo@1100525001();
    BEGIN
      //**4PS
      Item.INIT;
      IF Type = Type::Item THEN BEGIN
        IF Item.GET("No.") THEN BEGIN
          Item.CALCFIELDS("Qty. on Purch. Order (Inv.)");
        END;
      END;
    END;

    PROCEDURE GetPurchaser@1100525000(lRequisitionLine@1100525000 : Record 246) Purchaser : Code[20];
    VAR
      Vendor@1100525001 : Record 23;
    BEGIN
      //**4PS
      SalesPersonPurchaser.INIT;
      SalesPersonPurchaser.Code := '';
      IF lRequisitionLine."Vendor No." <> '' THEN BEGIN
        IF Vendor.GET(lRequisitionLine."Vendor No.") THEN BEGIN
          IF SalesPersonPurchaser.GET(Vendor."Purchaser Code") THEN BEGIN
            Purchaser := SalesPersonPurchaser.Code;
          END
        END
      END;
    END;

    PROCEDURE FindPosition@1100525026(Which@1100525000 : Text[30]) : Boolean;
    VAR
      lRequisitionLine@1100525001 : Record 246;
      i@1100525002 : Integer;
    BEGIN
      //**4PS
      lRequisitionLine.COPY(Rec);
      IF Which = '' THEN Which := '=';
      FOR i := 1 TO STRLEN(Which) DO
      CASE Which[i] OF
        '-': BEGIN
          IF Rec.FIND('-') THEN REPEAT
            IF ShowThisRecord(Rec) THEN EXIT(TRUE);
          UNTIL Rec.NEXT = 0;
        END;
        '+': BEGIN
          IF Rec.FIND('+') THEN REPEAT
            IF ShowThisRecord(Rec) THEN EXIT(TRUE);
          UNTIL Rec.NEXT(-1) = 0;
        END;
        '=': BEGIN
          IF Rec.FIND THEN
            IF ShowThisRecord(Rec) THEN EXIT(TRUE);
        END;
        '>': BEGIN
          IF NextPosition(Rec, 1) <> 0 THEN
            EXIT(TRUE);
        END;
        '<': BEGIN
          IF NextPosition(Rec, -1) <> 0 THEN
            EXIT(TRUE);
        END;
      END;
      Rec.COPY(lRequisitionLine);
      EXIT(FALSE);
    END;

    PROCEDURE NextPosition@1100525034(VAR lRequisitionLine@1100525000 : Record 246;Steps@1100525001 : Integer) StepsCount : Integer;
    VAR
      RecRef2@1100525002 : Record 246;
      RecRef3@1100525003 : Record 246;
      Direction@1100525004 : Integer;
    BEGIN
      //**4PS
      IF Steps = 0 THEN EXIT;
      IF Steps > 0 THEN
        Direction := 1
      ELSE
        Direction := -1;
      RecRef2.COPY(lRequisitionLine);
      RecRef3.COPY(lRequisitionLine);
      REPEAT
        IF lRequisitionLine.NEXT(Direction) = 0 THEN BEGIN
          lRequisitionLine.COPY(RecRef3);
          EXIT;
        END;
        IF ShowThisRecord(lRequisitionLine) THEN BEGIN
          RecRef3.COPY(lRequisitionLine);
          StepsCount += Direction;
        END;
      UNTIL ABS(StepsCount) >= ABS(Steps);
      IF StepsCount = 0 THEN
        lRequisitionLine.COPY(RecRef2)
      ELSE
        lRequisitionLine.COPY(RecRef3);
    END;

    PROCEDURE ShowThisRecord@1100525032(lRequisitionLine@1100525001 : Record 246) : Boolean;
    BEGIN
      //**4PS
      IF PurchaserFilter <> '' THEN
        IF NOT CheckPurchaserFilter(lRequisitionLine) THEN
         EXIT(FALSE);

      EXIT(TRUE);
    END;

    PROCEDURE CheckPurchaserFilter@1100525038(lRequisitionLine@1100525001 : Record 246) : Boolean;
    BEGIN
      //**4PS
      IF GetPurchaser(lRequisitionLine) = PurchaserFilter  THEN
        EXIT(TRUE)
      ELSE
        EXIT(FALSE);
    END;

    LOCAL PROCEDURE CheckMarkedLines@1100529400(VAR RequisitionLine@1100529400 : Record 246);
    VAR
      RequisitionLine2@1100528900 : Record 246;
      NumLines@1100528901 : Integer;
    BEGIN
      //**4PS
      //C034187
      CurrPage.SETSELECTIONFILTER(RequisitionLine);
      RequisitionLine.SETFILTER("Line No.", '<>%1', "Line No.");  //check if more then 1 line marked
      RequisitionLine.MARKEDONLY(TRUE);
      IF NOT RequisitionLine.FINDFIRST THEN BEGIN
        //db, 28-11-16: use predefined filter on page, may be extended by user with filter on other tablefields
        //C033866.sn
        RequisitionLine2.COPY(Rec);
        NumLines := RequisitionLine2.COUNT;
        IF NumLines > 1 THEN BEGIN
          IF CONFIRM(Text11012999, TRUE, NumLines) THEN BEGIN
            RequisitionLine.COPY(Rec);
            RequisitionLine.SETRANGE("Worksheet Template Name", "Worksheet Template Name");
            RequisitionLine.SETRANGE("Journal Batch Name", "Journal Batch Name");
          END;
        END;
        //C033866.en
      END;
      RequisitionLine.SETRANGE("Line No.");
    END;

    LOCAL PROCEDURE CheckHideValues@1100528902();
    BEGIN
      //**4PS
      "Order MultipleHideValue" := FALSE;
      "Shelf No. (SKU)HideValue" := FALSE;
      "Shelf No. (Item)HideValue" := FALSE;
      IF Type <> Type::Item THEN BEGIN
        "Shelf No. (Item)HideValue" := TRUE;
        "Shelf No. (SKU)HideValue" := TRUE;
        "Order MultipleHideValue" := TRUE;
      END;
    END;

    BEGIN
    {
      4PS HBK 15-04-2010 Ref. Order No. Condition editable. Changed:
        Ref. Order No. - OnBeforeInput
        Use Blanket Order - OnAfterValidate
        Action Message - OnAfterValidate
        Form - OnAfterGetCurrRecord
      4PS, 30-08-10, Form 11012114 is a copy of this form. Keep this in mind when making changes here.
    }
    END.
  }
}

