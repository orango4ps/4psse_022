OBJECT Table 83 Item Journal Line
{
  OBJECT-PROPERTIES
  {
    Date=;
    Time=;
    Version List=NAVW114.05,4PS14.00,4PSSE;
  }
  PROPERTIES
  {
    OnInsert=BEGIN
               LOCKTABLE;
               ItemJnlTemplate.GET("Journal Template Name");
               ItemJnlBatch.GET("Journal Template Name","Journal Batch Name");

               ValidateShortcutDimCode(1,"Shortcut Dimension 1 Code");
               ValidateShortcutDimCode(2,"Shortcut Dimension 2 Code");
               ValidateNewShortcutDimCode(1,"New Shortcut Dimension 1 Code");
               ValidateNewShortcutDimCode(2,"New Shortcut Dimension 2 Code");

               CheckPlanningAssignment;
               //**4PS.sn
               "Quantity (Produced)" := 0;
               "Quantity (Released)" := 0;
               "Quantity to Post" := CalcDefaultQuantityToPost;
               VALIDATE("Quantity (Reserved)");
               "Related Document (Parent)" := '';
               "Related Document (Child)" := '';
               UpdateCostControlStatus(UpdateAction::Insert);
               CalcOverheadSurcharge;  //** 4PS 15-06-2010
               //M25827
               IF ("Location Code" <> ItemJnlTemplate."Location Code") AND
                  ("Location Code" <> '') AND //kzwerver, 120404, n, #34242
                  (ItemJnlTemplate."Location Code" <> '')
               THEN
                 ERROR(Text11012003,
                          FIELDCAPTION("Location Code"),
                          "Location Code",
                          ItemJnlTemplate."Location Code",
                          ItemJnlTemplate.TABLECAPTION,
                          "Journal Template Name");
               CheckEntityNo;
               "Input by" := USERID;
               //**4PS.en
               //>>IME367, needed due to delayed insert in item journal page
               DimMgt.SetDimensionValueChainsBool(TRUE);
               IF "Shortcut Dimension 1 Code" <> '' THEN ValidateShortcutDimCode(1,"Shortcut Dimension 1 Code");
               IF "Shortcut Dimension 2 Code" <> '' THEN ValidateShortcutDimCode(2,"Shortcut Dimension 2 Code");
               DimMgt.SetDimensionValueChainsBool(FALSE);
               //<<IME367
             END;

    OnModify=BEGIN
               OnBeforeVerifyReservedQty(Rec,xRec,0);
               ReserveItemJnlLine.VerifyChange(Rec,xRec);
               CheckPlanningAssignment;
               //**4PS.sn
               VALIDATE("Quantity (Reserved)");
               UpdateCostControlStatus(UpdateAction::Modify);
               //IF ("Unit Cost" <> xRec."Unit Cost") OR (Quantity <> xRec.Quantity) THEN BEGIN   // 25-06-2007
                 //lItemJnlLine := Rec;  //** 4PS 15-06-2010 so
                 //CalcOverheadSurchargeOLD(lItemJnlLine);
                 //"Ovh.Surch.Expected Costs (LCY)" := lItemJnlLine."Ovh.Surch.Expected Costs (LCY)";//** 4PS 15-06-2010 eo
                 CalcOverheadSurcharge;  //** 4PS 15-06-2010
               //END;

               //M25827
               ItemJnlTemplate.GET("Journal Template Name");
               IF ("Location Code" <> ItemJnlTemplate."Location Code") AND (ItemJnlTemplate."Location Code" <> '') THEN
                 ERROR(Text11012003,
                          FIELDCAPTION("Location Code"),
                          "Location Code",
                          ItemJnlTemplate."Location Code",
                          ItemJnlTemplate.TABLECAPTION,
                          "Journal Template Name");
               CheckEntityNo;

               IF xRec."Additional Cost (Service)" = "Additional Cost (Service)" THEN
                 CheckAdditionalCostService;
               //**4PS.en
               //>>IME241
               DimMgt.SetDimensionValueChainsBool(TRUE);
               IF "Shortcut Dimension 1 Code" <> '' THEN ValidateShortcutDimCode(1,"Shortcut Dimension 1 Code");
               IF "Shortcut Dimension 2 Code" <> '' THEN ValidateShortcutDimCode(2,"Shortcut Dimension 2 Code");
               DimMgt.SetDimensionValueChainsBool(FALSE);
               //<<IME241
             END;

    OnDelete=BEGIN
               ReserveItemJnlLine.DeleteLine(Rec);

               CALCFIELDS("Reserved Qty. (Base)");
               TESTFIELD("Reserved Qty. (Base)",0);

               //**4PS.sn
               UpdateCostControlStatus(UpdateAction::Delete);
               UpdateRelatedQuantity(0, Quantity, TRUE);
               DeleteSurcharge;
               DeletePurchRequisitionLink;
               //**4PS.en
             END;

    OnRename=BEGIN
               ReserveItemJnlLine.RenameLine(Rec,xRec);
             END;

    CaptionML=[ENU=Item Journal Line;
               NOR=Varekladdelinje;
               SVE=Artikeljournalrad];
    LookupPageID=Page519;
    DrillDownPageID=Page519;
  }
  FIELDS
  {
    { 1   ;   ;Journal Template Name;Code10       ;TableRelation="Item Journal Template";
                                                   CaptionML=[ENU=Journal Template Name;
                                                              NOR=Kladdemalnavn;
                                                              SVE=Mallnamn f”r journal] }
    { 2   ;   ;Line No.            ;Integer       ;CaptionML=[ENU=Line No.;
                                                              NOR=Linjenr.;
                                                              SVE=Radnr] }
    { 3   ;   ;Item No.            ;Code20        ;TableRelation=Item WHERE (Blocked=CONST(No));
                                                   OnValidate=VAR
                                                                ProdOrderLine@1001 : Record 5406;
                                                                ProdOrderComp@1000 : Record 5407;
                                                                lvKeepCurrFieldNo@1100525000 : Integer;
                                                              BEGIN
                                                                lvKeepCurrFieldNo := CurrFieldNo;      //**4PS05.n
                                                                IF CurrFieldNo = FIELDNO("Item No.") THEN
                                                                  TESTFIELD("Production Order", '');  //**4PS.n

                                                                IF "Item No." <> xRec."Item No." THEN BEGIN
                                                                  "Variant Code" := '';
                                                                  "Bin Code" := '';
                                                                  "Bin Code (Project Inventory)" := '';  //**4PS.n
                                                                  IF CurrFieldNo <> 0 THEN
                                                                    WMSManagement.CheckItemJnlLineFieldChange(Rec,xRec,FIELDCAPTION("Item No."));
                                                                  IF ("Location Code" <> '') AND ("Item No." <> '') THEN BEGIN
                                                                    GetLocation("Location Code");
                                                                    IF Location."Bin Mandatory" AND NOT Location."Directed Put-away and Pick" THEN
                                                                      WMSManagement.GetDefaultBin("Item No.","Variant Code","Location Code","Bin Code");
                                                                    CheckDefaultBin;  //**4PS.n (db, 02-11-10)
                                                                  END;
                                                                  IF ("Entry Type" = "Entry Type"::Transfer) AND ("Location Code" = "New Location Code") THEN
                                                                    "New Bin Code" := "Bin Code";
                                                                END;

                                                                IF "Entry Type" IN ["Entry Type"::Consumption,"Entry Type"::Output] THEN
                                                                  WhseValidateSourceLine.ItemLineVerifyChange(Rec,xRec);

                                                                IF "Item No." = '' THEN BEGIN
                                                                  CreateDim(
                                                                    DATABASE::Job,"Job No.", //**4PS.n
                                                                    DATABASE::"Service Order","Service Order No.",   //** 4PS 09-06-2010
                                                                    DATABASE::Item,"Item No.",
                                                                    DATABASE::"Salesperson/Purchaser","Salespers./Purch. Code",
                                                                    DATABASE::"Work Center","Work Center No.",
                                                                    DATABASE::Location,"Location Code"); //**4PS.n
                                                                  EXIT;
                                                                END;

                                                                GetItem;
                                                                OnValidateItemNoOnAfterGetItem(Rec,Item);
                                                                DisplayErrorIfItemIsBlocked(Item);
                                                                ValidateTypeWithItemNo;

                                                                IF "Value Entry Type" = "Value Entry Type"::Revaluation THEN
                                                                  Item.TESTFIELD("Inventory Value Zero",FALSE);

                                                                //**4PS.sn
                                                                "Shortcut Dimension 2 Code" := Item."Global Dimension 2 Code";
                                                                IF "Shortcut Dimension 2 Code" <> '' THEN BEGIN
                                                                  CheckCompanyIC;
                                                                  DimMgt.GetDimValueRec(2, "Shortcut Dimension 2 Code", DimValRec, TRUE,'');
                                                                  IF DimValRec."Cost Type" < DimValRec."Cost Type"::Revenue THEN
                                                                    "Cost Type" := DimValRec."Cost Type" + 1
                                                                  ELSE
                                                                    "Cost Type" := "Cost Type"::" ";
                                                                  "Cost Component" := DimValRec."Cost Component";
                                                                  CheckCostCompServOrderType;
                                                                END;
                                                                CheckAdditionalCostService;  //db, 11-03-10

                                                                Item.TESTFIELD("Logistics on Component Level",FALSE); //**4PS.n
                                                                VALIDATE(Text, Item.Text);
                                                                ValidateShelf;
                                                                GetUnitPrice;
                                                                //**4PS.en
                                                                Description := Item.Description;
                                                                //**4PS.sn
                                                                "Description 2" := Item."Description 2";  //db, 26-08-09: M16327
                                                                ItemMgt.GetItemTranslation("Item No.", Description, "Description 2");
                                                                //**4PS.en
                                                                "Inventory Posting Group" := Item."Inventory Posting Group";
                                                                "Item Category Code" := Item."Item Category Code";

                                                                IF ("Value Entry Type" <> "Value Entry Type"::"Direct Cost") OR
                                                                   ("Item Charge No." <> '')
                                                                THEN BEGIN
                                                                  IF "Item No." <> xRec."Item No." THEN BEGIN
                                                                    TESTFIELD("Partial Revaluation",FALSE);
                                                                    RetrieveCosts;
                                                                    "Indirect Cost %" := 0;
                                                                    "Overhead Rate" := 0;
                                                                    "Inventory Value Per" := "Inventory Value Per"::" ";
                                                                    VALIDATE("Applies-to Entry",0);
                                                                    "Partial Revaluation" := FALSE;
                                                                  END;
                                                                END ELSE BEGIN
                                                                  "Indirect Cost %" := Item."Indirect Cost %";
                                                                  "Overhead Rate" := Item."Overhead Rate";
                                                                  IF NOT "Phys. Inventory" OR (Item."Costing Method" = Item."Costing Method"::Standard) THEN BEGIN
                                                                    RetrieveCosts;
                                                                    "Unit Cost" := UnitCost;
                                                                  END ELSE
                                                                    UnitCost := "Unit Cost";
                                                                END;

                                                                IF (("Entry Type" = "Entry Type"::Output) AND (WorkCenter."No." = '') AND (MachineCenter."No." = '')) OR
                                                                   ("Entry Type" <> "Entry Type"::Output) OR
                                                                   ("Value Entry Type" = "Value Entry Type"::Revaluation)
                                                                THEN
                                                                  "Gen. Prod. Posting Group" := Item."Gen. Prod. Posting Group";

                                                                //**4PS.sn
                                                                InventorySetup.GET;
                                                                IF InventorySetup."Product Posting Group (Invent)" <> '' THEN
                                                                  IF ItemJnlTemplate.GET("Journal Template Name") THEN
                                                                    IF ItemJnlTemplate.Type = ItemJnlTemplate.Type::"Phys. Inventory" THEN
                                                                      "Gen. Prod. Posting Group" := InventorySetup."Product Posting Group (Invent)";

                                                                IF "Value Entry Type" = "Value Entry Type"::Revaluation THEN
                                                                  IF InventorySetup."Product Posting Group (Reval.)" <> '' THEN
                                                                    "Gen. Prod. Posting Group" := InventorySetup."Product Posting Group (Reval.)";
                                                                //**4PS.en

                                                                CASE "Entry Type" OF
                                                                  "Entry Type"::Purchase,
                                                                  "Entry Type"::Output,
                                                                  "Entry Type"::"Assembly Output":
                                                                    PurchPriceCalcMgt.FindItemJnlLinePrice(Rec,FIELDNO("Item No."));
                                                                  "Entry Type"::"Positive Adjmt.",
                                                                  "Entry Type"::"Negative Adjmt.",
                                                                  "Entry Type"::Consumption,
                                                                  "Entry Type"::"Assembly Consumption":
                                                                    "Unit Amount" := UnitCost;
                                                                  "Entry Type"::Sale:
                                                                    SalesPriceCalcMgt.FindItemJnlLinePrice(Rec,FIELDNO("Item No."));
                                                                  "Entry Type"::Transfer:
                                                                    BEGIN
                                                                      "Unit Amount" := 0;
                                                                      "Unit Cost" := 0;
                                                                      Amount := 0;
                                                                    END;
                                                                END;
                                                                CurrFieldNo := lvKeepCurrFieldNo;  //**4PS05.n//needed because of NAV bug see KB926410 on PartnerSource

                                                                CASE "Entry Type" OF
                                                                  "Entry Type"::Purchase:
                                                                    //"Unit of Measure Code" := Item."Purch. Unit of Measure";  //**4PS.o
                                                                    "Unit of Measure Code" := Item."Base Unit of Measure";      //**4PS.n (call C-005201)
                                                                  "Entry Type"::Sale:
                                                                    //"Unit of Measure Code" := Item."Sales Unit of Measure";   //**4PS.o
                                                                    "Unit of Measure Code" := Item."Base Unit of Measure";      //**4PS.n (call C-005201)
                                                                  "Entry Type"::Output:
                                                                    BEGIN
                                                                      Item.TESTFIELD("Inventory Value Zero",FALSE);
                                                                      ProdOrderLine.SetFilterByReleasedOrderNo("Order No.");
                                                                      ProdOrderLine.SETRANGE("Item No.","Item No.");
                                                                      IF ProdOrderLine.FINDFIRST THEN BEGIN
                                                                        "Routing No." := ProdOrderLine."Routing No.";
                                                                        "Source Type" := "Source Type"::Item;
                                                                        "Source No." := ProdOrderLine."Item No.";
                                                                      END ELSE
                                                                        IF ("Value Entry Type" <> "Value Entry Type"::Revaluation) AND
                                                                           (CurrFieldNo <> 0)
                                                                        THEN
                                                                          ERROR(Text031,"Item No.","Order No.");
                                                                      IF ProdOrderLine.COUNT = 1 THEN
                                                                        CopyFromProdOrderLine(ProdOrderLine)
                                                                      ELSE
                                                                        "Unit of Measure Code" := Item."Base Unit of Measure";
                                                                    END;
                                                                  "Entry Type"::Consumption:
                                                                    BEGIN
                                                                      ProdOrderComp.SetFilterByReleasedOrderNo("Order No.");
                                                                      ProdOrderComp.SETRANGE("Item No.","Item No.");
                                                                      IF ProdOrderComp.COUNT = 1 THEN BEGIN
                                                                        ProdOrderComp.FINDFIRST;
                                                                        CopyFromProdOrderComp(ProdOrderComp);
                                                                      END ELSE BEGIN
                                                                        "Unit of Measure Code" := Item."Base Unit of Measure";
                                                                        VALIDATE("Prod. Order Comp. Line No.",0);
                                                                      END;
                                                                    END;
                                                                  ELSE
                                                                    "Unit of Measure Code" := Item."Base Unit of Measure";
                                                                END;

                                                                IF "Value Entry Type" = "Value Entry Type"::Revaluation THEN
                                                                  "Unit of Measure Code" := Item."Base Unit of Measure";
                                                                VALIDATE("Unit of Measure Code");
                                                                IF "Variant Code" <> '' THEN
                                                                  VALIDATE("Variant Code");

                                                                OnAfterOnValidateItemNoAssignByEntryType(Rec,Item);

                                                                CheckItemAvailable(FIELDNO("Item No."));

                                                                IF ((NOT ("Order Type" IN ["Order Type"::Production,"Order Type"::Assembly])) OR ("Order No." = '')) AND NOT "Phys. Inventory"
                                                                THEN
                                                                  CreateDim(
                                                                    DATABASE::Job,"Job No.", //**4PS.n
                                                                    DATABASE::"Service Order","Service Order No.",   //** 4PS 09-06-2010
                                                                    DATABASE::Item,"Item No.",
                                                                    DATABASE::"Salesperson/Purchaser","Salespers./Purch. Code",
                                                                    DATABASE::"Work Center","Work Center No.",
                                                                    DATABASE::Location,"Location Code"); //**4PS.n

                                                                VALIDATE("To Plant Inventory"); //**4PS.n

                                                                OnBeforeVerifyReservedQty(Rec,xRec,FIELDNO("Item No."));
                                                                ReserveItemJnlLine.VerifyChange(Rec,xRec);

                                                                //**4PS.sn
                                                                CurrFieldNo := lvKeepCurrFieldNo;
                                                                CheckItemEntrySales;
                                                                //**4PS.en
                                                              END;

                                                   OnLookup=BEGIN
                                                              LookupItemNo;  //**4PS.n
                                                            END;

                                                   CaptionML=[ENU=Item No.;
                                                              NOR=Varenr.;
                                                              SVE=Artikelnr] }
    { 4   ;   ;Posting Date        ;Date          ;OnValidate=VAR
                                                                CheckDateConflict@1000 : Codeunit 99000815;
                                                              BEGIN
                                                                TESTFIELD("Posting Date");
                                                                VALIDATE("Document Date","Posting Date");
                                                                CheckDateConflict.ItemJnlLineCheck(Rec,CurrFieldNo <> 0);
                                                              END;

                                                   CaptionML=[ENU=Posting Date;
                                                              NOR=Bokf›ringsdato;
                                                              SVE=Bokf”ringsdatum] }
    { 5   ;   ;Entry Type          ;Option        ;OnValidate=VAR
                                                                lvKeepCurrFieldNo@1100525000 : Integer;
                                                              BEGIN
                                                                lvKeepCurrFieldNo := CurrFieldNo;         //**4PS05.n
                                                                IF NOT ("Entry Type" IN ["Entry Type"::"Positive Adjmt.","Entry Type"::"Negative Adjmt."]) THEN
                                                                  TESTFIELD("Phys. Inventory",FALSE);

                                                                IF CurrFieldNo <> 0 THEN
                                                                  WMSManagement.CheckItemJnlLineFieldChange(Rec,xRec,FIELDCAPTION("Entry Type"));
                                                                //**4PS.sn
                                                                IF ("Entry Type" IN ["Entry Type"::"Positive Adjmt.", "Entry Type"::"Negative Adjmt."]) THEN BEGIN
                                                                  TESTFIELD("Production Order", '');
                                                                  TESTFIELD("Job No.",'');
                                                                  TESTFIELD("Service Order No.",'');
                                                                END;
                                                                IF NOT ("Entry Type" IN ["Entry Type"::Purchase, "Entry Type"::Sale]) THEN
                                                                  VALIDATE("Plant Type", '');
                                                                IF NOT ("Entry Type" IN ["Entry Type"::Purchase, "Entry Type"::Sale]) THEN
                                                                  VALIDATE("Delivery Account No.", '');
                                                                IF "Project Stock" AND (NOT ("Entry Type" IN ["Entry Type"::Purchase, "Entry Type"::Sale])) THEN
                                                                  "Project Stock" := FALSE;
                                                                //**4PS.en

                                                                CASE "Entry Type" OF
                                                                  "Entry Type"::Purchase:
                                                                    IF UserMgt.GetRespCenter(1,'') <> '' THEN
                                                                      //"Location Code" := UserMgt.GetLocation(1,'',UserMgt.GetPurchasesFilter); //**4PS.o
                                                                      "Location Code" := UserMgt.GetLocation(1,'',UserMgt.GetPurchasesDefault); //**4PS.n
                                                                  "Entry Type"::Sale:
                                                                    BEGIN
                                                                      IF UserMgt.GetRespCenter(0,'') <> '' THEN
                                                                        "Location Code" := UserMgt.GetLocation(0,'',UserMgt.GetSalesFilter);
                                                                      CheckItemAvailable(FIELDNO("Entry Type"));
                                                                    END;
                                                                  "Entry Type"::Consumption,"Entry Type"::Output:
                                                                    VALIDATE("Order Type","Order Type"::Production);
                                                                  "Entry Type"::"Assembly Consumption","Entry Type"::"Assembly Output":
                                                                    VALIDATE("Order Type","Order Type"::Assembly);
                                                                END;

                                                                IF xRec."Location Code" = '' THEN
                                                                  IF Location.GET("Location Code") THEN
                                                                    IF  Location."Directed Put-away and Pick" THEN
                                                                      "Location Code" := '';

                                                                IF "Item No." <> '' THEN
                                                                  VALIDATE("Location Code");

                                                                VALIDATE("Item No.");
                                                                IF "Entry Type" <> "Entry Type"::Transfer THEN BEGIN
                                                                  "New Location Code" := '';
                                                                  "New Bin Code" := '';
                                                                END;

                                                                IF "Entry Type" <> "Entry Type"::Output THEN
                                                                  Type := Type::" ";

                                                                ReserveItemJnlLine.VerifyChange(Rec,xRec);

                                                                //**4PS.sn
                                                                CurrFieldNo := lvKeepCurrFieldNo;
                                                                CheckItemEntrySales;
                                                                SetProjectStock;
                                                                //**4PS.en
                                                              END;

                                                   CaptionML=[ENU=Entry Type;
                                                              NOR=Posttype;
                                                              SVE=Transaktionstyp];
                                                   OptionCaptionML=[ENU=Purchase,Sale,Positive Adjmt.,Negative Adjmt.,Transfer,Consumption,Output, ,Assembly Consumption,Assembly Output;
                                                                    NOR=Kj›p,Salg,Oppjust.,Nedjust.,Overf›ring,Forbruk,Avgang, ,Monteringsforbruk,Monteringsavgang;
                                                                    SVE=Ink”p,F”rs„ljning,Positiv justering,Negativ justering,™verf”ring,F”rbrukning,Utfl”de, ,Monteringsf”rbrukning,Monteringsutfl”de];
                                                   OptionString=Purchase,Sale,Positive Adjmt.,Negative Adjmt.,Transfer,Consumption,Output, ,Assembly Consumption,Assembly Output }
    { 6   ;   ;Source No.          ;Code20        ;TableRelation=IF (Source Type=CONST(Customer)) Customer
                                                                 ELSE IF (Source Type=CONST(Vendor)) Vendor
                                                                 ELSE IF (Source Type=CONST(Item)) Item;
                                                   CaptionML=[ENU=Source No.;
                                                              NOR=Kildenr.;
                                                              SVE=Ursprungsnr];
                                                   Editable=No }
    { 7   ;   ;Document No.        ;Code20        ;CaptionML=[ENU=Document No.;
                                                              NOR=Bilagsnr.;
                                                              SVE=Dokumentnr] }
    { 8   ;   ;Description         ;Text100       ;CaptionML=[ENU=Description;
                                                              NOR=Beskrivelse;
                                                              SVE=Beskrivning] }
    { 9   ;   ;Location Code       ;Code10        ;TableRelation=Location WHERE (Project Filter=FIELD(Job No.));
                                                   OnValidate=VAR
                                                                NewDim1@1100525001 : Text;
                                                                NewDim2@1100525000 : Text;
                                                                NewSetID@1100525002 : Integer;
                                                              BEGIN
                                                                IF "Entry Type" <= "Entry Type"::Transfer THEN
                                                                  TESTFIELD("Item No.");

                                                                // Location code in allowed only for inventoriable items
                                                                IF "Location Code" <> '' THEN
                                                                  Item.TESTFIELD(Type,Item.Type::Inventory);
                                                                //**4PS.sn
                                                                CheckLocationBlocked("Location Code");
                                                                IF "Journal Template Name" <> '' THEN BEGIN
                                                                  ItemJnlTemplate.GET("Journal Template Name");
                                                                  IF ("Location Code" <> ItemJnlTemplate."Location Code") AND (ItemJnlTemplate."Location Code" <> '') THEN
                                                                    ERROR(
                                                                      Text11012003,
                                                                      FIELDCAPTION("Location Code"),
                                                                      "Location Code",
                                                                      ItemJnlTemplate."Location Code",
                                                                      ItemJnlTemplate.TABLECAPTION,
                                                                      "Journal Template Name");
                                                                END;
                                                                //**4PS.en

                                                                IF ("Value Entry Type" = "Value Entry Type"::"Direct Cost") AND
                                                                   ("Item Charge No." = '') AND
                                                                   ("No." = '')
                                                                THEN BEGIN
                                                                  GetUnitAmount(FIELDNO("Location Code"));
                                                                  "Unit Cost" := UnitCost;
                                                                  VALIDATE("Unit Amount");
                                                                  CheckItemAvailable(FIELDNO("Location Code"));
                                                                END;

                                                                IF "Entry Type" IN ["Entry Type"::Consumption,"Entry Type"::Output] THEN
                                                                  WhseValidateSourceLine.ItemLineVerifyChange(Rec,xRec);

                                                                IF "Location Code" <> xRec."Location Code" THEN BEGIN
                                                                  "Bin Code" := '';
                                                                  "Bin Code (Project Inventory)" := '';  //**4PS.n
                                                                  IF CurrFieldNo <> 0 THEN
                                                                    WMSManagement.CheckItemJnlLineFieldChange(Rec,xRec,FIELDCAPTION("Location Code"));
                                                                  IF ("Location Code" <> '') AND ("Item No." <> '') THEN BEGIN
                                                                    GetLocation("Location Code");
                                                                    IF Location."Bin Mandatory" AND NOT Location."Directed Put-away and Pick" THEN
                                                                      WMSManagement.GetDefaultBin("Item No.","Variant Code","Location Code","Bin Code");
                                                                    CheckDefaultBin;  //**4PS.n (db, 02-11-10)
                                                                  END;
                                                                  IF "Entry Type" = "Entry Type"::Transfer THEN BEGIN
                                                                    IF ("New Location Code" = '') THEN BEGIN //130619, kzwerver, n, #C005426
                                                                      "New Location Code" := "Location Code";
                                                                      "New Bin Code" := "Bin Code";
                                                                    END;
                                                                  END;
                                                                END;

                                                                VALIDATE("Unit of Measure Code");

                                                                ReserveItemJnlLine.VerifyChange(Rec,xRec);

                                                                //**4PS.sn
                                                                IF "Location Code" <> Location.Code THEN
                                                                  Location.GET("Location Code");
                                                                IF Location."Global Dimension 1 Code" <> '' THEN BEGIN  //C009243
                                                                  IF "Entry Type" = "Entry Type"::Transfer THEN BEGIN  //C053559
                                                                    NewDim1 := "New Shortcut Dimension 1 Code";
                                                                    NewDim2 := "New Shortcut Dimension 2 Code";
                                                                    NewSetID := "New Dimension Set ID";
                                                                  END;
                                                                  CreateDim(
                                                                    DATABASE::Job,"Job No.",
                                                                    DATABASE::"Service Order","Service Order No.",
                                                                    DATABASE::Item,"Item No.",
                                                                    DATABASE::"Salesperson/Purchaser","Salespers./Purch. Code",
                                                                    DATABASE::"Work Center","Work Center No.",
                                                                    DATABASE::Location,"Location Code");
                                                                  IF "Entry Type" = "Entry Type"::Transfer THEN BEGIN  //C053559: reset assignment by CreateDim (codeunit 408)
                                                                    "New Shortcut Dimension 1 Code" := NewDim1;
                                                                    "New Shortcut Dimension 2 Code" := NewDim2;
                                                                    "New Dimension Set ID" := NewSetID;
                                                                  END;
                                                                END;

                                                                GetItem;
                                                                GetUnitPrice;
                                                                ValidateShelf;
                                                                //**4PS.en
                                                              END;

                                                   CaptionML=[ENU=Location Code;
                                                              NOR=Lokasjonskode;
                                                              SVE=Lagerst„llekod] }
    { 10  ;   ;Inventory Posting Group;Code20     ;TableRelation="Inventory Posting Group";
                                                   CaptionML=[ENU=Inventory Posting Group;
                                                              NOR=Bokf›ringsgruppe - lager;
                                                              SVE=Lagerbokf”ringsmall];
                                                   Editable=No }
    { 11  ;   ;Source Posting Group;Code20        ;TableRelation=IF (Source Type=CONST(Customer)) "Customer Posting Group"
                                                                 ELSE IF (Source Type=CONST(Vendor)) "Vendor Posting Group"
                                                                 ELSE IF (Source Type=CONST(Item)) "Inventory Posting Group";
                                                   CaptionML=[ENU=Source Posting Group;
                                                              NOR=Kildebokf›ringsgruppe;
                                                              SVE=Ursprunglig bokf”ringsmall];
                                                   Editable=No }
    { 13  ;   ;Quantity            ;Decimal       ;OnValidate=VAR
                                                                CallWhseCheck@1000 : Boolean;
                                                                lvKeepCurrFieldNo@1100525000 : Integer;
                                                              BEGIN
                                                                IF ("Entry Type" <= "Entry Type"::Transfer) AND (Quantity <> 0) THEN
                                                                  TESTFIELD("Item No.");

                                                                //**4PS.sn
                                                                lvKeepCurrFieldNo := CurrFieldNo;
                                                                IF CurrFieldNo = FIELDNO(Quantity) THEN BEGIN
                                                                  TESTFIELD("Production Order", '');
                                                                  IF IsExistingJobOrServiceItemJlnLineQtyChanged THEN
                                                                    OldSrvOrJobItemJlnLineQuantity := xRec.Quantity;
                                                                END;
                                                                //**4PS.sn

                                                                IF NOT PhysInvtEntered THEN
                                                                  TESTFIELD("Phys. Inventory",FALSE);
                                                                CallWhseCheck :=
                                                                  ("Entry Type" = "Entry Type"::"Assembly Consumption") OR
                                                                  ("Entry Type" = "Entry Type"::Consumption) OR
                                                                  ("Entry Type" = "Entry Type"::Output) AND
                                                                  LastOutputOperation(Rec);
                                                                IF CallWhseCheck THEN
                                                                  WhseValidateSourceLine.ItemLineVerifyChange(Rec,xRec);

                                                                IF CurrFieldNo <> 0 THEN
                                                                  WMSManagement.CheckItemJnlLineFieldChange(Rec,xRec,FIELDCAPTION(Quantity));

                                                                "Quantity (Base)" := UOMMgt.CalcBaseQty(Quantity,"Qty. per Unit of Measure");
                                                                IF ("Entry Type" = "Entry Type"::Output) AND
                                                                   ("Value Entry Type" <> "Value Entry Type"::Revaluation)
                                                                THEN
                                                                  "Invoiced Quantity" := 0
                                                                ELSE
                                                                  "Invoiced Quantity" := Quantity;
                                                                "Invoiced Qty. (Base)" := UOMMgt.CalcBaseQty("Invoiced Quantity","Qty. per Unit of Measure");

                                                                OnValidateQuantityOnBeforeGetUnitAmount(Rec,xRec,CurrFieldNo);

                                                                GetUnitAmount(FIELDNO(Quantity));
                                                                UpdateAmount;

                                                                CheckItemAvailable(FIELDNO(Quantity));

                                                                IF "Entry Type" = "Entry Type"::Transfer THEN BEGIN
                                                                  "Qty. (Calculated)" := 0;
                                                                  "Qty. (Phys. Inventory)" := 0;
                                                                  "Last Item Ledger Entry No." := 0;
                                                                END;

                                                                CALCFIELDS("Reserved Qty. (Base)");
                                                                IF ABS("Quantity (Base)") < ABS("Reserved Qty. (Base)") THEN
                                                                  ERROR(Text001,FIELDCAPTION("Reserved Qty. (Base)"));

                                                                IF Item."Item Tracking Code" <> '' THEN
                                                                  ReserveItemJnlLine.VerifyQuantity(Rec,xRec);

                                                                //**4PS.sn
                                                                "Quantity to Post" := CalcDefaultQuantityToPost;
                                                                UpdateRelatedQuantity(Quantity, xRec.Quantity, FALSE);

                                                                CalcOverheadSurcharge;

                                                                CurrFieldNo := lvKeepCurrFieldNo;
                                                                CheckItemEntrySales;

                                                                CheckAdditionalCostService;
                                                                //**4PS.en
                                                              END;

                                                   CaptionML=[ENU=Quantity;
                                                              NOR=Antall;
                                                              SVE=Antal];
                                                   DecimalPlaces=0:5 }
    { 15  ;   ;Invoiced Quantity   ;Decimal       ;CaptionML=[ENU=Invoiced Quantity;
                                                              NOR=Fakturert antall;
                                                              SVE=Fakturerat antal];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 16  ;   ;Unit Amount         ;Decimal       ;OnValidate=BEGIN
                                                                UpdateAmount;
                                                                IF "Item No." <> '' THEN
                                                                  IF "Value Entry Type" = "Value Entry Type"::Revaluation THEN
                                                                    "Unit Cost" := "Unit Amount"
                                                                  ELSE
                                                                    CASE "Entry Type" OF
                                                                      "Entry Type"::Purchase,
                                                                      "Entry Type"::"Positive Adjmt.",
                                                                      "Entry Type"::"Assembly Output":
                                                                        BEGIN
                                                                          IF "Entry Type" = "Entry Type"::"Positive Adjmt." THEN BEGIN
                                                                            GetItem;
                                                                            IF (CurrFieldNo = FIELDNO("Unit Amount")) AND
                                                                               (Item."Costing Method" = Item."Costing Method"::Standard)
                                                                            THEN
                                                                              ERROR(
                                                                                Text002,
                                                                                FIELDCAPTION("Unit Amount"),Item.FIELDCAPTION("Costing Method"),Item."Costing Method");
                                                                          END;

                                                                          ReadGLSetup;
                                                                          IF "Entry Type" = "Entry Type"::Purchase THEN
                                                                            "Unit Cost" := "Unit Amount";
                                                                          IF "Entry Type" = "Entry Type"::"Positive Adjmt." THEN
                                                                            "Unit Cost" :=
                                                                              ROUND(
                                                                                "Unit Amount" * (1 + "Indirect Cost %" / 100),GLSetup."Unit-Amount Rounding Precision") +
                                                                              "Overhead Rate" * "Qty. per Unit of Measure";
                                                                          IF ("Value Entry Type" = "Value Entry Type"::"Direct Cost") AND
                                                                             ("Item Charge No." = '')
                                                                          THEN
                                                                            VALIDATE("Unit Cost");
                                                                        END;
                                                                      "Entry Type"::"Negative Adjmt.",
                                                                      "Entry Type"::Consumption,
                                                                      "Entry Type"::"Assembly Consumption":
                                                                        BEGIN
                                                                          GetItem;
                                                                          IF (CurrFieldNo = FIELDNO("Unit Amount")) AND
                                                                             (Item."Costing Method" = Item."Costing Method"::Standard)
                                                                          THEN
                                                                            ERROR(
                                                                              Text002,
                                                                              FIELDCAPTION("Unit Amount"),Item.FIELDCAPTION("Costing Method"),Item."Costing Method");
                                                                          "Unit Cost" := "Unit Amount";
                                                                          IF ("Value Entry Type" = "Value Entry Type"::"Direct Cost") AND
                                                                             ("Item Charge No." = '')
                                                                          THEN
                                                                            VALIDATE("Unit Cost");
                                                                        END;
                                                                    END;
                                                              END;

                                                   CaptionML=[ENU=Unit Amount;
                                                              NOR=Enhetsbel›p;
                                                              SVE=A-pris];
                                                   AutoFormatType=2 }
    { 17  ;   ;Unit Cost           ;Decimal       ;OnValidate=BEGIN
                                                                TESTFIELD("Item No.");
                                                                RetrieveCosts;
                                                                IF "Entry Type" IN ["Entry Type"::Purchase,"Entry Type"::"Positive Adjmt.","Entry Type"::Consumption] THEN
                                                                  IF Item."Costing Method" = Item."Costing Method"::Standard THEN BEGIN
                                                                    IF CurrFieldNo = FIELDNO("Unit Cost") THEN
                                                                      ERROR(
                                                                        Text002,
                                                                        FIELDCAPTION("Unit Cost"),Item.FIELDCAPTION("Costing Method"),Item."Costing Method");
                                                                    "Unit Cost" := ROUND(UnitCost * "Qty. per Unit of Measure",GLSetup."Unit-Amount Rounding Precision");
                                                                  END;

                                                                IF ("Item Charge No." = '') AND
                                                                   ("Value Entry Type" = "Value Entry Type"::"Direct Cost") AND
                                                                   (CurrFieldNo = FIELDNO("Unit Cost"))
                                                                THEN BEGIN
                                                                  CASE "Entry Type" OF
                                                                    "Entry Type"::Purchase:
                                                                      "Unit Amount" := "Unit Cost";
                                                                    "Entry Type"::"Positive Adjmt.",
                                                                    "Entry Type"::"Assembly Output":
                                                                      BEGIN
                                                                        ReadGLSetup;
                                                                        "Unit Amount" :=
                                                                          ROUND(
                                                                            ("Unit Cost" - "Overhead Rate" * "Qty. per Unit of Measure") / (1 + "Indirect Cost %" / 100),
                                                                            GLSetup."Unit-Amount Rounding Precision")
                                                                      END;
                                                                    "Entry Type"::"Negative Adjmt.",
                                                                    "Entry Type"::Consumption,
                                                                    "Entry Type"::"Assembly Consumption":
                                                                      BEGIN
                                                                        IF Item."Costing Method" = Item."Costing Method"::Standard THEN
                                                                          ERROR(
                                                                            Text002,
                                                                            FIELDCAPTION("Unit Cost"),Item.FIELDCAPTION("Costing Method"),Item."Costing Method");
                                                                        "Unit Amount" := "Unit Cost";
                                                                      END;
                                                                  END;
                                                                  UpdateAmount;
                                                                END;

                                                                //**4PS.sn
                                                                //lItemJnlLine := Rec;   //** 4PS 15-06-2010 so
                                                                //CalcOverheadSurchargeOLD(lItemJnlLine);
                                                                //"Ovh.Surch.Expected Costs (LCY)" := lItemJnlLine."Ovh.Surch.Expected Costs (LCY)";   //** 4PS 15-06-2010 eo
                                                                CalcOverheadSurcharge; //** 4PS 15-06-2010
                                                                //**4PS.en
                                                              END;

                                                   CaptionML=[ENU=Unit Cost;
                                                              NOR=Enhetskost;
                                                              SVE=Styckkostnad];
                                                   AutoFormatType=2 }
    { 18  ;   ;Amount              ;Decimal       ;OnValidate=BEGIN
                                                                TESTFIELD(Quantity);
                                                                "Unit Amount" := Amount / Quantity;
                                                                VALIDATE("Unit Amount");
                                                                ReadGLSetup;
                                                                "Unit Amount" := ROUND("Unit Amount",GLSetup."Unit-Amount Rounding Precision");
                                                              END;

                                                   CaptionML=[ENU=Amount;
                                                              NOR=Bel›p;
                                                              SVE=Belopp];
                                                   AutoFormatType=1 }
    { 22  ;   ;Discount Amount     ;Decimal       ;CaptionML=[ENU=Discount Amount;
                                                              NOR=Rabattbel›p;
                                                              SVE=Rabattbelopp];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 23  ;   ;Salespers./Purch. Code;Code20      ;TableRelation=Salesperson/Purchaser;
                                                   OnValidate=BEGIN
                                                                IF ("Order Type" <> "Order Type"::Production) OR ("Order No." = '') THEN
                                                                  CreateDim(
                                                                    DATABASE::"Salesperson/Purchaser","Salespers./Purch. Code",
                                                                    DATABASE::Job,"Job No.", //**4PS.n
                                                                    DATABASE::"Service Order","Service Order No.",   //** 4PS 09-06-2010
                                                                    DATABASE::Item,"Item No.",
                                                                    DATABASE::"Work Center","Work Center No.",
                                                                    DATABASE::Location,"Location Code"); //**4PS.n
                                                              END;

                                                   CaptionML=[ENU=Salespers./Purch. Code;
                                                              NOR=Selger/innkj›per - kode;
                                                              SVE=S„ljare/ink”pare kod] }
    { 26  ;   ;Source Code         ;Code10        ;TableRelation="Source Code";
                                                   CaptionML=[ENU=Source Code;
                                                              NOR=Kildespor;
                                                              SVE=Ursprungskod];
                                                   Editable=No }
    { 29  ;   ;Applies-to Entry    ;Integer       ;OnValidate=VAR
                                                                ItemLedgEntry@1000 : Record 32;
                                                                ItemTrackingLines@1001 : Page 6510;
                                                              BEGIN
                                                                IF "Applies-to Entry" <> 0 THEN BEGIN
                                                                  ItemLedgEntry.GET("Applies-to Entry");

                                                                  IF "Value Entry Type" = "Value Entry Type"::Revaluation THEN BEGIN
                                                                    IF "Inventory Value Per" <> "Inventory Value Per"::" " THEN
                                                                      ERROR(Text006,FIELDCAPTION("Applies-to Entry"));

                                                                    IF "Inventory Value Per" = "Inventory Value Per"::" " THEN
                                                                      IF NOT RevaluationPerEntryAllowed("Item No.") THEN
                                                                        ERROR(RevaluationPerEntryNotAllowedErr);

                                                                    InitRevalJnlLine(ItemLedgEntry);
                                                                    ItemLedgEntry.TESTFIELD(Positive,TRUE);
                                                                  END ELSE BEGIN
                                                                    TESTFIELD(Quantity);
                                                                    IF Signed(Quantity) * ItemLedgEntry.Quantity > 0 THEN BEGIN
                                                                      IF Quantity > 0 THEN
                                                                        FIELDERROR(Quantity,Text030);
                                                                      IF Quantity < 0 THEN
                                                                        FIELDERROR(Quantity,Text029);
                                                                    END;
                                                                    IF ItemLedgEntry.TrackingExists THEN
                                                                      ERROR(Text033,FIELDCAPTION("Applies-to Entry"),ItemTrackingLines.CAPTION);

                                                                    IF NOT ItemLedgEntry.Open THEN
                                                                      MESSAGE(Text032,"Applies-to Entry");

                                                                    IF "Entry Type" = "Entry Type"::Output THEN BEGIN
                                                                      ItemLedgEntry.TESTFIELD("Order Type","Order Type"::Production);
                                                                      ItemLedgEntry.TESTFIELD("Order No.","Order No.");
                                                                      ItemLedgEntry.TESTFIELD("Order Line No.","Order Line No.");
                                                                      ItemLedgEntry.TESTFIELD("Entry Type","Entry Type");
                                                                    END;
                                                                  END;

                                                                  "Location Code" := ItemLedgEntry."Location Code";
                                                                  "Variant Code" := ItemLedgEntry."Variant Code";
                                                                END ELSE
                                                                  IF "Value Entry Type" = "Value Entry Type"::Revaluation THEN BEGIN
                                                                    VALIDATE("Unit Amount",0);
                                                                    VALIDATE(Quantity,0);
                                                                    "Inventory Value (Calculated)" := 0;
                                                                    "Inventory Value (Revalued)" := 0;
                                                                    "Location Code" := '';
                                                                    "Variant Code" := '';
                                                                    "Bin Code" := '';
                                                                  END;
                                                              END;

                                                   OnLookup=BEGIN
                                                              SelectItemEntry(FIELDNO("Applies-to Entry"));
                                                            END;

                                                   CaptionML=[ENU=Applies-to Entry;
                                                              NOR=Utligningspost;
                                                              SVE=Kopplas till l”pnr] }
    { 32  ;   ;Item Shpt. Entry No.;Integer       ;CaptionML=[ENU=Item Shpt. Entry No.;
                                                              NOR=Varelev.l›penr.;
                                                              SVE=L”pnr f”r artikelleverans];
                                                   Editable=No }
    { 34  ;   ;Shortcut Dimension 1 Code;Code20   ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(1));
                                                   OnValidate=BEGIN
                                                                //**4PS.sn
                                                                //CheckCompanyIC;  **4Ps.o cal 16467
                                                                DimValRec.CHANGECOMPANY(COMPANYNAME);  //**4PS.n cal 16467
                                                                IF "Shortcut Dimension 1 Code" <> '' THEN
                                                                  DimMgt.GetDimValueRec(1, "Shortcut Dimension 1 Code", DimValRec, TRUE,'');
                                                                //**4PS.en

                                                                ValidateShortcutDimCode(1,"Shortcut Dimension 1 Code");
                                                              END;

                                                   OnLookup=BEGIN
                                                              //**4PS.sn
                                                              //CheckCompanyIC;  **4Ps.o cal 16467
                                                              DimValRec.CHANGECOMPANY(COMPANYNAME);  //**4PS.n cal 16467
                                                              DimValRec.RESET;
                                                              DimValRec.Code := "Shortcut Dimension 1 Code";
                                                              DimValRec.SETRANGE("Global Dimension No.", 1);
                                                              IF PAGE.RUNMODAL(0, DimValRec) = ACTION::LookupOK THEN
                                                                VALIDATE("Shortcut Dimension 1 Code", DimValRec.Code);
                                                              //**4PS.en
                                                            END;

                                                   CaptionML=[ENU=Shortcut Dimension 1 Code;
                                                              NOR=Snarveisdimensjon 1 - kode;
                                                              SVE=Genv„g dimension 1 kod];
                                                   CaptionClass='1,2,1' }
    { 35  ;   ;Shortcut Dimension 2 Code;Code20   ;TableRelation=IF (Receiving Company=FILTER('')) "Dimension Value".Code WHERE (Global Dimension No.=CONST(2));
                                                   OnValidate=BEGIN
                                                                //**4PS.sn
                                                                CheckCompanyIC;
                                                                IF "Shortcut Dimension 2 Code" <> '' THEN BEGIN
                                                                  DimMgt.SetCompany("Receiving Company"); //C042536
                                                                  DimMgt.GetDimValueRec(2, "Shortcut Dimension 2 Code", DimValRec, TRUE,'');
                                                                  IF DimValRec."Cost Type" < DimValRec."Cost Type"::Revenue THEN
                                                                    "Cost Type" := DimValRec."Cost Type"+1
                                                                  ELSE
                                                                    "Cost Type" := "Cost Type"::" ";
                                                                  CheckAdditionalCostService;  //db, 24-02-10
                                                                  "Cost Component" := DimValRec."Cost Component";
                                                                  CheckCostCompServOrderType;
                                                                END ELSE BEGIN
                                                                  "Cost Type" := "Cost Type"::" ";
                                                                END;
                                                                //**4PS.en
                                                                ValidateShortcutDimCode(2,"Shortcut Dimension 2 Code");

                                                                //**4PS.sn
                                                                IF "Shortcut Dimension 2 Code" <> '' THEN BEGIN
                                                                  IF (DimValRec.Element <> '') AND ("Job No." <> '') THEN
                                                                    VALIDATE(Element, DimValRec.Element);
                                                                END;
                                                                //**4PS.en

                                                                //**4PS.sn C007769
                                                                IF ("Shortcut Dimension 2 Code" <> xRec."Shortcut Dimension 2 Code") AND
                                                                   ("FSC Type Code" = '')
                                                                THEN
                                                                  FillDefaultFscType;
                                                                //**4PS.en
                                                              END;

                                                   OnLookup=BEGIN
                                                              //**4PS.sn
                                                              CheckCompanyIC;
                                                              DimValRec.RESET;
                                                              DimValRec.Code := "Shortcut Dimension 2 Code";
                                                              DimValRec.SETRANGE("Global Dimension No.", 2);
                                                              DimValRec.SETRANGE("Project Filter", "Job No.");
                                                              IF "Receiving Company" = '' THEN
                                                                DimValRec.SETRANGE("Company Filter")
                                                              ELSE
                                                                DimValRec.SETRANGE("Company Filter", "Receiving Company");
                                                              IF PAGE.RUNMODAL(PAGE::"Cost Object List", DimValRec) = ACTION::LookupOK THEN
                                                                VALIDATE("Shortcut Dimension 2 Code", DimValRec.Code);
                                                              //**4PS.en
                                                            END;

                                                   CaptionML=[ENU=Shortcut Dimension 2 Code;
                                                              NOR=Snarveisdimensjon 2 - kode;
                                                              SVE=Genv„g dimension 2 kod];
                                                   CaptionClass='1,2,2' }
    { 37  ;   ;Indirect Cost %     ;Decimal       ;OnValidate=BEGIN
                                                                TESTFIELD("Item No.");
                                                                TESTFIELD("Value Entry Type","Value Entry Type"::"Direct Cost");
                                                                TESTFIELD("Item Charge No.",'');
                                                                IF "Entry Type" IN ["Entry Type"::Sale,"Entry Type"::"Negative Adjmt."] THEN
                                                                  ERROR(
                                                                    Text002,
                                                                    FIELDCAPTION("Indirect Cost %"),FIELDCAPTION("Entry Type"),"Entry Type");

                                                                GetItem;
                                                                IF Item."Costing Method" = Item."Costing Method"::Standard THEN
                                                                  ERROR(
                                                                    Text002,
                                                                    FIELDCAPTION("Indirect Cost %"),Item.FIELDCAPTION("Costing Method"),Item."Costing Method");

                                                                IF "Entry Type" <> "Entry Type"::Purchase THEN
                                                                  "Unit Cost" :=
                                                                    ROUND(
                                                                      "Unit Amount" * (1 + "Indirect Cost %" / 100) +
                                                                      "Overhead Rate" * "Qty. per Unit of Measure",GLSetup."Unit-Amount Rounding Precision");
                                                              END;

                                                   CaptionML=[ENU=Indirect Cost %;
                                                              NOR=Indirekte kost-%;
                                                              SVE=Indirekt kostnad %];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 39  ;   ;Source Type         ;Option        ;CaptionML=[ENU=Source Type;
                                                              NOR=Kildetype;
                                                              SVE=Ursprungstyp];
                                                   OptionCaptionML=[ENU=" ,Customer,Vendor,Item";
                                                                    NOR=" ,Kunde,Leverand›r,Vare";
                                                                    SVE=" ,Kund,Leverant”r,Artikel"];
                                                   OptionString=[ ,Customer,Vendor,Item];
                                                   Editable=No }
    { 40  ;   ;Shpt. Method Code   ;Code10        ;TableRelation="Shipment Method";
                                                   CaptionML=[ENU=Shpt. Method Code;
                                                              NOR=Leveringsm†tekode] }
    { 41  ;   ;Journal Batch Name  ;Code10        ;TableRelation="Item Journal Batch".Name WHERE (Journal Template Name=FIELD(Journal Template Name));
                                                   CaptionML=[ENU=Journal Batch Name;
                                                              NOR=Kladdenavn;
                                                              SVE=Journalnamn] }
    { 42  ;   ;Reason Code         ;Code10        ;TableRelation="Reason Code";
                                                   CaptionML=[ENU=Reason Code;
                                                              NOR=rsaksspor;
                                                              SVE=Uppf”ljningskod] }
    { 43  ;   ;Recurring Method    ;Option        ;CaptionML=[ENU=Recurring Method;
                                                              NOR=Gjentakelsesprinsipp;
                                                              SVE=Metod f”r †terkommande trans.];
                                                   OptionCaptionML=[ENU=,Fixed,Variable;
                                                                    NOR=,Fast,Variabel;
                                                                    SVE=,Fast,Variabel];
                                                   OptionString=,Fixed,Variable;
                                                   BlankZero=Yes }
    { 44  ;   ;Expiration Date     ;Date          ;CaptionML=[ENU=Expiration Date;
                                                              NOR=Utg†r den;
                                                              SVE=Utg†ngsdatum] }
    { 45  ;   ;Recurring Frequency ;DateFormula   ;CaptionML=[ENU=Recurring Frequency;
                                                              NOR=Gjentakelsesintervall;
                                                              SVE=terkommande frekvens] }
    { 46  ;   ;Drop Shipment       ;Boolean       ;AccessByPermission=TableData 223=R;
                                                   CaptionML=[ENU=Drop Shipment;
                                                              NOR=Direkte levering;
                                                              SVE=Direktutleverans];
                                                   Editable=No }
    { 47  ;   ;Transaction Type    ;Code10        ;TableRelation="Transaction Type";
                                                   CaptionML=[ENU=Transaction Type;
                                                              NOR=Transaksjonsart;
                                                              SVE=EU transaktionstyp] }
    { 48  ;   ;Transport Method    ;Code10        ;TableRelation="Transport Method";
                                                   CaptionML=[ENU=Transport Method;
                                                              NOR=Transportm†te;
                                                              SVE=Transports„tt] }
    { 49  ;   ;Country/Region Code ;Code10        ;TableRelation=Country/Region;
                                                   CaptionML=[ENU=Country/Region Code;
                                                              NOR=Lands-/omr†dekode;
                                                              SVE=Lands-/regionkod] }
    { 50  ;   ;New Location Code   ;Code10        ;TableRelation=Location;
                                                   OnValidate=BEGIN
                                                                TESTFIELD("Entry Type","Entry Type"::Transfer);

                                                                CheckLocationBlocked("New Location Code"); //**4PS.n

                                                                IF "New Location Code" <> xRec."New Location Code" THEN BEGIN
                                                                  "New Bin Code" := '';
                                                                  IF ("New Location Code" <> '') AND ("Item No." <> '') THEN BEGIN
                                                                    GetLocation("New Location Code");
                                                                    IF Location."Bin Mandatory" AND NOT Location."Directed Put-away and Pick" THEN
                                                                      WMSManagement.GetDefaultBin("Item No.","Variant Code","New Location Code","New Bin Code");
                                                                  END;
                                                                END;

                                                                ReserveItemJnlLine.VerifyChange(Rec,xRec);

                                                                //**4PS.sn
                                                                IF "New Location Code" <> Location.Code THEN
                                                                  Location.GET("New Location Code");
                                                                IF Location."Global Dimension 1 Code" <> '' THEN  //db, 04-11-13: C009243
                                                                  IF "Job No." + "Service Order No." = '' THEN
                                                                    VALIDATE("New Shortcut Dimension 1 Code", Location."Global Dimension 1 Code");
                                                                //**4PS.en
                                                              END;

                                                   CaptionML=[ENU=New Location Code;
                                                              NOR=Ny lokasjonskode;
                                                              SVE=Ny lagerst„llekod] }
    { 51  ;   ;New Shortcut Dimension 1 Code;Code20;
                                                   TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(1));
                                                   OnValidate=BEGIN
                                                                TESTFIELD("Entry Type","Entry Type"::Transfer);
                                                                ValidateNewShortcutDimCode(1,"New Shortcut Dimension 1 Code");
                                                              END;

                                                   CaptionML=[ENU=New Shortcut Dimension 1 Code;
                                                              NOR=Ny snarveisdimensj. 1 - kode;
                                                              SVE=Ny genv„g dimension 1 kod];
                                                   CaptionClass='1,2,1,' + Text007 }
    { 52  ;   ;New Shortcut Dimension 2 Code;Code20;
                                                   TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(2),
                                                                                               Project Filter=FIELD(Job No.));
                                                   OnValidate=BEGIN
                                                                TESTFIELD("Entry Type","Entry Type"::Transfer);
                                                                ValidateNewShortcutDimCode(2,"New Shortcut Dimension 2 Code");
                                                              END;

                                                   CaptionML=[ENU=New Shortcut Dimension 2 Code;
                                                              NOR=Ny snarveisdimensj. 2 - kode;
                                                              SVE=Ny genv„g dimension 2 kod];
                                                   CaptionClass='1,2,2,' + Text007 }
    { 53  ;   ;Qty. (Calculated)   ;Decimal       ;OnValidate=BEGIN
                                                                VALIDATE("Qty. (Phys. Inventory)");
                                                              END;

                                                   CaptionML=[ENU=Qty. (Calculated);
                                                              NOR=Antall (beregnet);
                                                              SVE=Lagersaldo (ber„knat)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 54  ;   ;Qty. (Phys. Inventory);Decimal     ;OnValidate=BEGIN
                                                                TESTFIELD("Phys. Inventory",TRUE);

                                                                IF CurrFieldNo <> 0 THEN
                                                                  WMSManagement.CheckItemJnlLineFieldChange(Rec,xRec,FIELDCAPTION("Qty. (Phys. Inventory)"));

                                                                //**4PS.sn
                                                                IF CurrFieldNo = FIELDNO("Qty. (Phys. Inventory)") THEN
                                                                  IF "Qty. (Phys. Inventory)" < 0 THEN
                                                                    FIELDERROR("Qty. (Phys. Inventory)");  //db, 21-08-12: W013509
                                                                //**4PS.en

                                                                PhysInvtEntered := TRUE;
                                                                Quantity := 0;
                                                                IF "Qty. (Phys. Inventory)" >= "Qty. (Calculated)" THEN BEGIN
                                                                  VALIDATE("Entry Type","Entry Type"::"Positive Adjmt.");
                                                                  VALIDATE(Quantity,"Qty. (Phys. Inventory)" - "Qty. (Calculated)");
                                                                END ELSE BEGIN
                                                                  VALIDATE("Entry Type","Entry Type"::"Negative Adjmt.");
                                                                  VALIDATE(Quantity,"Qty. (Calculated)" - "Qty. (Phys. Inventory)");
                                                                END;
                                                                PhysInvtEntered := FALSE;
                                                              END;

                                                   CaptionML=[ENU=Qty. (Phys. Inventory);
                                                              NOR=Antall (opptalt);
                                                              SVE=Antal inventerat];
                                                   DecimalPlaces=0:5 }
    { 55  ;   ;Last Item Ledger Entry No.;Integer ;TableRelation="Item Ledger Entry";
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Last Item Ledger Entry No.;
                                                              NOR=Siste varepostnr.;
                                                              SVE=Senaste artikeltrans.l”pnr];
                                                   Editable=No }
    { 56  ;   ;Phys. Inventory     ;Boolean       ;CaptionML=[ENU=Phys. Inventory;
                                                              NOR=Vareopptelling;
                                                              SVE=Fr†n inventeringsjournal];
                                                   Editable=No }
    { 57  ;   ;Gen. Bus. Posting Group;Code20     ;TableRelation="Gen. Business Posting Group";
                                                   CaptionML=[ENU=Gen. Bus. Posting Group;
                                                              NOR=Bokf›ringsgruppe - firma;
                                                              SVE=Gen. r”relsebokf”ringsmall] }
    { 58  ;   ;Gen. Prod. Posting Group;Code20    ;TableRelation="Gen. Product Posting Group";
                                                   CaptionML=[ENU=Gen. Prod. Posting Group;
                                                              NOR=Bokf›ringsgruppe - vare;
                                                              SVE=Produktbokf”ringsmall] }
    { 59  ;   ;Entry/Exit Point    ;Code10        ;TableRelation="Entry/Exit Point";
                                                   CaptionML=[ENU=Entry/Exit Point;
                                                              NOR=Inn/Utpunkt;
                                                              SVE=In-/utf”rselplats] }
    { 60  ;   ;Document Date       ;Date          ;CaptionML=[ENU=Document Date;
                                                              NOR=Bilagsdato;
                                                              SVE=Dokumentdatum] }
    { 62  ;   ;External Document No.;Code35       ;CaptionML=[ENU=External Document No.;
                                                              NOR=Eksterndokumentnr.;
                                                              SVE=Externt dokumentnr] }
    { 63  ;   ;Area                ;Code10        ;TableRelation=Area;
                                                   CaptionML=[ENU=Area;
                                                              NOR=Omr†de;
                                                              SVE=Omr†de] }
    { 64  ;   ;Transaction Specification;Code10   ;TableRelation="Transaction Specification";
                                                   CaptionML=[ENU=Transaction Specification;
                                                              NOR=Transaksjonsspesifikasjon;
                                                              SVE=EU transaktionsspecifikation] }
    { 65  ;   ;Posting No. Series  ;Code20        ;TableRelation="No. Series";
                                                   CaptionML=[ENU=Posting No. Series;
                                                              NOR=Bokf›ringsnr.serie;
                                                              SVE=Bokf”ringsnr-serie] }
    { 68  ;   ;Reserved Quantity   ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Reservation Entry".Quantity WHERE (Source ID=FIELD(Journal Template Name),
                                                                                                       Source Ref. No.=FIELD(Line No.),
                                                                                                       Source Type=CONST(83),
                                                                                                       Source Subtype=FIELD(Entry Type),
                                                                                                       Source Batch Name=FIELD(Journal Batch Name),
                                                                                                       Source Prod. Order Line=CONST(0),
                                                                                                       Reservation Status=CONST(Reservation)));
                                                   AccessByPermission=TableData 120=R;
                                                   CaptionML=[ENU=Reserved Quantity;
                                                              NOR=Reservert antall;
                                                              SVE=Reserverat antal];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 72  ;   ;Unit Cost (ACY)     ;Decimal       ;CaptionML=[ENU=Unit Cost (ACY);
                                                              NOR=Enhetskost (t.val);
                                                              SVE=Styckkostnad (AVAL)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 73  ;   ;Source Currency Code;Code10        ;TableRelation=Currency;
                                                   AccessByPermission=TableData 223=R;
                                                   CaptionML=[ENU=Source Currency Code;
                                                              NOR=Kildevalutakode;
                                                              SVE=Ursprungsvalutakod];
                                                   Editable=No }
    { 79  ;   ;Document Type       ;Option        ;CaptionML=[ENU=Document Type;
                                                              NOR=Bilagstype;
                                                              SVE=Dokumenttyp];
                                                   OptionCaptionML=[ENU=" ,Sales Shipment,Sales Invoice,Sales Return Receipt,Sales Credit Memo,Purchase Receipt,Purchase Invoice,Purchase Return Shipment,Purchase Credit Memo,Transfer Shipment,Transfer Receipt,Service Shipment,Service Invoice,Service Credit Memo,Posted Assembly";
                                                                    NOR=" ,F›lgeseddel,Salgsfaktura,Salgsreturseddel,Salgskreditnota,Kj›psmottak,Kj›psfaktura,Bestillingsreturforsendelse,Kj›pskreditnota,Overf›ringsseddel,Overf›ringsmottak,Servicef›lgeseddel,Servicefaktura,Salgskreditnota (service),Bokf›rt montering";
                                                                    SVE=" ,Utleverans,F”rs„ljningsfaktura,F”rs„ljningsreturinleverans,F”rs„ljningskreditnota,Inleverans,Ink”psfaktura,Ink”psreturutleverans,Ink”pskreditnota,™verf”ringsleverans,™verf”ringsinleverans,Serviceutleverans,Servicefaktura,Servicekreditnota,Bokf”rd montering"];
                                                   OptionString=[ ,Sales Shipment,Sales Invoice,Sales Return Receipt,Sales Credit Memo,Purchase Receipt,Purchase Invoice,Purchase Return Shipment,Purchase Credit Memo,Transfer Shipment,Transfer Receipt,Service Shipment,Service Invoice,Service Credit Memo,Posted Assembly] }
    { 80  ;   ;Document Line No.   ;Integer       ;CaptionML=[ENU=Document Line No.;
                                                              NOR=Dokumentlinjenr.;
                                                              SVE=Dokumentradnr] }
    { 90  ;   ;Order Type          ;Option        ;OnValidate=BEGIN
                                                                IF "Order Type" = xRec."Order Type" THEN
                                                                  EXIT;
                                                                VALIDATE("Order No.",'');
                                                                "Order Line No." := 0;
                                                              END;

                                                   CaptionML=[ENU=Order Type;
                                                              NOR=Ordretype;
                                                              SVE=Ordertyp];
                                                   OptionCaptionML=[ENU=" ,Production,Transfer,Service,Assembly";
                                                                    NOR=" ,Produksjon,Overf›ring,Service,Montering";
                                                                    SVE=" ,Produktion,™verf”ring,Service,Montering"];
                                                   OptionString=[ ,Production,Transfer,Service,Assembly];
                                                   Editable=No }
    { 91  ;   ;Order No.           ;Code20        ;TableRelation=IF (Order Type=CONST(Production)) "Production Order".No. WHERE (Status=CONST(Released));
                                                   OnValidate=VAR
                                                                AssemblyHeader@1000 : Record 900;
                                                                ProdOrder@1001 : Record 5405;
                                                                ProdOrderLine@1002 : Record 5406;
                                                              BEGIN
                                                                CASE "Order Type" OF
                                                                  "Order Type"::Production,"Order Type"::Assembly:
                                                                    BEGIN
                                                                      IF "Order No." = '' THEN BEGIN
                                                                        CASE "Order Type" OF
                                                                          "Order Type"::Production:
                                                                            CreateProdDim;
                                                                          "Order Type"::Assembly:
                                                                            CreateAssemblyDim;
                                                                        END;
                                                                        EXIT;
                                                                      END;

                                                                      CASE "Order Type" OF
                                                                        "Order Type"::Production:
                                                                          BEGIN
                                                                            GetMfgSetup;
                                                                            IF MfgSetup."Doc. No. Is Prod. Order No." THEN
                                                                              "Document No." := "Order No.";
                                                                            ProdOrder.GET(ProdOrder.Status::Released,"Order No.");
                                                                            ProdOrder.TESTFIELD(Blocked,FALSE);
                                                                            Description := ProdOrder.Description;
                                                                            OnValidateOrderNoOrderTypeProduction(Rec,ProdOrder);
                                                                          END;
                                                                        "Order Type"::Assembly:
                                                                          BEGIN
                                                                            AssemblyHeader.GET(AssemblyHeader."Document Type"::Order,"Order No.");
                                                                            Description := AssemblyHeader.Description;
                                                                          END;
                                                                      END;

                                                                      "Gen. Bus. Posting Group" := ProdOrder."Gen. Bus. Posting Group";
                                                                      CASE TRUE OF
                                                                        "Entry Type" = "Entry Type"::Output:
                                                                          BEGIN
                                                                            "Inventory Posting Group" := ProdOrder."Inventory Posting Group";
                                                                            "Gen. Prod. Posting Group" := ProdOrder."Gen. Prod. Posting Group";
                                                                          END;
                                                                        "Entry Type" = "Entry Type"::"Assembly Output":
                                                                          BEGIN
                                                                            "Inventory Posting Group" := AssemblyHeader."Inventory Posting Group";
                                                                            "Gen. Prod. Posting Group" := AssemblyHeader."Gen. Prod. Posting Group";
                                                                          END;
                                                                        "Entry Type" = "Entry Type"::Consumption:
                                                                          BEGIN
                                                                            ProdOrderLine.SetFilterByReleasedOrderNo("Order No.");
                                                                            IF ProdOrderLine.COUNT = 1 THEN BEGIN
                                                                              ProdOrderLine.FINDFIRST;
                                                                              VALIDATE("Order Line No.",ProdOrderLine."Line No.");
                                                                            END;
                                                                          END;
                                                                      END;

                                                                      IF ("Order No." <> xRec."Order No.") OR ("Order Type" <> xRec."Order Type") THEN
                                                                        CASE "Order Type" OF
                                                                          "Order Type"::Production:
                                                                            CreateProdDim;
                                                                          "Order Type"::Assembly:
                                                                            CreateAssemblyDim;
                                                                        END;
                                                                    END;
                                                                  "Order Type"::Transfer,"Order Type"::Service,"Order Type"::" ":
                                                                    ERROR(Text002,FIELDCAPTION("Order No."),FIELDCAPTION("Order Type"),"Order Type");
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Order No.;
                                                              NOR=Ordrenr.;
                                                              SVE=Ordernr] }
    { 92  ;   ;Order Line No.      ;Integer       ;TableRelation=IF (Order Type=CONST(Production)) "Prod. Order Line"."Line No." WHERE (Status=CONST(Released),
                                                                                                                                        Prod. Order No.=FIELD(Order No.));
                                                   OnValidate=VAR
                                                                ProdOrderLine@1000 : Record 5406;
                                                              BEGIN
                                                                TESTFIELD("Order No.");
                                                                CASE "Order Type" OF
                                                                  "Order Type"::Production,"Order Type"::Assembly:
                                                                    BEGIN
                                                                      IF "Order Type" = "Order Type"::Production THEN BEGIN
                                                                        ProdOrderLine.SetFilterByReleasedOrderNo("Order No.");
                                                                        ProdOrderLine.SETRANGE("Line No.","Order Line No.");
                                                                        IF ProdOrderLine.FINDFIRST THEN BEGIN
                                                                          "Source Type" := "Source Type"::Item;
                                                                          "Source No." := ProdOrderLine."Item No.";
                                                                          "Order Line No." := ProdOrderLine."Line No.";
                                                                          "Routing No." := ProdOrderLine."Routing No.";
                                                                          "Routing Reference No." := ProdOrderLine."Routing Reference No.";
                                                                          IF "Entry Type" = "Entry Type"::Output THEN BEGIN
                                                                            "Location Code" := ProdOrderLine."Location Code";
                                                                            "Bin Code" := ProdOrderLine."Bin Code";
                                                                          END;
                                                                        END;
                                                                      END;

                                                                      IF "Order Line No." <> xRec."Order Line No." THEN
                                                                        CASE "Order Type" OF
                                                                          "Order Type"::Production:
                                                                            CreateProdDim;
                                                                          "Order Type"::Assembly:
                                                                            CreateAssemblyDim;
                                                                        END;
                                                                    END;
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Order Line No.;
                                                              NOR=Ordrelinjenr.;
                                                              SVE=Orderradnr] }
    { 480 ;   ;Dimension Set ID    ;Integer       ;TableRelation="Dimension Set Entry";
                                                   OnValidate=BEGIN
                                                                DimMgt.UpdateGlobalDimFromDimSetID("Dimension Set ID","Shortcut Dimension 1 Code","Shortcut Dimension 2 Code");
                                                              END;

                                                   OnLookup=BEGIN
                                                              ShowDimensions;
                                                            END;

                                                   CaptionML=[ENU=Dimension Set ID;
                                                              NOR=Dimensjonssett-ID;
                                                              SVE=Dimensionsupps„ttnings-ID];
                                                   Editable=No }
    { 481 ;   ;New Dimension Set ID;Integer       ;TableRelation="Dimension Set Entry";
                                                   OnLookup=BEGIN
                                                              ShowDimensions;
                                                            END;

                                                   CaptionML=[ENU=New Dimension Set ID;
                                                              NOR=Ny dimensjonssett-ID;
                                                              SVE=Nytt dimensionsupps„ttnings-ID];
                                                   Editable=No }
    { 904 ;   ;Assemble to Order   ;Boolean       ;CaptionML=[ENU=Assemble to Order;
                                                              NOR=Monter til ordre;
                                                              SVE=Montering mot kundorder];
                                                   Editable=No }
    { 1000;   ;Job No.             ;Code20        ;TableRelation=IF (Receiving Company=FILTER('')) Job.No.;
                                                   OnValidate=VAR
                                                                lvBlockingCodeRec@1100485000 : Record 11012027;
                                                              BEGIN
                                                                //**4PS
                                                                CheckItemEntrySales;

                                                                CheckCompanyIC;
                                                                IF "Job No." <> '' THEN BEGIN
                                                                  IF ("Entry Type" IN ["Entry Type"::"Positive Adjmt.", "Entry Type"::"Negative Adjmt."]) THEN
                                                                    TESTFIELD("Job No.",'');
                                                                  TESTFIELD("Plant Type",'');
                                                                  TESTFIELD("Delivery Account No.", '');
                                                                  TESTFIELD("To Plant Inventory", FALSE);
                                                                  ProjRec.GET("Job No.");
                                                                  "Main Project No." := ProjRec."Main Project";
                                                                  IF "Project Stock" THEN BEGIN
                                                                    InventorySetup.GET;
                                                                    IF NOT InventorySetup.JobInventoryByStockRelease("Job No.") THEN
                                                                      "Project Stock" := FALSE;
                                                                  END;
                                                                  IF(ProjRec."Blocking Code" <> '') AND
                                                                     ((ProjRec."Project Status" = ProjRec."Project Status"::"Technical Finished") OR
                                                                      (ProjRec."Project Status" = ProjRec."Project Status"::"Administrative Finished") OR
                                                                      ((ProjRec."Project Status" = ProjRec."Project Status"::Finished) AND ICProjSetupRec."Provisions at Closure")
                                                                     ) THEN
                                                                  BEGIN
                                                                    lvBlockingCodeRec.CheckBlocked(ProjRec."Blocking Code", lvBlockingCodeRec.Switch::"Stock Order", ProjRec, TRUE);
                                                                  END ELSE BEGIN
                                                                    IF (ICProjSetupRec."Provisions at Closure") THEN
                                                                      ProjRec.CheckProjectStatus(-1)
                                                                    ELSE
                                                                      ProjRec.CheckProjectStatus(1);
                                                                  END;
                                                                END ELSE BEGIN
                                                                  "Main Project No." := '';
                                                                  "Rental Unit" := '';
                                                                  IF "Project Stock" THEN
                                                                    "Project Stock" := FALSE;
                                                                END;

                                                                VALIDATE("Ship To Location");
                                                                VALIDATE(Element);

                                                                IF "Item No." <> '' THEN
                                                                  GetUnitPrice;

                                                                IF ("Shortcut Dimension 1 Code" <> '') AND ("Job No." <> '') AND
                                                                   (CurrFieldNo = FIELDNO("Job No.")) AND ("Job No." <> xRec."Job No.") THEN
                                                                  "Shortcut Dimension 1 Code" := '';

                                                                CreateDim(
                                                                  DATABASE::Job,"Job No.", //**4PS.n
                                                                  DATABASE::"Service Order","Service Order No.",   //** 4PS 09-06-2010
                                                                  DATABASE::Item,"Item No.",
                                                                  DATABASE::"Work Center","Work Center No.",
                                                                  DATABASE::"Salesperson/Purchaser","Salespers./Purch. Code",
                                                                  DATABASE::Location,"Location Code"); //**4PS.n

                                                                SetProjectStock; //**4PS.n

                                                                ClearEditableAssemYardNoFields; //**4PS.n

                                                                ReserveItemJnlLine.VerifyChange(Rec,xRec); //**4PS.n DP00121

                                                                //**4PS.sn C007769
                                                                IF ("Job No." <> xRec."Job No.") AND
                                                                   ("FSC Type Code" = '')
                                                                THEN
                                                                  FillDefaultFscType;
                                                                //**4PS.en
                                                              END;

                                                   OnLookup=VAR
                                                              PageNo@1100525000 : Integer;
                                                            BEGIN
                                                              //**4PS
                                                              CheckCompanyIC;
                                                              ProjRec."No." := "Job No.";
                                                              IF RefersToOtherCompany THEN
                                                                PageNo := PAGE::"Job List IC";
                                                              IF PAGE.RUNMODAL(PageNo, ProjRec) = ACTION::LookupOK THEN
                                                                IF ("Service Order No." = '') THEN
                                                                  VALIDATE("Job No.", ProjRec."No.");
                                                            END;

                                                   CaptionML=[ENU=Job No.;
                                                              NOR=Prosjektnr.;
                                                              SVE=Projektnr];
                                                   Description=4PS: Table Relation changed }
    { 1001;   ;Job Task No.        ;Code20        ;CaptionML=[ENU=Job Task No.;
                                                              NOR=Prosjektoppgavenr.;
                                                              SVE=Projektaktivitetsnr] }
    { 1002;   ;Job Purchase        ;Boolean       ;CaptionML=[ENU=Job Purchase;
                                                              NOR=Prosjektkj›p;
                                                              SVE=Projektink”p] }
    { 1030;   ;Job Contract Entry No.;Integer     ;CaptionML=[ENU=Job Contract Entry No.;
                                                              NOR=L›penr. for prosjektkontrakt;
                                                              SVE=L”pnr f”r projektkontrakt];
                                                   Editable=No }
    { 5402;   ;Variant Code        ;Code10        ;TableRelation="Item Variant".Code WHERE (Item No.=FIELD(Item No.));
                                                   OnValidate=BEGIN
                                                                IF "Entry Type" IN ["Entry Type"::Consumption,"Entry Type"::Output] THEN
                                                                  WhseValidateSourceLine.ItemLineVerifyChange(Rec,xRec);

                                                                IF "Variant Code" <> xRec."Variant Code" THEN BEGIN
                                                                  "Bin Code" := '';
                                                                  "Bin Code (Project Inventory)" := '';  //**4PS.n
                                                                  IF CurrFieldNo <> 0 THEN
                                                                    WMSManagement.CheckItemJnlLineFieldChange(Rec,xRec,FIELDCAPTION("Variant Code"));
                                                                  IF ("Location Code" <> '') AND ("Item No." <> '') THEN BEGIN
                                                                    GetLocation("Location Code");
                                                                    IF Location."Bin Mandatory" AND NOT Location."Directed Put-away and Pick" THEN
                                                                      WMSManagement.GetDefaultBin("Item No.","Variant Code","Location Code","Bin Code");
                                                                    CheckDefaultBin;  //**4PS.n (db, 02-11-10)
                                                                  END;
                                                                  IF ("Entry Type" = "Entry Type"::Transfer) AND ("Location Code" = "New Location Code") THEN
                                                                    "New Bin Code" := "Bin Code";
                                                                END;
                                                                IF ("Value Entry Type" = "Value Entry Type"::"Direct Cost") AND
                                                                   ("Item Charge No." = '')
                                                                THEN BEGIN
                                                                  GetUnitAmount(FIELDNO("Variant Code"));
                                                                  "Unit Cost" := UnitCost;
                                                                  VALIDATE("Unit Amount");
                                                                  VALIDATE("Unit of Measure Code");
                                                                  ReserveItemJnlLine.VerifyChange(Rec,xRec);
                                                                END;

                                                                IF "Variant Code" <> '' THEN BEGIN
                                                                  ItemVariant.GET("Item No.","Variant Code");
                                                                  Description := ItemVariant.Description;
                                                                END ELSE BEGIN
                                                                  GetItem;
                                                                  Description := Item.Description;
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Variant Code;
                                                              NOR=Variantkode;
                                                              SVE=Variantkod] }
    { 5403;   ;Bin Code            ;Code20        ;TableRelation=IF (Entry Type=FILTER(Purchase|Positive Adjmt.|Output),
                                                                     Quantity=FILTER(>=0)) Bin.Code WHERE (Location Code=FIELD(Location Code),
                                                                                                           Item Filter=FIELD(Item No.),
                                                                                                           Variant Filter=FIELD(Variant Code))
                                                                                                           ELSE IF (Entry Type=FILTER(Purchase|Positive Adjmt.|Output),
                                                                                                                    Quantity=FILTER(<0)) "Bin Content"."Bin Code" WHERE (Location Code=FIELD(Location Code),
                                                                                                                                                                         Item No.=FIELD(Item No.),
                                                                                                                                                                         Variant Code=FIELD(Variant Code))
                                                                                                                                                                         ELSE IF (Entry Type=FILTER(Sale|Negative Adjmt.|Transfer|Consumption),
                                                                                                                                                                                  Quantity=FILTER(>0)) "Bin Content"."Bin Code" WHERE (Location Code=FIELD(Location Code),
                                                                                                                                                                                                                                       Item No.=FIELD(Item No.),
                                                                                                                                                                                                                                       Variant Code=FIELD(Variant Code))
                                                                                                                                                                                                                                       ELSE IF (Entry Type=FILTER(Sale|Negative Adjmt.|Transfer|Consumption),
                                                                                                                                                                                                                                                Quantity=FILTER(<=0)) Bin.Code WHERE (Location Code=FIELD(Location Code),
                                                                                                                                                                                                                                                                                      Item Filter=FIELD(Item No.),
                                                                                                                                                                                                                                                                                      Variant Filter=FIELD(Variant Code));
                                                   OnValidate=VAR
                                                                ProdOrderComp@1001 : Record 5407;
                                                                WhseIntegrationMgt@1000 : Codeunit 7317;
                                                              BEGIN
                                                                IF "Bin Code" <> xRec."Bin Code" THEN BEGIN
                                                                  TESTFIELD("Location Code");
                                                                  IF "Bin Code" <> '' THEN BEGIN
                                                                    GetBin("Location Code","Bin Code");
                                                                    GetLocation("Location Code");
                                                                    Location.TESTFIELD("Bin Mandatory");
                                                                    IF CurrFieldNo <> 0 THEN
                                                                      WMSManagement.CheckItemJnlLineFieldChange(Rec,xRec,FIELDCAPTION("Bin Code"));
                                                                    TESTFIELD("Location Code",Bin."Location Code");
                                                                    WhseIntegrationMgt.CheckBinTypeCode(DATABASE::"Item Journal Line",
                                                                      FIELDCAPTION("Bin Code"),
                                                                      "Location Code",
                                                                      "Bin Code",
                                                                      "Entry Type");
                                                                  END;
                                                                  IF ("Entry Type" = "Entry Type"::Transfer) AND ("Location Code" = "New Location Code") THEN
                                                                    "New Bin Code" := "Bin Code";

                                                                  IF ("Entry Type" = "Entry Type"::Consumption) AND
                                                                     ("Bin Code" <> '') AND ("Prod. Order Comp. Line No." <> 0)
                                                                  THEN BEGIN
                                                                    TESTFIELD("Order Type","Order Type"::Production);
                                                                    TESTFIELD("Order No.");
                                                                    ProdOrderComp.GET(ProdOrderComp.Status::Released,"Order No.","Order Line No.","Prod. Order Comp. Line No.");
                                                                    IF (ProdOrderComp."Bin Code" <> '') AND (ProdOrderComp."Bin Code" <> "Bin Code") THEN
                                                                      IF NOT CONFIRM(
                                                                           Text021,
                                                                           FALSE,
                                                                           "Bin Code",
                                                                           ProdOrderComp."Bin Code",
                                                                           "Order No.")
                                                                      THEN
                                                                        ERROR(UpdateInterruptedErr);
                                                                  END;
                                                                END;

                                                                ReserveItemJnlLine.VerifyChange(Rec,xRec);
                                                              END;

                                                   CaptionML=[ENU=Bin Code;
                                                              NOR=Hyllekode;
                                                              SVE=Lagerplatskod] }
    { 5404;   ;Qty. per Unit of Measure;Decimal   ;InitValue=1;
                                                   CaptionML=[ENU=Qty. per Unit of Measure;
                                                              NOR=Antall per enhet;
                                                              SVE=Antal per enhet];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5406;   ;New Bin Code        ;Code20        ;TableRelation=Bin.Code WHERE (Location Code=FIELD(New Location Code),
                                                                                 Item Filter=FIELD(Item No.),
                                                                                 Variant Filter=FIELD(Variant Code));
                                                   OnValidate=VAR
                                                                WhseIntegrationMgt@1000 : Codeunit 7317;
                                                              BEGIN
                                                                TESTFIELD("Entry Type","Entry Type"::Transfer);
                                                                IF "New Bin Code" <> xRec."New Bin Code" THEN BEGIN
                                                                  TESTFIELD("New Location Code");
                                                                  IF "New Bin Code" <> '' THEN BEGIN
                                                                    GetBin("New Location Code","New Bin Code");
                                                                    GetLocation("New Location Code");
                                                                    Location.TESTFIELD("Bin Mandatory");
                                                                    IF CurrFieldNo <> 0 THEN
                                                                      WMSManagement.CheckItemJnlLineFieldChange(Rec,xRec,FIELDCAPTION("New Bin Code"));
                                                                    TESTFIELD("New Location Code",Bin."Location Code");
                                                                    WhseIntegrationMgt.CheckBinTypeCode(DATABASE::"Item Journal Line",
                                                                      FIELDCAPTION("New Bin Code"),
                                                                      "New Location Code",
                                                                      "New Bin Code",
                                                                      "Entry Type");
                                                                  END;
                                                                END;

                                                                ReserveItemJnlLine.VerifyChange(Rec,xRec);
                                                              END;

                                                   CaptionML=[ENU=New Bin Code;
                                                              NOR=Ny hyllekode;
                                                              SVE=Ny lagerplatskod] }
    { 5407;   ;Unit of Measure Code;Code10        ;TableRelation="Item Unit of Measure".Code WHERE (Item No.=FIELD(Item No.));
                                                   OnValidate=VAR
                                                                IsHandled@1000 : Boolean;
                                                              BEGIN
                                                                OnBeforeValidateUnitOfMeasureCode(Rec,IsHandled);
                                                                IF IsHandled THEN
                                                                  EXIT;

                                                                //**4PS.sn
                                                                IF CurrFieldNo = FIELDNO("Unit of Measure Code") THEN
                                                                  TESTFIELD("Production Order", '');
                                                                //**4PS.en

                                                                GetItem;
                                                                "Qty. per Unit of Measure" := UOMMgt.GetQtyPerUnitOfMeasure(Item,"Unit of Measure Code");

                                                                IF "Entry Type" IN ["Entry Type"::Consumption,"Entry Type"::Output] THEN
                                                                  WhseValidateSourceLine.ItemLineVerifyChange(Rec,xRec);
                                                                IF CurrFieldNo <> 0 THEN
                                                                  WMSManagement.CheckItemJnlLineFieldChange(Rec,xRec,FIELDCAPTION("Unit of Measure Code"));

                                                                GetUnitAmount(FIELDNO("Unit of Measure Code"));
                                                                IF "Value Entry Type" = "Value Entry Type"::Revaluation THEN
                                                                  TESTFIELD("Qty. per Unit of Measure",1);

                                                                ReadGLSetup;
                                                                IsHandled := FALSE;
                                                                OnValidateUnitOfMeasureCodeOnBeforeCalcUnitCost(Rec,UnitCost,IsHandled);
                                                                IF NOT IsHandled THEN
                                                                  "Unit Cost" := ROUND(UnitCost * "Qty. per Unit of Measure",GLSetup."Unit-Amount Rounding Precision");

                                                                IF "Entry Type" = "Entry Type"::Consumption THEN BEGIN
                                                                  "Indirect Cost %" := ROUND(Item."Indirect Cost %" * "Qty. per Unit of Measure",1);
                                                                  "Overhead Rate" :=
                                                                    ROUND(Item."Overhead Rate" * "Qty. per Unit of Measure",GLSetup."Unit-Amount Rounding Precision");
                                                                  "Unit Amount" := ROUND(UnitCost * "Qty. per Unit of Measure",GLSetup."Unit-Amount Rounding Precision");
                                                                END;

                                                                IF "No." <> '' THEN
                                                                  VALIDATE("Cap. Unit of Measure Code");

                                                                VALIDATE("Unit Amount");

                                                                IF "Entry Type" = "Entry Type"::Output THEN BEGIN
                                                                  VALIDATE("Output Quantity");
                                                                  VALIDATE("Scrap Quantity");
                                                                END ELSE
                                                                  VALIDATE(Quantity);

                                                                CheckItemAvailable(FIELDNO("Unit of Measure Code"));
                                                              END;

                                                   CaptionML=[ENU=Unit of Measure Code;
                                                              NOR=Enhetskode;
                                                              SVE=Enhetskod] }
    { 5408;   ;Derived from Blanket Order;Boolean ;CaptionML=[ENU=Derived from Blanket Order;
                                                              NOR=Stammer fra rammeordre;
                                                              SVE=H„mtad fr†n avropsorder];
                                                   Description=[4PS: Raam  -> Afroep  ];
                                                   Editable=No }
    { 5413;   ;Quantity (Base)     ;Decimal       ;OnValidate=BEGIN
                                                                TESTFIELD("Qty. per Unit of Measure",1);
                                                                VALIDATE(Quantity,"Quantity (Base)");
                                                              END;

                                                   CaptionML=[ENU=Quantity (Base);
                                                              NOR=Antall (lagerenhet);
                                                              SVE=Antal (bas)];
                                                   DecimalPlaces=0:5 }
    { 5415;   ;Invoiced Qty. (Base);Decimal       ;CaptionML=[ENU=Invoiced Qty. (Base);
                                                              NOR=Fakturert antall (lagerenhet);
                                                              SVE=Fakturerat antal (bas)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5468;   ;Reserved Qty. (Base);Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Reservation Entry"."Quantity (Base)" WHERE (Source ID=FIELD(Journal Template Name),
                                                                                                                Source Ref. No.=FIELD(Line No.),
                                                                                                                Source Type=CONST(83),
                                                                                                                Source Subtype=FIELD(Entry Type),
                                                                                                                Source Batch Name=FIELD(Journal Batch Name),
                                                                                                                Source Prod. Order Line=CONST(0),
                                                                                                                Reservation Status=CONST(Reservation)));
                                                   AccessByPermission=TableData 120=R;
                                                   CaptionML=[ENU=Reserved Qty. (Base);
                                                              NOR=Reservert antall (lagerenhet);
                                                              SVE=Reserverat antal (bas)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 5560;   ;Level               ;Integer       ;CaptionML=[ENU=Level;
                                                              NOR=Niv†;
                                                              SVE=Niv†];
                                                   Editable=No }
    { 5561;   ;Flushing Method     ;Option        ;CaptionML=[ENU=Flushing Method;
                                                              NOR=Trekkmetode;
                                                              SVE=Bokf”ringsmetod];
                                                   OptionCaptionML=[ENU=Manual,Forward,Backward,Pick + Forward,Pick + Backward;
                                                                    NOR=Manuell,Fremover,Bakover,Plukk + Fremover,Plukk + Bakover;
                                                                    SVE=Manuell,Fram†t,Bak†t,Plockning + fram†t,Plockning + bak†t];
                                                   OptionString=Manual,Forward,Backward,Pick + Forward,Pick + Backward;
                                                   Editable=No }
    { 5562;   ;Changed by User     ;Boolean       ;CaptionML=[ENU=Changed by User;
                                                              NOR=Endret av bruker;
                                                              SVE=Žndrad av anv„ndaren];
                                                   Editable=No }
    { 5700;   ;Cross-Reference No. ;Code20        ;CaptionML=[ENU=Cross-Reference No.;
                                                              NOR=Kryssreferansenr.;
                                                              SVE=Tv„rreferensnr] }
    { 5701;   ;Originally Ordered No.;Code20      ;TableRelation=Item;
                                                   AccessByPermission=TableData 5715=R;
                                                   CaptionML=[ENU=Originally Ordered No.;
                                                              NOR=Opprinnelig ordreant.;
                                                              SVE=Ursprungligen best„llt nr] }
    { 5702;   ;Originally Ordered Var. Code;Code10;TableRelation="Item Variant".Code WHERE (Item No.=FIELD(Originally Ordered No.));
                                                   AccessByPermission=TableData 5715=R;
                                                   CaptionML=[ENU=Originally Ordered Var. Code;
                                                              NOR=Opprin. best. variant - kode;
                                                              SVE=Ursprungligen best„llt var.kod] }
    { 5703;   ;Out-of-Stock Substitution;Boolean  ;CaptionML=[ENU=Out-of-Stock Substitution;
                                                              NOR=Tomt p† lager-erstatning;
                                                              SVE=Ej i lager ers„ttning] }
    { 5704;   ;Item Category Code  ;Code20        ;TableRelation="Item Category";
                                                   CaptionML=[ENU=Item Category Code;
                                                              NOR=Varekategorikode;
                                                              SVE=Artikelkategorikod] }
    { 5705;   ;Nonstock            ;Boolean       ;CaptionML=[ENU=Catalog;
                                                              NOR=Katalog;
                                                              SVE=Ej lagerf”rd] }
    { 5706;   ;Purchasing Code     ;Code10        ;TableRelation=Purchasing;
                                                   AccessByPermission=TableData 223=R;
                                                   CaptionML=[ENU=Purchasing Code;
                                                              NOR=Kj›pskode;
                                                              SVE=Ink”pskod] }
    { 5707;   ;Product Group Code  ;Code10        ;TableRelation="Product Group".Code WHERE (Item Category Code=FIELD(Item Category Code));
                                                   ValidateTableRelation=No;
                                                   ObsoleteState=Removed;
                                                   ObsoleteReason=Product Groups became first level children of Item Categories.;
                                                   CaptionML=[ENU=Product Group Code;
                                                              NOR=Produktgruppekode;
                                                              SVE=Produktgruppkod] }
    { 5791;   ;Planned Delivery Date;Date         ;CaptionML=[ENU=Planned Delivery Date;
                                                              NOR=Planlagt lev.dato;
                                                              SVE=Planerat leveransdatum] }
    { 5793;   ;Order Date          ;Date          ;CaptionML=[ENU=Order Date;
                                                              NOR=Bestillingsdato;
                                                              SVE=Orderdatum] }
    { 5800;   ;Value Entry Type    ;Option        ;CaptionML=[ENU=Value Entry Type;
                                                              NOR=Verdiposttype;
                                                              SVE=V„rdetrans.typ];
                                                   OptionCaptionML=[ENU=Direct Cost,Revaluation,Rounding,Indirect Cost,Variance;
                                                                    NOR=Direktekostn.,Revaluering,Avrunding,Indirekte kost,Avvik;
                                                                    SVE=Direkt kostnad,Omv„rdering,Avrundning,Indirekt kostnad,Varians];
                                                   OptionString=Direct Cost,Revaluation,Rounding,Indirect Cost,Variance }
    { 5801;   ;Item Charge No.     ;Code20        ;TableRelation="Item Charge";
                                                   CaptionML=[ENU=Item Charge No.;
                                                              NOR=Varegebyrnr.;
                                                              SVE=Art.omkost.nr] }
    { 5802;   ;Inventory Value (Calculated);Decimal;
                                                   OnValidate=BEGIN
                                                                ReadGLSetup;
                                                                "Unit Cost (Calculated)" :=
                                                                  ROUND("Inventory Value (Calculated)" / Quantity,GLSetup."Unit-Amount Rounding Precision");
                                                              END;

                                                   CaptionML=[ENU=Inventory Value (Calculated);
                                                              NOR=Lagerverdi (beregnet);
                                                              SVE=Lagerv„rde (ber„knat)];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 5803;   ;Inventory Value (Revalued);Decimal ;OnValidate=BEGIN
                                                                TESTFIELD("Value Entry Type","Value Entry Type"::Revaluation);
                                                                VALIDATE(Amount,"Inventory Value (Revalued)" - "Inventory Value (Calculated)");
                                                                ReadGLSetup;
                                                                IF ("Unit Cost (Revalued)" <> xRec."Unit Cost (Revalued)") OR
                                                                   ("Inventory Value (Revalued)" <> xRec."Inventory Value (Revalued)")
                                                                THEN BEGIN
                                                                  IF CurrFieldNo <> FIELDNO("Unit Cost (Revalued)") THEN
                                                                    "Unit Cost (Revalued)" :=
                                                                      ROUND("Inventory Value (Revalued)" / Quantity,GLSetup."Unit-Amount Rounding Precision");

                                                                  IF CurrFieldNo <> 0 THEN
                                                                    ClearSingleAndRolledUpCosts;
                                                                END
                                                              END;

                                                   CaptionML=[ENU=Inventory Value (Revalued);
                                                              NOR=Lagerverdi (revaluert);
                                                              SVE=Lagerv„rde (omv„rderad)];
                                                   MinValue=0;
                                                   AutoFormatType=1 }
    { 5804;   ;Variance Type       ;Option        ;CaptionML=[ENU=Variance Type;
                                                              NOR=Avvikstype;
                                                              SVE=Varianstyp];
                                                   OptionCaptionML=[ENU=" ,Purchase,Material,Capacity,Capacity Overhead,Manufacturing Overhead";
                                                                    NOR=" ,Kj›p,Material,Kapasitet,Indirekte kap.kostn,Indirekte prod.kostn.";
                                                                    SVE=" ,Ink”p,Material,Kapacitet,Kapacitetsomkostnader,Produktionsomkostnader"];
                                                   OptionString=[ ,Purchase,Material,Capacity,Capacity Overhead,Manufacturing Overhead] }
    { 5805;   ;Inventory Value Per ;Option        ;CaptionML=[ENU=Inventory Value Per;
                                                              NOR=Lagerverdi per;
                                                              SVE=Lagerv„rde per];
                                                   OptionCaptionML=[ENU=" ,Item,Location,Variant,Location and Variant";
                                                                    NOR=" ,Vare,Lokasjon,Variant,Lokasjon og variant";
                                                                    SVE=" ,Artikel,Lagerst„lle,Variant,Lagerst„lle och variant"];
                                                   OptionString=[ ,Item,Location,Variant,Location and Variant];
                                                   Editable=No }
    { 5806;   ;Partial Revaluation ;Boolean       ;CaptionML=[ENU=Partial Revaluation;
                                                              NOR=Delvis revaluering;
                                                              SVE=Delomv„rdering];
                                                   Editable=No }
    { 5807;   ;Applies-from Entry  ;Integer       ;OnValidate=VAR
                                                                ItemLedgEntry@1000 : Record 32;
                                                                ItemTrackingLines@1001 : Page 6510;
                                                              BEGIN
                                                                IF "Applies-from Entry" <> 0 THEN BEGIN
                                                                  TESTFIELD(Quantity);
                                                                  IF Signed(Quantity) < 0 THEN BEGIN
                                                                    IF Quantity > 0 THEN
                                                                      FIELDERROR(Quantity,Text030);
                                                                    IF Quantity < 0 THEN
                                                                      FIELDERROR(Quantity,Text029);
                                                                  END;
                                                                  ItemLedgEntry.GET("Applies-from Entry");
                                                                  ItemLedgEntry.TESTFIELD(Positive,FALSE);
                                                                  IF ItemLedgEntry.TrackingExists THEN
                                                                    ERROR(Text033,FIELDCAPTION("Applies-from Entry"),ItemTrackingLines.CAPTION);
                                                                  "Unit Cost" := CalcUnitCost(ItemLedgEntry);
                                                                END;
                                                              END;

                                                   OnLookup=BEGIN
                                                              SelectItemEntry(FIELDNO("Applies-from Entry"));
                                                            END;

                                                   CaptionML=[ENU=Applies-from Entry;
                                                              NOR=Utlignet fra-post;
                                                              SVE=Kopplas fr†n l”pnr];
                                                   MinValue=0 }
    { 5808;   ;Invoice No.         ;Code20        ;CaptionML=[ENU=Invoice No.;
                                                              NOR=Fakturanr.;
                                                              SVE=Fakturanr] }
    { 5809;   ;Unit Cost (Calculated);Decimal     ;OnValidate=BEGIN
                                                                TESTFIELD("Value Entry Type","Value Entry Type"::Revaluation);
                                                              END;

                                                   CaptionML=[ENU=Unit Cost (Calculated);
                                                              NOR=Enhetskost (beregnet);
                                                              SVE=Styckkostnad (ber„knad)];
                                                   Editable=No;
                                                   AutoFormatType=2 }
    { 5810;   ;Unit Cost (Revalued);Decimal       ;OnValidate=BEGIN
                                                                ReadGLSetup;
                                                                TESTFIELD("Value Entry Type","Value Entry Type"::Revaluation);
                                                                //IF "Unit Cost (Revalued)" <> xRec."Unit Cost (Revalued)" THEN //**4PS.o call 20008
                                                                  VALIDATE(
                                                                    "Inventory Value (Revalued)",
                                                                    ROUND(
                                                                      "Unit Cost (Revalued)" * Quantity,GLSetup."Amount Rounding Precision"));
                                                              END;

                                                   CaptionML=[ENU=Unit Cost (Revalued);
                                                              NOR=Enhetskost (revaluert);
                                                              SVE=Styckkostnad (omv„rderad)];
                                                   MinValue=0;
                                                   AutoFormatType=2 }
    { 5811;   ;Applied Amount      ;Decimal       ;CaptionML=[ENU=Applied Amount;
                                                              NOR=Utlignet bel›p;
                                                              SVE=Kopplat belopp];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 5812;   ;Update Standard Cost;Boolean       ;OnValidate=BEGIN
                                                                TESTFIELD("Inventory Value Per");
                                                                GetItem;
                                                                Item.TESTFIELD("Costing Method",Item."Costing Method"::Standard);
                                                              END;

                                                   CaptionML=[ENU=Update Standard Cost;
                                                              NOR=Oppdater standardkost;
                                                              SVE=Uppdatera standardkostnad] }
    { 5813;   ;Amount (ACY)        ;Decimal       ;CaptionML=[ENU=Amount (ACY);
                                                              NOR=Bel›p (till.val);
                                                              SVE=Belopp (AVAL)];
                                                   AutoFormatType=1 }
    { 5817;   ;Correction          ;Boolean       ;CaptionML=[ENU=Correction;
                                                              NOR=Korreksjon;
                                                              SVE=R„ttningstransaktion] }
    { 5818;   ;Adjustment          ;Boolean       ;CaptionML=[ENU=Adjustment;
                                                              NOR=Justering;
                                                              SVE=Justering] }
    { 5819;   ;Applies-to Value Entry;Integer     ;CaptionML=[ENU=Applies-to Value Entry;
                                                              NOR=Utligningsverdipost;
                                                              SVE=Kopplas till v„rdetrans.] }
    { 5820;   ;Invoice-to Source No.;Code20       ;TableRelation=IF (Source Type=CONST(Customer)) Customer
                                                                 ELSE IF (Source Type=CONST(Vendor)) Vendor;
                                                   CaptionML=[ENU=Invoice-to Source No.;
                                                              NOR=Faktura til-kildenr.;
                                                              SVE=Fakturera till ursprungsnr] }
    { 5830;   ;Type                ;Option        ;OnValidate=BEGIN
                                                                IF Type = Type::Resource THEN
                                                                  TESTFIELD("Entry Type","Entry Type"::"Assembly Output")
                                                                ELSE
                                                                  TESTFIELD("Entry Type","Entry Type"::Output);
                                                                VALIDATE("No.",'');
                                                              END;

                                                   AccessByPermission=TableData 99000758=R;
                                                   CaptionML=[ENU=Type;
                                                              NOR=Type;
                                                              SVE=Radtyp];
                                                   OptionCaptionML=[ENU=Work Center,Machine Center, ,Resource;
                                                                    NOR=Arbeidssenter,Maskinsenter, ,Ressurs;
                                                                    SVE=Produktionsgrupp,Maskingrupp, ,Resurs];
                                                   OptionString=Work Center,Machine Center, ,Resource }
    { 5831;   ;No.                 ;Code20        ;TableRelation=IF (Type=CONST(Machine Center)) "Machine Center"
                                                                 ELSE IF (Type=CONST(Work Center)) "Work Center"
                                                                 ELSE IF (Type=CONST(Resource)) Resource;
                                                   OnValidate=VAR
                                                                Resource@1000 : Record 156;
                                                              BEGIN
                                                                IF Type = Type::Resource THEN
                                                                  TESTFIELD("Entry Type","Entry Type"::"Assembly Output")
                                                                ELSE
                                                                  TESTFIELD("Entry Type","Entry Type"::Output);
                                                                IF "No." = '' THEN BEGIN
                                                                  "Work Center No." := '';
                                                                  "Work Center Group Code" := '';
                                                                  VALIDATE("Item No.");

                                                                  IF Type IN [Type::"Work Center",Type::"Machine Center"] THEN
                                                                    CreateDimWithProdOrderLine
                                                                  ELSE
                                                                    CreateDim(
                                                                      DATABASE::"Work Center","Work Center No.",
                                                                      DATABASE::Job,"Job No.", //**4PS.n
                                                                      DATABASE::"Service Order","Service Order No.",   //** 4PS 09-06-2010
                                                                      DATABASE::Item,"Item No.",
                                                                      DATABASE::"Salesperson/Purchaser","Salespers./Purch. Code",
                                                                      DATABASE::Location,"Location Code"); //**4PS.n
                                                                  EXIT;
                                                                END;

                                                                CASE Type OF
                                                                  Type::"Work Center":
                                                                    BEGIN
                                                                      WorkCenter.GET("No.");
                                                                      WorkCenter.TESTFIELD(Blocked,FALSE);
                                                                      CopyFromWorkCenter(WorkCenter);
                                                                    END;
                                                                  Type::"Machine Center":
                                                                    BEGIN
                                                                      MachineCenter.GET("No.");
                                                                      MachineCenter.TESTFIELD(Blocked,FALSE);
                                                                      WorkCenter.GET(MachineCenter."Work Center No.");
                                                                      WorkCenter.TESTFIELD(Blocked,FALSE);
                                                                      CopyFromMachineCenter(MachineCenter);
                                                                    END;
                                                                  Type::Resource:
                                                                    BEGIN
                                                                      Resource.GET("No.");
                                                                      Resource.CheckResourcePrivacyBlocked(FALSE);
                                                                      Resource.TESTFIELD(Blocked,FALSE);
                                                                    END;
                                                                END;

                                                                IF Type IN [Type::"Work Center",Type::"Machine Center"] THEN BEGIN
                                                                  "Work Center No." := WorkCenter."No.";
                                                                  "Work Center Group Code" := WorkCenter."Work Center Group Code";
                                                                  VALIDATE("Cap. Unit of Measure Code",WorkCenter."Unit of Measure Code");
                                                                END;

                                                                IF "Work Center No." <> '' THEN
                                                                  CreateDimWithProdOrderLine;
                                                              END;

                                                   CaptionML=[ENU=No.;
                                                              NOR=Nr.;
                                                              SVE=Nr] }
    { 5838;   ;Operation No.       ;Code10        ;TableRelation=IF (Order Type=CONST(Production)) "Prod. Order Routing Line"."Operation No." WHERE (Status=CONST(Released),
                                                                                                                                                     Prod. Order No.=FIELD(Order No.),
                                                                                                                                                     Routing No.=FIELD(Routing No.),
                                                                                                                                                     Routing Reference No.=FIELD(Routing Reference No.));
                                                   OnValidate=VAR
                                                                ProdOrderRtngLine@1000 : Record 5409;
                                                              BEGIN
                                                                TESTFIELD("Entry Type","Entry Type"::Output);
                                                                IF "Operation No." = '' THEN
                                                                  EXIT;

                                                                TESTFIELD("Order Type","Order Type"::Production);
                                                                TESTFIELD("Order No.");
                                                                TESTFIELD("Item No.");

                                                                ConfirmOutputOnFinishedOperation;
                                                                GetProdOrderRtngLine(ProdOrderRtngLine);

                                                                CASE ProdOrderRtngLine.Type OF
                                                                  ProdOrderRtngLine.Type::"Work Center":
                                                                    Type := Type::"Work Center";
                                                                  ProdOrderRtngLine.Type::"Machine Center":
                                                                    Type := Type::"Machine Center";
                                                                END;
                                                                VALIDATE("No.",ProdOrderRtngLine."No.");
                                                                Description := ProdOrderRtngLine.Description;
                                                              END;

                                                   CaptionML=[ENU=Operation No.;
                                                              NOR=Operasjonsnr.;
                                                              SVE=Operationsnr] }
    { 5839;   ;Work Center No.     ;Code20        ;TableRelation="Work Center";
                                                   CaptionML=[ENU=Work Center No.;
                                                              NOR=Arbeidssenternr.;
                                                              SVE=Produktionsgruppsnr];
                                                   Editable=No }
    { 5841;   ;Setup Time          ;Decimal       ;OnValidate=BEGIN
                                                                IF SubcontractingWorkCenterUsed AND ("Setup Time" <> 0) THEN
                                                                  ERROR(SubcontractedErr,FIELDCAPTION("Setup Time"),"Line No.");
                                                                "Setup Time (Base)" := CalcBaseTime("Setup Time");
                                                              END;

                                                   AccessByPermission=TableData 99000758=R;
                                                   CaptionML=[ENU=Setup Time;
                                                              NOR=Oppstillingstid;
                                                              SVE=Omst„llningstid];
                                                   DecimalPlaces=0:5 }
    { 5842;   ;Run Time            ;Decimal       ;OnValidate=BEGIN
                                                                IF SubcontractingWorkCenterUsed AND ("Run Time" <> 0) THEN
                                                                  ERROR(SubcontractedErr,FIELDCAPTION("Run Time"),"Line No.");

                                                                "Run Time (Base)" := CalcBaseTime("Run Time");
                                                              END;

                                                   AccessByPermission=TableData 99000758=R;
                                                   CaptionML=[ENU=Run Time;
                                                              NOR=Operasjonstid;
                                                              SVE=Bearbetningstid];
                                                   DecimalPlaces=0:5 }
    { 5843;   ;Stop Time           ;Decimal       ;OnValidate=BEGIN
                                                                "Stop Time (Base)" := CalcBaseTime("Stop Time");
                                                              END;

                                                   AccessByPermission=TableData 99000758=R;
                                                   CaptionML=[ENU=Stop Time;
                                                              NOR=Stopptid;
                                                              SVE=Stopptid];
                                                   DecimalPlaces=0:5 }
    { 5846;   ;Output Quantity     ;Decimal       ;OnValidate=BEGIN
                                                                TESTFIELD("Entry Type","Entry Type"::Output);
                                                                IF SubcontractingWorkCenterUsed AND ("Output Quantity" <> 0) THEN
                                                                  ERROR(SubcontractedErr,FIELDCAPTION("Output Quantity"),"Line No.");

                                                                ConfirmOutputOnFinishedOperation;

                                                                IF LastOutputOperation(Rec) THEN
                                                                  WhseValidateSourceLine.ItemLineVerifyChange(Rec,xRec);

                                                                "Output Quantity (Base)" := UOMMgt.CalcBaseQty("Output Quantity","Qty. per Unit of Measure");

                                                                VALIDATE(Quantity,"Output Quantity");
                                                              END;

                                                   AccessByPermission=TableData 99000758=R;
                                                   CaptionML=[ENU=Output Quantity;
                                                              NOR=Avgangsantall;
                                                              SVE=Utfl”de antal];
                                                   DecimalPlaces=0:5 }
    { 5847;   ;Scrap Quantity      ;Decimal       ;OnValidate=BEGIN
                                                                TESTFIELD("Entry Type","Entry Type"::Output);
                                                                "Scrap Quantity (Base)" := UOMMgt.CalcBaseQty("Scrap Quantity","Qty. per Unit of Measure");
                                                              END;

                                                   AccessByPermission=TableData 99000758=R;
                                                   CaptionML=[ENU=Scrap Quantity;
                                                              NOR=Vrakantall;
                                                              SVE=Kassationsantal];
                                                   DecimalPlaces=0:5 }
    { 5849;   ;Concurrent Capacity ;Decimal       ;OnValidate=VAR
                                                                TotalTime@1000 : Integer;
                                                              BEGIN
                                                                TESTFIELD("Entry Type","Entry Type"::Output);
                                                                IF "Concurrent Capacity" = 0 THEN
                                                                  EXIT;

                                                                TESTFIELD("Starting Time");
                                                                TESTFIELD("Ending Time");
                                                                TotalTime := CalendarMgt.CalcTimeDelta("Ending Time","Starting Time");
                                                                IF "Ending Time" < "Starting Time" THEN
                                                                  TotalTime := TotalTime + 86400000;
                                                                TESTFIELD("Work Center No.");
                                                                WorkCenter.GET("Work Center No.");
                                                                VALIDATE("Setup Time",0);
                                                                VALIDATE(
                                                                  "Run Time",
                                                                  ROUND(
                                                                    TotalTime / CalendarMgt.TimeFactor("Cap. Unit of Measure Code") *
                                                                    "Concurrent Capacity",WorkCenter."Calendar Rounding Precision"));
                                                              END;

                                                   AccessByPermission=TableData 99000758=R;
                                                   CaptionML=[ENU=Concurrent Capacity;
                                                              NOR=Samtidig kapasitet;
                                                              SVE=Samtidig kapacitet];
                                                   DecimalPlaces=0:5 }
    { 5851;   ;Setup Time (Base)   ;Decimal       ;OnValidate=BEGIN
                                                                TESTFIELD("Qty. per Cap. Unit of Measure",1);
                                                                VALIDATE("Setup Time","Setup Time (Base)");
                                                              END;

                                                   CaptionML=[ENU=Setup Time (Base);
                                                              NOR=Oppstillingstid (l.enh);
                                                              SVE=Omst„llningstid (bas)];
                                                   DecimalPlaces=0:5 }
    { 5852;   ;Run Time (Base)     ;Decimal       ;OnValidate=BEGIN
                                                                TESTFIELD("Qty. per Cap. Unit of Measure",1);
                                                                VALIDATE("Run Time","Run Time (Base)");
                                                              END;

                                                   CaptionML=[ENU=Run Time (Base);
                                                              NOR=Operasjonstid (l.enh);
                                                              SVE=Bearbetningstid (bas)];
                                                   DecimalPlaces=0:5 }
    { 5853;   ;Stop Time (Base)    ;Decimal       ;OnValidate=BEGIN
                                                                TESTFIELD("Qty. per Cap. Unit of Measure",1);
                                                                VALIDATE("Stop Time","Stop Time (Base)");
                                                              END;

                                                   CaptionML=[ENU=Stop Time (Base);
                                                              NOR=Stopptid (l.enh);
                                                              SVE=Stopptid (bas)];
                                                   DecimalPlaces=0:5 }
    { 5856;   ;Output Quantity (Base);Decimal     ;OnValidate=BEGIN
                                                                TESTFIELD("Qty. per Unit of Measure",1);
                                                                VALIDATE("Output Quantity","Output Quantity (Base)");
                                                              END;

                                                   CaptionML=[ENU=Output Quantity (Base);
                                                              NOR=Avgangsantall (l.enh);
                                                              SVE=Utfl”de antal (bas)];
                                                   DecimalPlaces=0:5 }
    { 5857;   ;Scrap Quantity (Base);Decimal      ;OnValidate=BEGIN
                                                                TESTFIELD("Qty. per Unit of Measure",1);
                                                                VALIDATE("Scrap Quantity","Scrap Quantity (Base)");
                                                              END;

                                                   CaptionML=[ENU=Scrap Quantity (Base);
                                                              NOR=Vrakantall (l.enh);
                                                              SVE=Kassationsantal (bas)];
                                                   DecimalPlaces=0:5 }
    { 5858;   ;Cap. Unit of Measure Code;Code10   ;TableRelation=IF (Type=CONST(Resource)) "Resource Unit of Measure".Code WHERE (Resource No.=FIELD(No.))
                                                                 ELSE "Capacity Unit of Measure";
                                                   OnValidate=VAR
                                                                ProdOrderRtngLine@1000 : Record 5409;
                                                              BEGIN
                                                                IF Type <> Type::Resource THEN BEGIN
                                                                  "Qty. per Cap. Unit of Measure" :=
                                                                    ROUND(
                                                                      CalendarMgt.QtyperTimeUnitofMeasure(
                                                                        "Work Center No.","Cap. Unit of Measure Code"),
                                                                      UOMMgt.QtyRndPrecision);

                                                                  VALIDATE("Setup Time");
                                                                  VALIDATE("Run Time");
                                                                  VALIDATE("Stop Time");
                                                                END;

                                                                IF "Order No." <> '' THEN
                                                                  CASE "Order Type" OF
                                                                    "Order Type"::Production:
                                                                      BEGIN
                                                                        GetProdOrderRtngLine(ProdOrderRtngLine);
                                                                        "Unit Cost" := ProdOrderRtngLine."Unit Cost per";

                                                                        CostCalcMgt.RoutingCostPerUnit(
                                                                          Type,"No.","Unit Amount","Indirect Cost %","Overhead Rate","Unit Cost","Unit Cost Calculation");
                                                                      END;
                                                                    "Order Type"::Assembly:
                                                                      CostCalcMgt.ResourceCostPerUnit("No.","Unit Amount","Indirect Cost %","Overhead Rate","Unit Cost");
                                                                  END;

                                                                ReadGLSetup;
                                                                "Unit Cost" :=
                                                                  ROUND("Unit Cost" * "Qty. per Cap. Unit of Measure",GLSetup."Unit-Amount Rounding Precision");
                                                                "Unit Amount" :=
                                                                  ROUND("Unit Amount" * "Qty. per Cap. Unit of Measure",GLSetup."Unit-Amount Rounding Precision");
                                                                VALIDATE("Unit Amount");
                                                              END;

                                                   CaptionML=[ENU=Cap. Unit of Measure Code;
                                                              NOR=Kapasitetsenhetskode;
                                                              SVE=Kap. enhetskod] }
    { 5859;   ;Qty. per Cap. Unit of Measure;Decimal;
                                                   CaptionML=[ENU=Qty. per Cap. Unit of Measure;
                                                              NOR=Ant. per kapasitetsenhet;
                                                              SVE=Antal per kapacitetsenhet];
                                                   DecimalPlaces=0:5 }
    { 5873;   ;Starting Time       ;Time          ;OnValidate=BEGIN
                                                                IF "Ending Time" < "Starting Time" THEN
                                                                  "Ending Time" := "Starting Time";

                                                                VALIDATE("Concurrent Capacity");
                                                              END;

                                                   AccessByPermission=TableData 99000758=R;
                                                   CaptionML=[ENU=Starting Time;
                                                              NOR=Starttidspunkt;
                                                              SVE=Starttid] }
    { 5874;   ;Ending Time         ;Time          ;OnValidate=BEGIN
                                                                VALIDATE("Concurrent Capacity");
                                                              END;

                                                   AccessByPermission=TableData 99000758=R;
                                                   CaptionML=[ENU=Ending Time;
                                                              NOR=Sluttidspunkt;
                                                              SVE=Sluttid] }
    { 5882;   ;Routing No.         ;Code20        ;TableRelation="Routing Header";
                                                   CaptionML=[ENU=Routing No.;
                                                              NOR=Rutenr.;
                                                              SVE=Operationsf”ljdsnr];
                                                   Editable=No }
    { 5883;   ;Routing Reference No.;Integer      ;CaptionML=[ENU=Routing Reference No.;
                                                              NOR=Rutereferansenr.;
                                                              SVE=Oper.f”ljd referensnr] }
    { 5884;   ;Prod. Order Comp. Line No.;Integer ;TableRelation=IF (Order Type=CONST(Production)) "Prod. Order Component"."Line No." WHERE (Status=CONST(Released),
                                                                                                                                             Prod. Order No.=FIELD(Order No.),
                                                                                                                                             Prod. Order Line No.=FIELD(Order Line No.));
                                                   OnValidate=BEGIN
                                                                IF "Prod. Order Comp. Line No." <> xRec."Prod. Order Comp. Line No." THEN
                                                                  CreateProdDim;
                                                              END;

                                                   CaptionML=[ENU=Prod. Order Comp. Line No.;
                                                              NOR=Prod.ordrekomp.linjenr.;
                                                              SVE=Prod.orderkomp.radnr] }
    { 5885;   ;Finished            ;Boolean       ;AccessByPermission=TableData 99000758=R;
                                                   CaptionML=[ENU=Finished;
                                                              NOR=Ferdig;
                                                              SVE=Avslutad] }
    { 5887;   ;Unit Cost Calculation;Option       ;CaptionML=[ENU=Unit Cost Calculation;
                                                              NOR=Beregning av enhetskost;
                                                              SVE=Styckkost. ber„kningstyp];
                                                   OptionCaptionML=[ENU=Time,Units;
                                                                    NOR=Tid,Enheter;
                                                                    SVE=Tid,Antal];
                                                   OptionString=Time,Units }
    { 5888;   ;Subcontracting      ;Boolean       ;CaptionML=[ENU=Subcontracting;
                                                              NOR=Underleveranse;
                                                              SVE=Underentreprenad] }
    { 5895;   ;Stop Code           ;Code10        ;TableRelation=Stop;
                                                   CaptionML=[ENU=Stop Code;
                                                              NOR=Stoppkode;
                                                              SVE=Stoppkod] }
    { 5896;   ;Scrap Code          ;Code10        ;TableRelation=Scrap;
                                                   OnValidate=VAR
                                                                IsHandled@1000 : Boolean;
                                                              BEGIN
                                                                IsHandled := FALSE;
                                                                OnBeforeValidateScrapCode(Rec,IsHandled);
                                                                IF IsHandled THEN
                                                                  EXIT;

                                                                TESTFIELD(Type,Type::"Machine Center");
                                                              END;

                                                   CaptionML=[ENU=Scrap Code;
                                                              NOR=Vrakkode;
                                                              SVE=Kassationskod] }
    { 5898;   ;Work Center Group Code;Code10      ;TableRelation="Work Center Group";
                                                   CaptionML=[ENU=Work Center Group Code;
                                                              NOR=Arbeidssentergruppekode;
                                                              SVE=Produktionsavd.kod];
                                                   Editable=No }
    { 5899;   ;Work Shift Code     ;Code10        ;TableRelation="Work Shift";
                                                   CaptionML=[ENU=Work Shift Code;
                                                              NOR=Arbeidsskiftkode;
                                                              SVE=Arbetsskiftskod] }
    { 6500;   ;Serial No.          ;Code50        ;CaptionML=[ENU=Serial No.;
                                                              NOR=Serienr.;
                                                              SVE=Serienr];
                                                   Editable=No }
    { 6501;   ;Lot No.             ;Code50        ;CaptionML=[ENU=Lot No.;
                                                              NOR=Partinr.;
                                                              SVE=Partinr];
                                                   Editable=No }
    { 6502;   ;Warranty Date       ;Date          ;CaptionML=[ENU=Warranty Date;
                                                              NOR=Garantidato;
                                                              SVE=Garantidatum];
                                                   Editable=No }
    { 6503;   ;New Serial No.      ;Code50        ;CaptionML=[ENU=New Serial No.;
                                                              NOR=Nytt serienr.;
                                                              SVE=Nytt serienr];
                                                   Editable=No }
    { 6504;   ;New Lot No.         ;Code50        ;CaptionML=[ENU=New Lot No.;
                                                              NOR=Nytt partinr.;
                                                              SVE=Nytt partinr];
                                                   Editable=No }
    { 6505;   ;New Item Expiration Date;Date      ;CaptionML=[ENU=New Item Expiration Date;
                                                              NOR=Ny vareholdbarhetsdato;
                                                              SVE=Nytt utg†ngsdatum artikel] }
    { 6506;   ;Item Expiration Date;Date          ;CaptionML=[ENU=Item Expiration Date;
                                                              NOR=Vareholdbarhetsdato;
                                                              SVE=Utg†ngsdatum artikel];
                                                   Editable=No }
    { 6600;   ;Return Reason Code  ;Code10        ;TableRelation="Return Reason";
                                                   CaptionML=[ENU=Return Reason Code;
                                                              NOR=Retur†rsakskode;
                                                              SVE=Returorsakskod] }
    { 7315;   ;Warehouse Adjustment;Boolean       ;CaptionML=[ENU=Warehouse Adjustment;
                                                              NOR=Lagerjustering;
                                                              SVE=Justerat dist.lager] }
    { 7316;   ;Direct Transfer     ;Boolean       ;DataClassification=SystemMetadata;
                                                   CaptionML=[ENU=Direct Transfer;
                                                              NOR=Direkte overf›ring] }
    { 7380;   ;Phys Invt Counting Period Code;Code10;
                                                   TableRelation="Phys. Invt. Counting Period";
                                                   CaptionML=[ENU=Phys Invt Counting Period Code;
                                                              NOR=Vareopptell.periode - kode;
                                                              SVE=Inventering cyklisk inv.period kod];
                                                   Editable=No }
    { 7381;   ;Phys Invt Counting Period Type;Option;
                                                   CaptionML=[ENU=Phys Invt Counting Period Type;
                                                              NOR=Type vareopptellingsperiode;
                                                              SVE=Inventering cyklisk inv.period typ];
                                                   OptionCaptionML=[ENU=" ,Item,SKU";
                                                                    NOR=" ,Vare,LFE";
                                                                    SVE=" ,Artikel,Lagerst„lleenhet"];
                                                   OptionString=[ ,Item,SKU];
                                                   Editable=No }
    { 11012000;;Service Order No.  ;Code20        ;TableRelation=IF (Receiving Company=FILTER('')) "Service Order".No.;
                                                   OnValidate=BEGIN
                                                                //**4PS
                                                                IF "Service Order No." = '' THEN BEGIN
                                                                  "Service Location No." := '';
                                                                  "Service Contract No." := '';
                                                                  "Service Control Year" := 0;
                                                                  "Base Service Order No." := '';
                                                                  "Service Source Type" := "Service Source Type"::Other;
                                                                  "Service Control Period Date" := 0D;
                                                                  "Service Category" := '';
                                                                END ELSE BEGIN
                                                                  CheckCompanyIC;
                                                                  IF ("Entry Type" IN ["Entry Type"::"Positive Adjmt.", "Entry Type"::"Negative Adjmt."]) THEN
                                                                    TESTFIELD("Service Order No.",'');
                                                                  TESTFIELD("Plant Type",'');
                                                                  TESTFIELD("Delivery Account No.", '');
                                                                  TESTFIELD("To Plant Inventory", FALSE);
                                                                  ServOrderRec.GET("Service Order No.");
                                                                  IF NOT ServOrderRec."Decentral Created" THEN
                                                                    ServOrderRec.TestServiceContractMandatory;
                                                                  ServOrderRec.CheckStatus(1);
                                                                  "Service Location No." := ServOrderRec."Service Location No.";
                                                                  "Service Contract No." := ServOrderRec."Service Contract No.";
                                                                  "Service Source Type" := ServOrderRec."Source Type";
                                                                  "Service Control Period Date" := ServOrderRec."Service Control Period Date";
                                                                  "Service Category" := ServOrderRec."Service Category";
                                                                  IF "Service Order No." <> xRec."Service Order No." THEN
                                                                    CurrFieldNo := FIELDNO("Service Order No.");  //db, 04-01-11: M24212

                                                                  CheckAdditionalCostService;  //db, 24-02-10
                                                                  "Base Service Order No." := ServOrderRec."Base Service Order No.";
                                                                END;

                                                                IF "Item No." <> '' THEN
                                                                  GetUnitPrice;

                                                                CheckCostCompServOrderType;

                                                                CheckItemEntrySales;

                                                                ReserveItemJnlLine.VerifyChange(Rec,xRec); //**4PS.n DP00121
                                                                //**4PS 09-06-2010 sn
                                                                  CreateDim(
                                                                    DATABASE::"Service Order","Service Order No.",
                                                                    DATABASE::Job,"Job No.",
                                                                    DATABASE::Item,"Item No.",
                                                                    DATABASE::"Salesperson/Purchaser","Salespers./Purch. Code",
                                                                    DATABASE::"Work Center","Work Center No.",
                                                                    DATABASE::Location,"Location Code"); //**4PS.n
                                                                //**4PS 09-06-2010 en
                                                              END;

                                                   OnLookup=BEGIN
                                                              //**4PS
                                                              CheckCompanyIC;
                                                              ServOrderRec."No." := "Service Order No.";
                                                              IF PAGE.RUNMODAL(0, ServOrderRec) = ACTION::LookupOK THEN BEGIN
                                                                xRec."Service Order No." := '';  //db, 07-06-10: M19676
                                                                VALIDATE("Service Order No.", ServOrderRec."No.");
                                                              END;
                                                            END;

                                                   CaptionML=[ENU=Service Order No.;
                                                              NOR=Serviceordrenr;
                                                              SVE=Serviceordernr];
                                                   Description= }
    { 11012010;;Element            ;Code20        ;TableRelation=IF (Receiving Company=FILTER('')) "Project Element".Element WHERE (Project No.=FIELD(Job No.));
                                                   OnValidate=BEGIN
                                                                //**4PS
                                                                CheckCompanyIC;
                                                                ElementFormat.FormatElem(Element,2,"Receiving Company");
                                                                IF Element <> '' THEN BEGIN
                                                                  ProjElemRec.GET("Job No.",Element);
                                                                  ProjElemRec.CheckProjectElementBlocked;
                                                                  "Element Level" := ProjElemRec.Level;
                                                                  Chapter := ProjElemRec.Chapter;
                                                                  Paragraph := ProjElemRec.Paragraph;
                                                                END;
                                                              END;

                                                   OnLookup=BEGIN
                                                              //**4PS
                                                              CheckCompanyIC;
                                                              ProjElemRec."Project No." := "Job No.";
                                                              ProjElemRec.Element := Element;
                                                              ProjElemRec.SETRANGE("Project No.", "Job No.");
                                                              IF PAGE.RUNMODAL(0, ProjElemRec) = ACTION::LookupOK THEN
                                                                VALIDATE(Element, ProjElemRec.Element);
                                                            END;

                                                   ValidateTableRelation=No;
                                                   CaptionML=[ENU=Element;
                                                              NOR=Element;
                                                              SVE=Element] }
    { 11012011;;Element Level      ;Integer       ;CaptionML=[ENU=Element Level;
                                                              NOR=Elementniv†;
                                                              SVE=Elementniv†];
                                                   Editable=No }
    { 11012012;;Chapter            ;Code20        ;CaptionML=[ENU=Chapter;
                                                              NOR=Kapittel;
                                                              SVE=Kapitel];
                                                   Editable=No }
    { 11012013;;Paragraph          ;Code20        ;CaptionML=[ENU=Paragraph;
                                                              NOR=Avsnitt;
                                                              SVE=Stycke];
                                                   Editable=No }
    { 11012014;;Cost Type          ;Option        ;CaptionML=[ENU=Cost Type;
                                                              NOR=Kostnadstype;
                                                              SVE=Kostnadstyp];
                                                   OptionCaptionML=[ENU=" ,Labor,Material,Subcontracting,Plant,Sundry";
                                                                    NOR=" ,Arbeidskraft,Materiale,Underentrepen›r,Maskin,Diverse";
                                                                    SVE=" ,Arbetskraft,Material,Underentreprenad,Maskin,Diverse"];
                                                   OptionString=[ ,Labor,Material,Subcontracting,Plant,Sundry];
                                                   Editable=No }
    { 11012015;;Extension Contract ;Code10        ;TableRelation=IF (Receiving Company=FILTER('')) "Extension Contract"."Contract No." WHERE (Project No.=FIELD(Job No.));
                                                   OnValidate=BEGIN
                                                                //**4PS
                                                                CheckCompanyIC;
                                                                ExtRec.GET("Job No.", "Extension Contract");
                                                              END;

                                                   OnLookup=BEGIN
                                                              //**4PS
                                                              CheckCompanyIC;
                                                              ExtRec."Project No." := "Job No.";
                                                              ExtRec."Contract No." := "Extension Contract";
                                                              ExtRec.SETRANGE("Project No.", "Job No.");
                                                              IF PAGE.RUNMODAL(0, ExtRec) = ACTION::LookupOK THEN
                                                                VALIDATE("Extension Contract", ExtRec."Contract No.");
                                                            END;

                                                   CaptionML=[ENU=Extension Contract;
                                                              NOR=ETA;
                                                              SVE=ŽTA] }
    { 11012020;;Delivery Date      ;Date          ;CaptionML=[ENU=Delivery Date;
                                                              NOR=Leveringsdato;
                                                              SVE=Leveransdatum] }
    { 11012030;;Description 2      ;Text50        ;CaptionML=[ENU=Description 2;
                                                              NOR=Beskrivelse 2;
                                                              SVE=Beskrivning 2] }
    { 11012040;;Ship To Location   ;Code10        ;TableRelation=IF (Receiving Company=FILTER(''),
                                                                     Deliver=CONST(Project Location)) "Project Location".Code WHERE (Project No.=FIELD(Job No.))
                                                                     ELSE IF (Receiving Company=FILTER(''),
                                                                              Deliver=CONST(Location)) Location.Code;
                                                   OnValidate=BEGIN
                                                                //**4PS
                                                                CheckCompanyIC;
                                                                IF "Ship To Location" <> '' THEN BEGIN
                                                                  IF Deliver = Deliver::Location THEN BEGIN
                                                                    CheckLocationBlocked("Ship To Location");
                                                                    LocRec.GET("Ship To Location");
                                                                  END;
                                                                  IF Deliver = Deliver::"Project Location" THEN
                                                                    ProjLocRec.GET("Job No.","Ship To Location");
                                                                END;
                                                              END;

                                                   OnLookup=BEGIN
                                                              //**4PS
                                                              IF Deliver = Deliver::"Service Location" THEN EXIT;

                                                              CheckCompanyIC;

                                                              IF Deliver = Deliver::Location THEN BEGIN
                                                                LocRec.Code := "Ship To Location";
                                                                IF PAGE.RUNMODAL(0, LocRec) = ACTION::LookupOK THEN
                                                                  VALIDATE("Ship To Location", LocRec.Code);
                                                              END;

                                                              IF Deliver = Deliver::"Project Location" THEN BEGIN
                                                                ProjLocRec."Project No." := "Job No.";
                                                                ProjLocRec.Code := "Ship To Location";
                                                                ProjLocRec.SETRANGE("Project No.", "Job No.");
                                                                IF PAGE.RUNMODAL(0, ProjLocRec) = ACTION::LookupOK THEN
                                                                  VALIDATE("Ship To Location", ProjLocRec.Code);
                                                              END;
                                                            END;

                                                   CaptionML=[ENU=Ship To Location;
                                                              NOR=Lever til lokasjon;
                                                              SVE=Leverera till lagerst„lle] }
    { 11012061;;Blocked            ;Boolean       ;CaptionML=[ENU=Blocked;
                                                              NOR=Blokkert;
                                                              SVE=Sp„rrad] }
    { 11012070;;Inventory Status   ;Option        ;CaptionML=[ENU=Inventory Status;
                                                              NOR=Lagerstatus;
                                                              SVE=Lagerstatus];
                                                   OptionCaptionML=[ENU=free,in production,produced,on stock,processed;
                                                                    NOR=Fri,I produksjon,Produsert,P† lager,Behandlet;
                                                                    SVE=Fri,I produktion,Producerad,I lager,Behandlad];
                                                   OptionString=free,in production,produced,on stock,processed }
    { 11012080;;Production Order   ;Code20        ;OnLookup=VAR
                                                              ProdFrm1@1210190000 : Page 99000815;
                                                              ProdRec1@1210190002 : Record 5405;
                                                            BEGIN
                                                              //**4PS
                                                              IF ("Inventory Status" = "Inventory Status"::"in production") OR
                                                                 ("Inventory Status" = "Inventory Status"::produced) THEN BEGIN
                                                                CLEAR(ProdFrm1);
                                                                CLEAR(ProdRec1);
                                                                ProdFrm1.LOOKUPMODE(TRUE);
                                                                ProdRec1.SETRANGE(Status, "Production Status");
                                                                IF "Production Status" = "Production Status"::"Firm Planned" THEN BEGIN
                                                                  ProdRec1.GET("Production Status", "Production Order");
                                                                END ELSE BEGIN
                                                                  ProdRec1.SETRANGE("Firm Planned Order No.", "Production Order");
                                                                  IF NOT ProdRec1.FIND('-') THEN
                                                                    ProdRec1.SETRANGE("Planned Order No.");
                                                                END;
                                                                ProdFrm1.SETRECORD(ProdRec1);
                                                                ProdFrm1.RUNMODAL;
                                                              END;
                                                            END;

                                                   CaptionML=[ENU=Production Order;
                                                              NOR=Produksjonsordre;
                                                              SVE=Produktionsorder];
                                                   Editable=No }
    { 11012081;;Production Status  ;Option        ;CaptionML=[ENU=Production Status;
                                                              NOR=Produksjonsstatus;
                                                              SVE=Produktionsstatus];
                                                   OptionCaptionML=[ENU=Quote,Planned,Firm Planned,Released,Finished;
                                                                    NOR=Tilbud,Planlagt,Fast Planlagt,Frigitt,Avsluttet;
                                                                    SVE=Offert,Planerad,Fast planering,Sl„ppt,Avslutat];
                                                   OptionString=Quote,Planned,Firm Planned,Released,Finished;
                                                   Editable=No }
    { 11012085;;Quantity (Produced);Decimal       ;CaptionML=[ENU=Quantity (Produced);
                                                              NOR=Antall (produsert);
                                                              SVE=Producerat antal];
                                                   DecimalPlaces=0:5 }
    { 11012086;;Quantity (Released);Decimal       ;OnValidate=BEGIN
                                                                "Quantity to Post" := CalcDefaultQuantityToPost;//**4PS.n
                                                              END;

                                                   CaptionML=[ENU=Quantity (Released);
                                                              NOR=Antall (frigitte);
                                                              SVE=Antal (sl„ppta)];
                                                   DecimalPlaces=0:5 }
    { 11012087;;Quantity (Reserved);Decimal       ;OnValidate=BEGIN
                                                                //**4PS
                                                                IF "Production Order" = '' THEN
                                                                  "Quantity (Reserved)" := Quantity
                                                                ELSE
                                                                  "Quantity (Reserved)" := Quantity - "Quantity (Released)";
                                                              END;

                                                   CaptionML=[ENU=Quantity (Reserved);
                                                              NOR=Antall (reservert);
                                                              SVE=Antal (reserverade)];
                                                   DecimalPlaces=0:5 }
    { 11012088;;Quantity to Post   ;Decimal       ;OnValidate=BEGIN
                                                                //**4PS
                                                                ValidateQuantityToPost;
                                                              END;

                                                   CaptionML=[ENU=Quantity to Post;
                                                              NOR=Antall † bokf›re;
                                                              SVE=Antal att bokf”ra];
                                                   DecimalPlaces=0:5 }
    { 11012090;;Text               ;Text250       ;OnValidate=BEGIN
                                                                //**4PS
                                                                "Text Block" := Text <> '';
                                                              END;

                                                   CaptionML=[ENU=Text;
                                                              NOR=Tekst;
                                                              SVE=Ben„mning] }
    { 11012091;;Text Block         ;Boolean       ;CaptionML=[ENU=Text Block;
                                                              NOR=Tekstblokk;
                                                              SVE=Textblock];
                                                   Editable=No }
    { 11012100;;Receiving Company  ;Text30        ;TableRelation=Company;
                                                   OnValidate=VAR
                                                                IntercompanyRelation@1100528300 : Record 11012057;
                                                                ICLicenceCu@1210190000 : Codeunit 11012780;
                                                              BEGIN
                                                                //**4PS
                                                                IF "Receiving Company" <> '' THEN BEGIN
                                                                  ICLicenceCu.CheckICEntry("Receiving Company");
                                                                  "Rental Unit" := '';
                                                                  IF (IntercompanyRelation.GET(COMPANYNAME, "Receiving Company")) THEN
                                                                    "Gen. Bus. Posting Group" := IntercompanyRelation."Gen. Bus. Posting Group";
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Receiving Company;
                                                              NOR=Mottakselskap;
                                                              SVE=Mottagningsf”retag] }
    { 11012110;;Supplying Company  ;Text30        ;TableRelation=Company;
                                                   CaptionML=[ENU=Supplying Company;
                                                              NOR=Leverende  selskap;
                                                              SVE=Levererande f”retag];
                                                   Editable=No }
    { 11012120;;Related Document (Parent);Code20  ;CaptionML=[ENU=Related Document (Parent);
                                                              NOR=Relatert dokument (overordnet);
                                                              SVE=Relaterat dokument (”verordnat)] }
    { 11012121;;Related Document (Child);Code20   ;CaptionML=[ENU=Related Document (Child);
                                                              NOR=Relatert dokument (underordnet);
                                                              SVE=Relaterat dokument (underordnat)] }
    { 11012130;;Delivery Account No.;Code20       ;TableRelation=IF (Receiving Company=FILTER('')) "G/L Account";
                                                   OnValidate=BEGIN
                                                                //**4PS
                                                                IF "Delivery Account No." = '' THEN BEGIN
                                                                  "Delivery Dimension 1 Code" := '';
                                                                  EXIT;
                                                                END;

                                                                IF NOT ("Entry Type" IN ["Entry Type"::Purchase, "Entry Type"::Sale]) THEN
                                                                  TESTFIELD("Delivery Account No.",'')
                                                                ELSE BEGIN
                                                                  TESTFIELD("Job No.", '');
                                                                  TESTFIELD("Service Order No.", '');
                                                                  TESTFIELD("Plant Type", '');
                                                                  TESTFIELD("To Plant Inventory", FALSE);
                                                                END;

                                                                CheckCompanyIC;
                                                                GLAcc.GET("Delivery Account No.");
                                                                CheckGLAcc;

                                                                CreateDim(
                                                                  DATABASE::"G/L Account","Delivery Account No.",
                                                                  DATABASE::Job,"Job No.",
                                                                  DATABASE::"Service Order","Service Order No.",
                                                                  DATABASE::Item,"Item No.",
                                                                  DATABASE::"Work Center","Work Center No.",
                                                                  DATABASE::Location,"Location Code");  //DP02371
                                                              END;

                                                   OnLookup=BEGIN
                                                              //**4PS
                                                              GLAcc.RESET;
                                                              CheckCompanyIC;
                                                              GLAcc."No." := "Delivery Account No.";
                                                              IF PAGE.RUNMODAL(0, GLAcc) = ACTION::LookupOK THEN
                                                                VALIDATE("Delivery Account No.", GLAcc."No.");
                                                            END;

                                                   CaptionML=[ENU=Delivery Account No.;
                                                              NOR=Leveringskontonr;
                                                              SVE=Leveranskontonr] }
    { 11012131;;Delivery Dimension 1 Code;Code20  ;TableRelation=IF (Receiving Company=FILTER('')) "Dimension Value".Code WHERE (Global Dimension No.=CONST(1));
                                                   OnValidate=BEGIN
                                                                //**4PS
                                                                IF "Delivery Dimension 1 Code" = '' THEN
                                                                  EXIT;

                                                                TESTFIELD("Delivery Account No.");

                                                                CheckCompanyIC;
                                                                DimMgt.GetDimValueRec(1, "Delivery Dimension 1 Code", DimValRec, TRUE,'');
                                                              END;

                                                   OnLookup=BEGIN
                                                              //**4PS
                                                              DimValRec.RESET;
                                                              CheckCompanyIC;
                                                              DimValRec.Code := "Delivery Dimension 1 Code";
                                                              DimValRec.SETRANGE("Global Dimension No.", 1);
                                                              IF PAGE.RUNMODAL(0, DimValRec) = ACTION::LookupOK THEN
                                                                VALIDATE("Delivery Dimension 1 Code", DimValRec.Code);
                                                            END;

                                                   CaptionML=[ENU=Delivery Cost Centre;
                                                              NOR=Leveringskostsenter;
                                                              SVE=Leveranskostnadscenter] }
    { 11012142;;Ovh.Surch.Expected Costs (LCY);Decimal;
                                                   CaptionML=[ENU=Ovh.Surch.Expected Costs (LCY);
                                                              NOR=Ovh.kostn. for forventede koster (NOK);
                                                              SVE=Ovh.kostn. f”r f”rv„ntade kostnader (BVA)];
                                                   Editable=No }
    { 11012143;;Overhead Surcharge Project;Decimal;FieldClass=FlowField;
                                                   CalcFormula=Sum("Item Journal Surcharge"."Overhead Surcharge Project" WHERE (Journal Template Name=FIELD(Journal Template Name),
                                                                                                                                Journal Batch Name=FIELD(Journal Batch Name),
                                                                                                                                Journal Line No.=FIELD(Line No.)));
                                                   CaptionML=[ENU=Overhead Surcharge Project;
                                                              NOR=Overheadkost, prosjekt;
                                                              SVE=Overheadkostnad, projekt];
                                                   Editable=No }
    { 11012144;;Overhead Surcharge Service;Decimal;FieldClass=FlowField;
                                                   CalcFormula=Sum("Item Journal Surcharge"."Overhead Surcharge Service" WHERE (Journal Template Name=FIELD(Journal Template Name),
                                                                                                                                Journal Batch Name=FIELD(Journal Batch Name),
                                                                                                                                Journal Line No.=FIELD(Line No.)));
                                                   CaptionML=[ENU=Overhead Surcharge Service;
                                                              NOR=Overheadkost, service;
                                                              SVE=Overheadkostnad, service];
                                                   Description=Dont use 11012145;
                                                   Editable=No }
    { 11012150;;Shelf No.          ;Code20        ;TableRelation="Shelf per Location".Code;
                                                   OnValidate=VAR
                                                                InvSetup@1100485002 : Record 313;
                                                                CompInfo@1100485001 : Record 79;
                                                                ShelfRec@1100485000 : Record 11020241;
                                                              BEGIN
                                                                //**4PS
                                                                InvSetup.GET;
                                                                CompInfo.GET;
                                                                IF "Shelf No." <> '' THEN BEGIN
                                                                  IF InvSetup."Shelves by Location" = FALSE THEN
                                                                    ShelfRec.GET(CompInfo."Location Code", "Shelf No.")
                                                                  ELSE
                                                                    ShelfRec.GET("Location Code", "Shelf No.");
                                                                END;
                                                              END;

                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Shelf No.;
                                                              NOR=Hyllenr.;
                                                              SVE=Hyllnr] }
    { 11012155;;Bin Code (Project Inventory);Code20;
                                                   OnValidate=VAR
                                                                WMSManagement@1001 : Codeunit 7302;
                                                                Location@1100526200 : Record 14;
                                                                PrefBin@1100525000 : Record 11020629;
                                                              BEGIN
                                                                //db, 02-11-10
                                                                WMSManagement.FindBin("Location Code","Bin Code (Project Inventory)",'');
                                                                TESTFIELD("Location Code");
                                                                IF "Bin Code (Project Inventory)" <> '' THEN BEGIN
                                                                  Location.GET("Location Code");
                                                                  Location.TESTFIELD("Bin Mandatory");
                                                                END;

                                                                PrefBin.CheckBinLocationBinding("Job No.",'',"Location Code","Bin Code (Project Inventory)");  //db, 24-12-10
                                                              END;

                                                   OnLookup=VAR
                                                              WMSManagement@1002 : Codeunit 7302;
                                                              BinCode@1000 : Code[20];
                                                            BEGIN
                                                              //db, 02-11-10
                                                              BinCode := WMSManagement.BinLookUpSpecific("Location Code","Item No.",'','',"Job No.","Service Order No.","Bin Code (Project Inventory)");
                                                              IF BinCode <> '' THEN
                                                                VALIDATE("Bin Code (Project Inventory)",BinCode);
                                                            END;

                                                   CaptionML=[ENU=Bin Code (Project Inventory);
                                                              NOR=Lagerplasseringskode (Prosjektlager);
                                                              SVE=Lagerplatskod (projektlager)] }
    { 11012160;;Main Project No.   ;Code20        ;TableRelation=Job;
                                                   CaptionML=[ENU=Main Project No.;
                                                              NOR=Hovedprosjektnr.;
                                                              SVE=Huvudprojektnr] }
    { 11012170;;Origin Type Line   ;Option        ;CaptionML=[ENU=Origin Type Line;
                                                              NOR=Opprinnelig typerad;
                                                              SVE=Ursprunglig typrad];
                                                   OptionCaptionML=[ENU=" ,Item Journal - Manual,Advice Order Line,Field Service";
                                                                    SVE=" ,Artikeljournal Í manuell,Best„llningsunderlagsrad,F„ltservice"];
                                                   OptionString=[ ,ItemJnlManual,AdviceOrderLine,FieldService];
                                                   Editable=No }
    { 11012210;;Warranty Code Vendor;Code10       ;TableRelation="Service Warranty";
                                                   CaptionML=[ENU=Warranty Code Vendor;
                                                              NOR=Garantikode leverand›r;
                                                              SVE=Grantikod leveran”r] }
    { 11012220;;Warranty Start Date Vendor;Date   ;CaptionML=[ENU=Warranty Start Date Vendor;
                                                              NOR=Garantistartdato leverand›r;
                                                              SVE=Garantistartdatum leverant”r] }
    { 11012230;;Warranty Period Vendor;DateFormula;CaptionML=[ENU=Warranty Period Vendor;
                                                              NOR=Garantiperiode leverand›r;
                                                              SVE=Grantiperiod leverant”r] }
    { 11012240;;Warranty Code Customer;Code10     ;TableRelation="Service Warranty";
                                                   CaptionML=[ENU=Warranty Code Customer;
                                                              NOR=Garantikode kunde;
                                                              SVE=Grantikod kund] }
    { 11012250;;Warranty Start Date Customer;Date ;CaptionML=[ENU=Warranty Start Date Customer;
                                                              NOR=Garantistartdato kunde;
                                                              SVE=Garantistartdatum kund] }
    { 11012260;;Warranty Period Customer;DateFormula;
                                                   CaptionML=[ENU=Warranty Period Customer;
                                                              NOR=Garantiperiode kunde;
                                                              SVE=Grantiperiod kund] }
    { 11012270;;Warranty Date Customer;Date       ;CaptionML=[ENU=Warranty Date Customer;
                                                              NOR=Garantidato kunde;
                                                              SVE=Grantidatum kund];
                                                   Editable=No }
    { 11012280;;Good Customs       ;Boolean       ;CaptionML=[ENU=Good Customs;
                                                              NOR=Varetoll;
                                                              SVE=Varutull] }
    { 11012285;;Shipment with T1   ;Boolean       ;CaptionML=[ENU=Shipment with T1;
                                                              NOR=Levering med T1;
                                                              SVE=Frakt med T1] }
    { 11012286;;Customs Destination Code;Code20   ;CaptionML=[ENU=Customs Destination Code;
                                                              NOR=Tollens destinasjonskode;
                                                              SVE=Tulls destinationskod] }
    { 11012290;;Reserved NS Qty. (Base);Decimal   ;FieldClass=FlowField;
                                                   CalcFormula=Sum("NS Reservation Entry"."Quantity (Base)" WHERE (Source ID=FIELD(Journal Template Name),
                                                                                                                   Source Ref. No.=FIELD(Line No.),
                                                                                                                   Source Type=CONST(83),
                                                                                                                   Source Subtype=FIELD(Entry Type),
                                                                                                                   Source Batch Name=FIELD(Journal Batch Name),
                                                                                                                   Source Prod. Order Line=CONST(0),
                                                                                                                   Reservation Status=CONST(Reservation)));
                                                   CaptionML=[ENU=Reserved Non-stock Qty. (Base);
                                                              NOR=Reservert antall ikke p† lager (lag.enh);
                                                              SVE=Reserverat antal ej lagerf”rda (bas)];
                                                   DecimalPlaces=0:5;
                                                   Editable=No }
    { 11012315;;Input by           ;Code50        ;TableRelation=User."User Name";
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Input by;
                                                              NOR=Input av;
                                                              SVE=Inmatat av];
                                                   Editable=No }
    { 11012400;;Journal Template Type;Option      ;FieldClass=FlowField;
                                                   CalcFormula=Lookup("Item Journal Template".Type WHERE (Name=FIELD(Journal Template Name)));
                                                   CaptionML=ENU=Journal Templage Type;
                                                   OptionCaptionML=[ENU=Item,Transfer,Phys. Inventory,Revaluation,Consumption,Output,Capacity,Prod. Order;
                                                                    NOR=Vare,Overf›ring,Vareopptelling,Revaluering,Forbruk,Avgang,Kapasitet,Produksjonsordre;
                                                                    SVE=Artikel,™verf”ring,Inventering,Omv„rdering,F”rbrukning,Utfl”de,Kapacitet,Prod.order];
                                                   OptionString=Item,Transfer,Phys. Inventory,Revaluation,Consumption,Output,Capacity,Prod. Order;
                                                   Editable=No }
    { 11012401;;Recurring          ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Lookup("Item Journal Template".Recurring WHERE (Name=FIELD(Journal Template Name)));
                                                   CaptionML=[ENU=Recurring;
                                                              NOR=Gjentakende;
                                                              SVE=terkommande];
                                                   Editable=No }
    { 11012550;;To Plant Inventory ;Boolean       ;OnValidate=VAR
                                                                lvPlantTypeRec@1100485000 : Record 11012551;
                                                                lvPlantSetupRec@1100485001 : Record 11012550;
                                                              BEGIN
                                                                //**4PS
                                                                IF "To Plant Inventory" THEN BEGIN
                                                                  IF "Item No." <> '' THEN
                                                                    IF lvPlantTypeRec.GET("Item No.") THEN
                                                                      "To Plant Type" := "Item No.";
                                                                  lvPlantSetupRec.GET;
                                                                  //"To Plant Location" := lvPlantSetupRec."Ship To Location";  //*DPA.o
                                                                  "To Plant Location" := lvPlantSetupRec.GetShipToLocation();   //*DPA.n
                                                                  TESTFIELD("Job No.", '');
                                                                  TESTFIELD("Service Order No.", '');
                                                                  TESTFIELD("Plant Type", '');
                                                                  TESTFIELD("Delivery Account No.", '');
                                                                END ELSE BEGIN
                                                                  "To Plant Type" := '';
                                                                  "To Plant Location" := '';
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=To Plant Inventory;
                                                              NOR=Til maskinlager;
                                                              SVE=Till Maskinlager] }
    { 11012560;;To Plant Type      ;Code20        ;TableRelation="Plant Type" WHERE (Bulk=CONST(Yes),
                                                                                     External=CONST(No));
                                                   OnValidate=BEGIN
                                                                //**4PS
                                                                IF "To Plant Type" <> '' THEN
                                                                  TESTFIELD("To Plant Inventory", TRUE);
                                                              END;

                                                   CaptionML=[ENU=To Plant Type;
                                                              NOR=Til maskintype;
                                                              SVE=Till Maskintyp] }
    { 11012570;;To Plant Location  ;Code20        ;TableRelation="Plant Location";
                                                   OnValidate=BEGIN
                                                                //**4PS
                                                                IF "To Plant Location" <> '' THEN
                                                                  TESTFIELD("To Plant Inventory", TRUE);
                                                              END;

                                                   CaptionML=[ENU=To Plant Location;
                                                              NOR=Til maskinlokasjon;
                                                              SVE=Till Maskinplats] }
    { 11012581;;Plant Type         ;Code20        ;TableRelation=IF (Receiving Company=FILTER('')) "Plant Type";
                                                   OnValidate=BEGIN
                                                                //**4PS
                                                                IF "Plant Type" = '' THEN BEGIN
                                                                  "Plant No." := '';
                                                                  "Cost Component Plant" := '';
                                                                  EXIT;
                                                                END;

                                                                IF NOT ("Entry Type" IN ["Entry Type"::Purchase, "Entry Type"::Sale]) THEN
                                                                  TESTFIELD("Plant Type",'')
                                                                ELSE BEGIN
                                                                  TESTFIELD("Job No.", '');
                                                                  TESTFIELD("Service Order No.", '');
                                                                  TESTFIELD("Delivery Account No.", '');
                                                                  TESTFIELD("To Plant Inventory", FALSE);
                                                                END;

                                                                CheckCompanyIC;
                                                                PlantTypeRec.GET("Plant Type");

                                                                VALIDATE("Plant No.");
                                                              END;

                                                   OnLookup=BEGIN
                                                              //**4PS
                                                              CheckCompanyIC;
                                                              PlantTypeRec.Code := "Plant Type";
                                                              IF PAGE.RUNMODAL(0,PlantTypeRec) = ACTION::LookupOK THEN
                                                                VALIDATE("Plant Type", PlantTypeRec.Code);
                                                            END;

                                                   CaptionML=[ENU=Plant Type;
                                                              NOR=Maskintype;
                                                              SVE=Maskintyp] }
    { 11012582;;Plant No.          ;Code10        ;TableRelation=IF (Receiving Company=FILTER('')) "Plant Number".No. WHERE (Plant Type=FIELD(Plant Type));
                                                   OnValidate=BEGIN
                                                                //**4PS
                                                                IF "Plant No." = '' THEN
                                                                  EXIT;

                                                                TESTFIELD("Plant Type");
                                                                CheckCompanyIC;
                                                                PlantNoRec.GET("Plant Type", "Plant No.");

                                                                VALIDATE("Cost Component Plant");
                                                              END;

                                                   OnLookup=BEGIN
                                                              //**4PS
                                                              CheckCompanyIC;
                                                              PlantNoRec."Plant Type" := "Plant Type";
                                                              PlantNoRec."No." := "Plant No.";
                                                              IF PAGE.RUNMODAL(0,PlantNoRec) = ACTION::LookupOK THEN
                                                                VALIDATE("Plant No.", PlantNoRec."No.");
                                                            END;

                                                   CaptionML=[ENU=Plant No.;
                                                              NOR=Maskinnr.;
                                                              SVE=Maskinnr] }
    { 11012583;;Cost Component Plant;Code10       ;TableRelation=IF (Receiving Company=FILTER('')) "Cost Component Plant";
                                                   OnValidate=BEGIN
                                                                //**4PS
                                                                IF "Cost Component Plant" = '' THEN
                                                                  EXIT;

                                                                TESTFIELD("Plant Type");
                                                                CheckCompanyIC;
                                                                CostCompPlantRec.GET("Cost Component Plant");
                                                                CheckPlantCostComponentType();
                                                              END;

                                                   OnLookup=BEGIN
                                                              //**4PS
                                                              CheckCompanyIC;
                                                              CostCompPlantRec.Code := "Cost Component Plant";
                                                              IF PAGE.RUNMODAL(0,CostCompPlantRec) = ACTION::LookupOK THEN
                                                                VALIDATE("Cost Component Plant", CostCompPlantRec.Code);
                                                            END;

                                                   CaptionML=[ENU=Cost Component Plant;
                                                              NOR=Kostdel, maskin;
                                                              SVE=Kostnadsdel, Maskin] }
    { 11012590;;Country/Region of Origin/Dest.;Code10;
                                                   TableRelation=Country/Region;
                                                   CaptionML=[ENU=Country/Region of Origin/Destination;
                                                              NOR=Land/Opprinnelsesregion/Destinasjon;
                                                              SVE=Land/ursprungsregion/destination] }
    { 11012600;;Entity Type        ;Option        ;OnValidate=BEGIN
                                                                //**4PS
                                                                ValidateEntityType;
                                                              END;

                                                   CaptionML=[ENU=Entity Type;
                                                              NOR=Enhetstype;
                                                              SVE=Enhetstyp];
                                                   OptionCaptionML=[ENU=None,Cable,Device,Extra Need,Cable Transit,,,,,Position;
                                                                    NOR=Ingen,Kabel,Enhet,Ekstra behov,Kabeloverf›ring,,,,,Posisjon;
                                                                    SVE=Ingen,Kabel,Anordning,Extra behov,Kabel”verf”ring,,,,,Position];
                                                   OptionString=None,Cable,Device,ExtraNeed,CableTransit,,,,,Position;
                                                   Description=Engineering }
    { 11012610;;System No.         ;Code20        ;CaptionML=[ENU=System No.;
                                                              NOR=Systemnr;
                                                              SVE=Systemnr];
                                                   Description=Engineering;
                                                   Editable=No }
    { 11012620;;Entity No.         ;Code20        ;TableRelation=IF (Receiving Company=FILTER('')) "Assembly Yard Number Object"."Entity No." WHERE (Project No.=FIELD(Job No.),
                                                                                                                                                     Yard No.=FIELD(Yard No.),
                                                                                                                                                     Entity Type=FIELD(Entity Type),
                                                                                                                                                     System No.=FIELD(System No.));
                                                   OnValidate=BEGIN
                                                                //**4PS
                                                                ValidateEntityNo;
                                                              END;

                                                   OnLookup=BEGIN
                                                              //**4PS
                                                              LookupEntityNo;
                                                            END;

                                                   CaptionML=[ENU=Entity No.;
                                                              NOR=Enhetsnr;
                                                              SVE=Enhetsnr];
                                                   Description=Engineering }
    { 11012630;;Cable Transit Pos. ;Option        ;CaptionML=[ENU=Cable Transit Postion;
                                                              NOR=Kabeloverf›ringsposisjon;
                                                              SVE=Kabel”verf”ringsposition];
                                                   OptionCaptionML=[ENU=" ,From Side,To Side";
                                                                    NOR=" ,Fra side,Til side";
                                                                    SVE=" ,Fr†n sida,Till sida"];
                                                   OptionString=[ ,From,To];
                                                   Description=Engineering;
                                                   Editable=No }
    { 11012640;;Yard No.           ;Code20        ;CaptionML=[ENU=Yard No.;
                                                              NOR=Plassnr;
                                                              SVE=Platsnr];
                                                   Description=Engineering;
                                                   Editable=No }
    { 11012650;;Purchase Route Reference;Code20   ;CaptionML=[ENU=Purchase Route Reference;
                                                              NOR=Referanse for Innkj›psrute;
                                                              SVE=Referens f”r ink”psf”ljd];
                                                   Editable=No }
    { 11012660;;Employee No.       ;Code20        ;TableRelation=IF (Employee Company=CONST()) Employee;
                                                   OnValidate=VAR
                                                                Employee@1100526000 : Record 5200;
                                                              BEGIN
                                                                IF ("Employee Company" <> '') AND ("Employee Company" <> COMPANYNAME) THEN
                                                                  Employee.CHANGECOMPANY("Employee Company");
                                                                IF ("Employee No." <> '') THEN
                                                                  Employee.GET("Employee No.");
                                                              END;

                                                   OnLookup=VAR
                                                              Employee@1100526000 : Record 5200;
                                                            BEGIN
                                                              IF ("Employee Company" <> '') AND ("Employee Company" <> COMPANYNAME) THEN
                                                                Employee.CHANGECOMPANY("Employee Company");
                                                              IF ("Employee No." <> '') THEN
                                                                IF Employee.GET("Employee No.") THEN;
                                                              IF PAGE.RUNMODAL(0, Employee) = ACTION::LookupOK THEN
                                                                VALIDATE("Employee No.", Employee."No.");
                                                            END;

                                                   CaptionML=[ENU=Employee No.;
                                                              NOR=Ansattnr;
                                                              SVE=Anst„llningsnr] }
    { 11012665;;Employee Company   ;Text30        ;TableRelation=Company;
                                                   OnValidate=BEGIN
                                                                IF ("Employee Company" <> xRec."Employee Company") AND
                                                                   (NOT ("Employee Company" = COMPANYNAME) OR ("Employee Company" = '')) AND
                                                                   (NOT (xRec."Employee Company" = COMPANYNAME) OR (xRec."Employee Company" = '')) THEN
                                                                  VALIDATE("Employee No.", '');
                                                              END;

                                                   DataClassification=ToBeClassified;
                                                   CaptionML=[ENU=Employee Company;
                                                              SVE=Den anst„lldes f”retag] }
    { 11012700;;Cost Component     ;Code20        ;TableRelation=IF (Receiving Company=FILTER('')) "Cost Component";
                                                   OnValidate=BEGIN
                                                                //**4PS
                                                                ValidateCostComponent;
                                                              END;

                                                   OnLookup=BEGIN
                                                              //**4PS
                                                              CheckCompanyIC;  //db, 11-05-11: M23927
                                                              CostCompRec.Code := "Cost Component";
                                                              IF PAGE.RUNMODAL(0,CostCompRec) = ACTION::LookupOK THEN
                                                                VALIDATE("Cost Component", CostCompRec.Code);
                                                            END;

                                                   CaptionML=[ENU=Cost Component;
                                                              NOR=Kostnadskomponent;
                                                              SVE=Kostnadskomponent] }
    { 11012801;;Service Location No.;Code20       ;TableRelation="Service Location".No.;
                                                   CaptionML=[ENU=Service Location No.;
                                                              NOR=Servicelokasjon Nr.;
                                                              SVE=Serviceplatsnr];
                                                   Editable=No }
    { 11012804;;Service Contract No.;Code20       ;TableRelation=Service-Contract.No.;
                                                   CaptionML=[ENU=Service Contract No.;
                                                              NOR=Servicekontraktnr;
                                                              SVE=Servicekontraktnr];
                                                   Editable=No }
    { 11012805;;Additional Cost (Service);Boolean ;OnValidate=BEGIN
                                                                //**4PS
                                                                ValidateAdditionalCost;
                                                              END;

                                                   CaptionML=[ENU=Additional Cost (Service);
                                                              NOR=Tilleggskoster (service);
                                                              SVE=Till„ggskostnader (service)] }
    { 11012806;;Service Source Type;Option        ;InitValue=Other;
                                                   CaptionML=[ENU=Service Source Type;
                                                              NOR=Servicekildetype;
                                                              SVE=Serviceursprungstyp];
                                                   OptionCaptionML=[ENU=Call,Contract,Other,Estimate;
                                                                    NOR=Samtale,Kontrakt,Andre,Kalkyle;
                                                                    SVE=Samtal,Kontrakt,™vrigt,Kalkyl];
                                                   OptionString=Call,Contract,Other,Estimate;
                                                   Editable=No }
    { 11012807;;Add. Cost Changed Manually;Boolean;CaptionML=ENU=Add. Cost Changed Manually }
    { 11012808;;Base Service Order No.;Code20     ;TableRelation="Service Order".No.;
                                                   CaptionML=[ENU=Base Service Order No.;
                                                              NOR=Baseserviceordrenr;
                                                              SVE=Basserviceordernr];
                                                   Editable=No }
    { 11012810;;Deliver            ;Option        ;OnValidate=BEGIN
                                                                //**4PS
                                                                CheckCompanyIC;  //C052785
                                                                IF Deliver = Deliver::Location THEN
                                                                  "Ship To Location" := '';
                                                                IF Deliver = Deliver::"Service Location" THEN
                                                                  ServOrderRec.GET("Service Order No.");
                                                                IF Deliver = Deliver::"Project Location" THEN
                                                                  ProjRec.GET("Job No.");
                                                              END;

                                                   CaptionML=[ENU=Deliver;
                                                              NOR=Lever;
                                                              SVE=Leverera];
                                                   OptionCaptionML=[ENU=Location,Service Location,Project Location;
                                                                    NOR=Lokasjon,Servicelokasjon,Prosjektlokasjon;
                                                                    SVE=Lagerst„lle,serviceplats,projektst„lle];
                                                   OptionString=Location,Service Location,Project Location }
    { 11012820;;Rental Unit        ;Code20        ;TableRelation="Rental Unit"."Rental Unit" WHERE (Project No.=FIELD(Job No.));
                                                   CaptionML=[ENU=Rental Unit;
                                                              NOR=Leieenhet;
                                                              SVE=Uthyrningsenhet] }
    { 11012840;;Service Control Year;Integer      ;CaptionML=[ENU=Service Control Year;
                                                              NOR=Servicekontroll†r;
                                                              SVE=Servicekontroll†r];
                                                   Editable=No }
    { 11012850;;Service Control Period Date;Date  ;CaptionML=[ENU=Service Control Period Date;
                                                              NOR=Servicekontrollperiode, dato;
                                                              SVE=Servicekontroll datumperiod];
                                                   Editable=No }
    { 11012860;;Service Category   ;Code10        ;CaptionML=[ENU=Service Category;
                                                              SVE=Servicekategori];
                                                   Editable=No }
    { 11012870;;Purchase Requisition No.;Code20   ;TableRelation="Purchase Requisition";
                                                   CaptionML=[ENU=Purchase Requisition No.;
                                                              SVE=Ink”psrekvisition nr];
                                                   Editable=No }
    { 11012900;;SKU Surcharge Revaluation;Boolean ;CaptionML=[ENU=SKU Surcharge Revaluation;
                                                              NOR=Revaluering av LFE-tilleggsgebyr;
                                                              SVE=Omv„rdering av till„ggsavgift f”r lagerst„llsenhet] }
    { 11012910;;SKU Surcharge (Calculated);Decimal;CaptionML=[ENU=SKU Surcharge (Calculated);
                                                              NOR=LFE-tilleggsgebyr (beregnet);
                                                              SVE=Till„ggsavgift f”r lagerst„llsenhet (ber„knad)] }
    { 11012920;;SKU Surcharge (Revalued);Decimal  ;CaptionML=[ENU=SKU Surcharge (Revalued);
                                                              NOR=LFE-tilleggsgebyr (revaluert);
                                                              SVE=Till„ggsavgift f”r lagerst„llsenhet (omv„rderad)] }
    { 11012930;;Project Stock      ;Boolean       ;OnValidate=BEGIN
                                                                //**4PS
                                                                IF "Project Stock" THEN BEGIN
                                                                  IF ("Job No." = '') OR (NOT ("Entry Type" IN ["Entry Type"::Purchase, "Entry Type"::Sale])) THEN
                                                                    "Project Stock" := FALSE
                                                                  ELSE BEGIN
                                                                    InventorySetup.GET;
                                                                    IF NOT InventorySetup.JobInventoryByStockRelease("Job No.") THEN
                                                                      "Project Stock" := FALSE;
                                                                  END;
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Project Stock;
                                                              NOR=Prosjektlager;
                                                              SVE=Projektlager] }
    { 11012940;;Comments for Logistics;Text80     ;CaptionML=[ENU=Comments for Logistics;
                                                              NOR=Kommentarer for logistikk;
                                                              SVE=Kommentarer f”r logistik] }
    { 11012950;;Cost Plus Entry Created;Boolean   ;CaptionML=[ENU=Cost Plus Entry Created;
                                                              NOR=Selvkosttransaksjon er opprettet;
                                                              SVE=Redovisad sj„lvkostnad har skapats];
                                                   Editable=No }
    { 11012960;;IC Inventory Line Type;Option     ;CaptionML=[ENU=IC Inventory Order Line;
                                                              NOR="Ordrerader for IC-lager ";
                                                              SVE=IC lager orderrader];
                                                   OptionCaptionML=[ENU=" ,Order,Delivery,Transfer";
                                                                    NOR=" ,Ordre,Levering,Overf›ring";
                                                                    SVE=" ,Order,Leverans,Transfer"];
                                                   OptionString=,Order,Delivery,Transfer;
                                                   Editable=No }
    { 11012970;;Delivery Time      ;Time          ;CaptionML=[ENU=Delivery Time;
                                                              NOR=Leveransetid;
                                                              SVE=Leveranstid] }
    { 11012980;;FSC Type Code      ;Code10        ;TableRelation="FSC Type";
                                                   CaptionML=[ENU=FSC Type Code;
                                                              NOR=FSC Typekode;
                                                              SVE=FSC typkod] }
    { 11012990;;Service Object No. ;Code20        ;TableRelation=IF (Receiving Company=FILTER('')) "Service Order Object"."Object No." WHERE (Service Order No.=FIELD(Service Order No.));
                                                   CaptionML=[ENU=Service Object No.;
                                                              NOR=Serviceobjektnr;
                                                              SVE=Serviceobjektnr] }
    { 11012995;;Decentral Created Guid;Text36     ;CaptionML=ENU=Decentral Created Guid;
                                                   Editable=No }
    { 11012996;;Plot No.           ;Code10        ;TableRelation=Plot."Plot No." WHERE (Project No.=FIELD(Job No.));
                                                   CaptionML=[ENU=Plot No.;
                                                              SVE=Ritningnr] }
    { 99000755;;Overhead Rate      ;Decimal       ;OnValidate=BEGIN
                                                                IF ("Value Entry Type" <> "Value Entry Type"::"Direct Cost") OR
                                                                   ("Item Charge No." <> '')
                                                                THEN BEGIN
                                                                  "Overhead Rate" := 0;
                                                                  VALIDATE("Indirect Cost %",0);
                                                                END ELSE
                                                                  VALIDATE("Indirect Cost %");
                                                              END;

                                                   CaptionML=[ENU=Overhead Rate;
                                                              NOR=Sats for indirekte kostnader;
                                                              SVE=Omkostnad];
                                                   DecimalPlaces=0:5 }
    { 99000756;;Single-Level Material Cost;Decimal;CaptionML=[ENU=Single-Level Material Cost;
                                                              NOR=Materialkostn. - enkeltniv†;
                                                              SVE=En-niv† materialkostnad];
                                                   AutoFormatType=1 }
    { 99000757;;Single-Level Capacity Cost;Decimal;CaptionML=[ENU=Single-Level Capacity Cost;
                                                              NOR=Kapasitetskostn. - enkeltniv†;
                                                              SVE=En-niv† kapacitetskostnad];
                                                   AutoFormatType=1 }
    { 99000758;;Single-Level Subcontrd. Cost;Decimal;
                                                   CaptionML=[ENU=Single-Level Subcontrd. Cost;
                                                              NOR=Underlevrd.kostn - enkeltniv†;
                                                              SVE=En-niv† underleverant”rkost.];
                                                   AutoFormatType=1 }
    { 99000759;;Single-Level Cap. Ovhd Cost;Decimal;
                                                   CaptionML=[ENU=Single-Level Cap. Ovhd Cost;
                                                              NOR=Indir. kap.kostn - enkeltniv†;
                                                              SVE=En-niv† kap.overheadkost.];
                                                   AutoFormatType=1 }
    { 99000760;;Single-Level Mfg. Ovhd Cost;Decimal;
                                                   CaptionML=[ENU=Single-Level Mfg. Ovhd Cost;
                                                              NOR=Indir. prod.kostn - enkeltniv†;
                                                              SVE=En-niv† mat.overheadkost.];
                                                   AutoFormatType=1 }
    { 99000761;;Rolled-up Material Cost;Decimal   ;CaptionML=[ENU=Rolled-up Material Cost;
                                                              NOR=Opprullert materialkost;
                                                              SVE=Uppsum. materialkost.];
                                                   AutoFormatType=1 }
    { 99000762;;Rolled-up Capacity Cost;Decimal   ;CaptionML=[ENU=Rolled-up Capacity Cost;
                                                              NOR=Opprullert kapasitetskost;
                                                              SVE=Uppsum. kapacitetskost.];
                                                   AutoFormatType=1 }
    { 99000763;;Rolled-up Subcontracted Cost;Decimal;
                                                   CaptionML=[ENU=Rolled-up Subcontracted Cost;
                                                              NOR=Underlever.kostn. - opprullert;
                                                              SVE=Uppsummerad underentreprenadkostnad];
                                                   AutoFormatType=1 }
    { 99000764;;Rolled-up Mfg. Ovhd Cost;Decimal  ;CaptionML=[ENU=Rolled-up Mfg. Ovhd Cost;
                                                              NOR=Opprullert indir. prod.kostn.;
                                                              SVE=Uppsum. tillverkn.overh.kost];
                                                   AutoFormatType=1 }
    { 99000765;;Rolled-up Cap. Overhead Cost;Decimal;
                                                   CaptionML=[ENU=Rolled-up Cap. Overhead Cost;
                                                              NOR=Opprullert indir. kap.kostn.;
                                                              SVE=Uppsum. kap.omkostnad];
                                                   AutoFormatType=1 }
  }
  KEYS
  {
    {    ;Journal Template Name,Journal Batch Name,Line No.;
                                                   MaintainSIFTIndex=No;
                                                   Clustered=Yes }
    {    ;Entry Type,Item No.,Variant Code,Location Code,Bin Code,Posting Date;
                                                   SumIndexFields=Quantity (Base);
                                                   MaintainSIFTIndex=No }
    {    ;Entry Type,Item No.,Variant Code,New Location Code,New Bin Code,Posting Date;
                                                   SumIndexFields=Quantity (Base);
                                                   MaintainSIFTIndex=No }
    {    ;Item No.,Posting Date                   ;MaintainSIFTIndex=No }
    {    ;Journal Template Name,Journal Batch Name,Item No.,Location Code,Variant Code }
    {    ;Entry Type,Item No.,Blocked,Job No.,Service Order No.,Variant Code,Location Code,Bin Code,Delivery Date;
                                                   SumIndexFields=Quantity (Base),Quantity (Reserved);
                                                   MaintainSIFTIndex=No }
    {    ;Job No.,Ship To Location,Line No.       ;MaintainSIFTIndex=No }
    {    ;Delivery Date,Journal Template Name,Journal Batch Name;
                                                   MaintainSIFTIndex=No }
    {    ;Production Order,Production Status,Job No.,Element,Posting Date;
                                                   SumIndexFields=Amount,Ovh.Surch.Expected Costs (LCY);
                                                   MaintainSIFTIndex=No }
    {    ;Production Order,Job No.,Main Project No.,Chapter,Paragraph,Posting Date,Cost Type,Shortcut Dimension 2 Code,Element,Extension Contract;
                                                   SumIndexFields=Amount,Ovh.Surch.Expected Costs (LCY);
                                                   MaintainSIFTIndex=No }
    {    ;Location Code,Shelf No.,Item No.        ;MaintainSIFTIndex=No }
    {    ;Production Order,Main Project No.,Job No.,Posting Date;
                                                   SumIndexFields=Amount,Ovh.Surch.Expected Costs (LCY);
                                                   MaintainSIFTIndex=No }
    {    ;Service Contract No.,Service Source Type,Cost Component,Cost Type,Shortcut Dimension 2 Code,Service Control Year,Posting Date;
                                                   SumIndexFields=Amount,Ovh.Surch.Expected Costs (LCY);
                                                   MaintainSIFTIndex=No }
    {    ;Main Project No.,Job No.,Cost Component,Cost Type,Shortcut Dimension 2 Code,Production Order,Posting Date;
                                                   SumIndexFields=Amount,Ovh.Surch.Expected Costs (LCY);
                                                   MaintainSIFTIndex=No }
    {    ;Main Project No.,Cost Component         ;MaintainSIFTIndex=No }
    {    ;Service Order No.,Cost Type,Shortcut Dimension 2 Code,Cost Component,Service Control Year,Posting Date,Additional Cost (Service);
                                                   SumIndexFields=Amount,Ovh.Surch.Expected Costs (LCY);
                                                   MaintainSIFTIndex=No }
    {    ;Service Location No.,Service Source Type,Cost Type,Shortcut Dimension 2 Code,Cost Component,Service Control Year,Posting Date;
                                                   SumIndexFields=Amount,Ovh.Surch.Expected Costs (LCY);
                                                   MaintainSIFTIndex=No }
    {    ;Base Service Order No.,Service Order No.,Cost Component,Posting Date;
                                                   SumIndexFields=Amount,Ovh.Surch.Expected Costs (LCY);
                                                   MaintainSIFTIndex=No }
    {    ;Job No.,Deliver,Ship To Location,Location Code,Bin Code (Project Inventory),Shelf No.,Item No.;
                                                   MaintainSQLIndex=No;
                                                   MaintainSIFTIndex=No }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      Text001@1001 : TextConst 'ENU=%1 must be reduced.;NOR=%1 m† reduseres.;SVE=%1 m†ste reduceras.';
      Text002@1002 : TextConst 'ENU=You cannot change %1 when %2 is %3.;NOR=Du kan ikke endre %1 n†r %2 er %3.;SVE=Du kan inte „ndra %1 n„r %2 „r %3.';
      Text006@1005 : TextConst 'ENU=You must not enter %1 in a revaluation sum line.;NOR=Du skal ikke angi %1 i en revalueringsumline.;SVE=Du f†r inte ange %1 i en omv„rderingssummerad.';
      ItemJnlTemplate@1007 : Record 82;
      ItemJnlBatch@1008 : Record 233;
      ItemJnlLine@1009 : Record 83;
      Item@1010 : Record 27;
      ItemVariant@1012 : Record 5401;
      GLSetup@1014 : Record 98;
      MfgSetup@1034 : Record 99000765;
      WorkCenter@1040 : Record 99000754;
      MachineCenter@1039 : Record 99000758;
      Location@1048 : Record 14;
      Bin@1030 : Record 7354;
      ICProjSetupRec@1210190010 : Record 315;
      LocRec@1100485003 : Record 14;
      ProjRec@1100485002 : Record 11072003;
      ProjElemRec@1100485001 : Record 11012010;
      ProjLocRec@1100485000 : Record 11012011;
      ExtRec@1100485009 : Record 11012004;
      DimValRec@1100485008 : Record 349;
      ServOrderRec@1100485006 : Record 11012823;
      PlantSetupRec@1100485023 : Record 11012550;
      PlantTypeRec@1100485024 : Record 11012551;
      PlantNoRec@1100485025 : Record 11012552;
      CostCompPlantRec@1100485026 : Record 11012575;
      CostCompRec@1210190004 : Record 11012012;
      GLAcc@1100485027 : Record 15;
      PrevCheckedItemJnlLineRec@1100525001 : Record 83;
      AssemblyYardNumberObject@1100528401 : Record 11020596;
      ItemCheckAvail@1021 : Codeunit 311;
      ReserveItemJnlLine@1022 : Codeunit 99000835;
      NoSeriesMgt@1023 : Codeunit 396;
      UOMMgt@1024 : Codeunit 5402;
      DimMgt@1027 : Codeunit 408;
      ElementFormat@11012020 : Codeunit 11012022;
      ItemMgt@1100485010 : Codeunit 11012033;
      InventorySetup@11012022 : Record 313;
      UserMgt@1033 : Codeunit 5700;
      CalendarMgt@1041 : Codeunit 99000755;
      CostCalcMgt@1042 : Codeunit 5836;
      PurchPriceCalcMgt@1020 : Codeunit 7010;
      SalesPriceCalcMgt@1025 : Codeunit 7000;
      WMSManagement@1026 : Codeunit 7302;
      WhseValidateSourceLine@1032 : Codeunit 5777;
      PhysInvtEntered@1028 : Boolean;
      GLSetupRead@1029 : Boolean;
      MfgSetupRead@1035 : Boolean;
      UnitCost@1031 : Decimal;
      Text007@1006 : TextConst 'ENU="New ";NOR="Ny ";SVE="Ny "';
      UpdateInterruptedErr@1045 : TextConst 'ENU=The update has been interrupted to respect the warning.;NOR=Oppdateringen er avbrutt som en reaksjon p† advarselen.;SVE=Avbryten uppdatering p† grund av varning.';
      Text021@1051 : TextConst 'ENU=The entered bin code %1 is different from the bin code %2 in production order component %3.\\Are you sure that you want to post the consumption from bin code %1?;NOR=Den angitte hyllekoden %1 er ulik hyllekoden %2 i produksjonsordrekomponenten %3.\\Er du sikker p† at du vil bokf›re forbruket fra hyllekode %1?;SVE=Den angivna lagerplatskoden %1 „r inte samma som lagerplatskoden %2 i produktionsorderkomponenten %3.\\Vill du bokf”ra f”rbrukningen fr†n lagerplatskoden %1?';
      Text029@1047 : TextConst 'ENU=must be positive;NOR=m† v‘re positiv;SVE=m†ste vara positivt';
      Text030@1046 : TextConst 'ENU=must be negative;NOR=m† v‘re negativ;SVE=m†ste vara negativt';
      Text031@1043 : TextConst 'ENU=You can not insert item number %1 because it is not produced on released production order %2.;NOR=Du kan ikke sette inn varenummer %1 fordi det ikke er produsert i den frigitte produksjonsordren %2.;SVE=Du kan inte infoga artikel %1 eftersom den inte tillverkas p† den sl„ppta produktionsordern %2.';
      Text032@1000 : TextConst 'ENU=When posting, the entry %1 will be opened first.;NOR=Ved bokf›ring †pnes posten %1 f›rst.;SVE=Vid bokf”ring ”ppnas transaktion %1 f”rst.';
      Text033@1049 : TextConst 'ENU=If the item carries serial or lot numbers, then you must use the %1 field in the %2 window.;NOR=Hvis varen har serie- eller partinummer, m† du bruke %1-feltet i %2-vinduet.;SVE=Om artikeln har serie- eller partinummer m†ste du anv„nda f„ltet %1 i f”nstret %2.';
      RevaluationPerEntryNotAllowedErr@1050 : TextConst 'ENU=This item ledger entry has already been revalued with the Calculate Inventory Value function, so you cannot use the Applies-to Entry field as that may change the valuation.;NOR=Denne vareposten er allerede revaluert med funksjonen Beregn lagerverdi, slik at du ikke kan bruke funksjonen Utligningspost da det kan endre valueringen.;SVE=Det g†r inte att omv„rdera artikeltransaktionsposter f”r artiklar som anv„nder genomsnittsv„rderingsprincipen.';
      SubcontractedErr@1003 : TextConst '@@@=%1 - Field Caption, %2 - Line No.;ENU=%1 must be zero in line number %2 because it is linked to the subcontracted work center.;NOR=%1 m† v‘re null p† linjenummeret %2 fordi det er koblet til arbeidssentret som er underleverand›r.;SVE=%1 m†ste vara noll p† radnummer %2 eftersom det „r l„nkat till produktionsgruppen f”r Underentreprenad.';
      FinishedOutputQst@1004 : TextConst 'ENU=The operation has been finished. Do you want to post output for the finished operation?;NOR=Operasjonen er fullf›rt. Vil du bokf›re avgang for den fullf›rte operasjonen?';
      SalesBlockedErr@1011 : TextConst 'ENU=You cannot sell this item because the Sales Blocked check box is selected on the item card.;NOR=Du kan ikke selge denne varen fordi det er merket av for Salg sperret p† varekortet.';
      PurchasingBlockedErr@1013 : TextConst 'ENU=You cannot purchase this item because the Purchasing Blocked check box is selected on the item card.;NOR=Du kan ikke kj›pe denne varen fordi det er merket av for Kj›p sperret p† varekortet.';
      BlockedErr@1015 : TextConst 'ENU=You cannot purchase this item because the Blocked check box is selected on the item card.;NOR=Du kan ikke kj›pe denne varen fordi det er merket av for Sperret p† varekortet.';
      Dim1@1210190001 : Code[20];
      Dim2@1210190000 : Code[20];
      Text11012001@1210190012 : TextConst 'ENU=Quantity Released exceeds Quantity for Line %1;NOR=Frigitt antall overskrider antall for rad %1;SVE=Sl„ppt antal ”verskrider antal f”r rad %1';
      UpdateAction@1100485011 : 'Insert,Modify,Delete';
      Text11012002@1100525000 : TextConst 'ENU=Item %1 is not dispatched to %2 %3.;NOR=Artikkel %1 er ikke fordelt til %2 %3.;SVE=Artikel %1 har inte levererats till %2 %3.';
      DPA_Management@1100000999 : Codeunit 11012783;
      Text11012003@1210190003 : TextConst 'ENU=The entered %1 %2 is different from the %1 %3 in %4 %5.;NOR=Den angitte %1 %2 skiller seg fra %1 %3 i %4 %5.;SVE=Angiven %1 %2 skiljer sig fr†n %1 %3 i %4 %5.';
      Text11012004@1100528400 : TextConst 'ENU=You cannot post more than %1 units.;NOR=Du kan ikke bokf›re flere enn %1 enheter.;SVE=Du kan inte bokf”ra mer „n %1 stycken.';
      ExistingJobOrServiceItemJlnLineQtyChanged@1100528800 : Boolean;
      OldSrvOrJobItemJlnLineQuantity@1100528801 : Decimal;
      Text11012005@1100529600 : TextConst 'ENU=%1 should be filled.;SVE=%1 ska fyllas i.';

    [External]
    PROCEDURE EmptyLine@5() : Boolean;
    BEGIN
      EXIT(
        (Quantity = 0) AND
        ((TimeIsEmpty AND ("Item No." = '')) OR
         ("Value Entry Type" = "Value Entry Type"::Revaluation)));
    END;

    [External]
    PROCEDURE IsValueEntryForDeletedItem@22() : Boolean;
    BEGIN
      EXIT(
        (("Entry Type" = "Entry Type"::Output) OR ("Value Entry Type" = "Value Entry Type"::Rounding)) AND
        ("Item No." = '') AND ("Item Charge No." = '') AND ("Invoiced Qty. (Base)" <> 0));
    END;

    LOCAL PROCEDURE CalcBaseTime@28(Qty@1000 : Decimal) : Decimal;
    BEGIN
      IF "Run Time" <> 0 THEN
        TESTFIELD("Qty. per Cap. Unit of Measure");
      EXIT(ROUND(Qty * "Qty. per Cap. Unit of Measure",UOMMgt.TimeRndPrecision));
    END;

    LOCAL PROCEDURE UpdateAmount@23();
    BEGIN
      Amount := ROUND(Quantity * "Unit Amount");

      OnAfterUpdateAmount(Rec);
    END;

    LOCAL PROCEDURE SelectItemEntry@3(CurrentFieldNo@1000 : Integer);
    VAR
      ItemLedgEntry@1001 : Record 32;
      ItemJnlLine2@1002 : Record 83;
    BEGIN
      OnBeforeSelectItemEntry(Rec,xRec,CurrentFieldNo);

      IF ("Entry Type" = "Entry Type"::Output) AND
         ("Value Entry Type" <> "Value Entry Type"::Revaluation) AND
         (CurrentFieldNo = FIELDNO("Applies-to Entry"))
      THEN BEGIN
        ItemLedgEntry.SETCURRENTKEY(
          "Order Type","Order No.","Order Line No.","Entry Type","Prod. Order Comp. Line No.");
        ItemLedgEntry.SETRANGE("Order Type","Order Type"::Production);
        ItemLedgEntry.SETRANGE("Order No.","Order No.");
        ItemLedgEntry.SETRANGE("Order Line No.","Order Line No.");
        ItemLedgEntry.SETRANGE("Entry Type","Entry Type");
        ItemLedgEntry.SETRANGE("Prod. Order Comp. Line No.",0);
      END ELSE BEGIN
        ItemLedgEntry.SETCURRENTKEY("Item No.",Positive);
        ItemLedgEntry.SETRANGE("Item No.","Item No.");
      END;

      IF "Location Code" <> '' THEN
        ItemLedgEntry.SETRANGE("Location Code","Location Code");

      IF CurrentFieldNo = FIELDNO("Applies-to Entry") THEN BEGIN
        ItemLedgEntry.SETRANGE(Positive,(Signed(Quantity) < 0) OR ("Value Entry Type" = "Value Entry Type"::Revaluation));
        IF "Value Entry Type" <> "Value Entry Type"::Revaluation THEN BEGIN
          ItemLedgEntry.SETCURRENTKEY("Item No.",Open);
          ItemLedgEntry.SETRANGE(Open,TRUE);
        END;
      END ELSE
        ItemLedgEntry.SETRANGE(Positive,FALSE);

      OnSelectItemEntryOnBeforeOpenPage(ItemLedgEntry,Rec);

      IF PAGE.RUNMODAL(PAGE::"Item Ledger Entries",ItemLedgEntry) = ACTION::LookupOK THEN BEGIN
        ItemJnlLine2 := Rec;
        IF CurrentFieldNo = FIELDNO("Applies-to Entry") THEN
          ItemJnlLine2.VALIDATE("Applies-to Entry",ItemLedgEntry."Entry No.")
        ELSE
          ItemJnlLine2.VALIDATE("Applies-from Entry",ItemLedgEntry."Entry No.");
        CheckItemAvailable(CurrentFieldNo);
        Rec := ItemJnlLine2;
      END;
    END;

    LOCAL PROCEDURE CheckItemAvailable@1(CalledByFieldNo@1000 : Integer);
    VAR
      IsHandled@1001 : Boolean;
    BEGIN
      IF (CurrFieldNo = 0) OR (CurrFieldNo <> CalledByFieldNo) THEN // Prevent two checks on quantity
        EXIT;

      IsHandled := FALSE;
      OnBeforeCheckItemAvailable(Rec,CalledByFieldNo,IsHandled);
      IF IsHandled THEN
        EXIT;

      IF (CurrFieldNo <> 0) AND ("Item No." <> '') AND (Quantity <> 0) AND
         ("Value Entry Type" = "Value Entry Type"::"Direct Cost") AND ("Item Charge No." = '')
      THEN
        //IF ItemCheckAvail.ItemJnlCheckLine(Rec) THEN //**4PS.o
        IF ItemCheckAvail.ItemJnlCheckLine(Rec, ExistingJobOrServiceItemJlnLineQtyChanged, OldSrvOrJobItemJlnLineQuantity) THEN //**4PS.n
          ItemCheckAvail.RaiseUpdateInterruptedError;
    END;

    LOCAL PROCEDURE GetItem@2();
    BEGIN
      IF Item."No." <> "Item No." THEN
        Item.GET("Item No.");

      OnAfterGetItemChange(Item,Rec);
    END;

    [External]
    PROCEDURE SetUpNewLine@8(LastItemJnlLine@1000 : Record 83);
    BEGIN
      MfgSetup.GET;
      ItemJnlTemplate.GET("Journal Template Name");
      ItemJnlBatch.GET("Journal Template Name","Journal Batch Name");
      ItemJnlLine.SETRANGE("Journal Template Name","Journal Template Name");
      ItemJnlLine.SETRANGE("Journal Batch Name","Journal Batch Name");
      IF ItemJnlLine.FINDFIRST THEN BEGIN
        "Posting Date" := LastItemJnlLine."Posting Date";
        "Document Date" := LastItemJnlLine."Posting Date";
        IF (ItemJnlTemplate.Type IN
            [ItemJnlTemplate.Type::Consumption,ItemJnlTemplate.Type::Output])
        THEN BEGIN
          IF NOT MfgSetup."Doc. No. Is Prod. Order No." THEN
            "Document No." := LastItemJnlLine."Document No."
        END ELSE
          "Document No." := LastItemJnlLine."Document No.";
      END ELSE BEGIN
        "Posting Date" := WORKDATE;
        "Document Date" := WORKDATE;
        IF ItemJnlBatch."No. Series" <> '' THEN BEGIN
          CLEAR(NoSeriesMgt);
          "Document No." := NoSeriesMgt.TryGetNextNo(ItemJnlBatch."No. Series","Posting Date");
        END;
        IF (ItemJnlTemplate.Type IN
            [ItemJnlTemplate.Type::Consumption,ItemJnlTemplate.Type::Output]) AND
           NOT MfgSetup."Doc. No. Is Prod. Order No."
        THEN
          IF ItemJnlBatch."No. Series" <> '' THEN BEGIN
            CLEAR(NoSeriesMgt);
            "Document No." := NoSeriesMgt.GetNextNo(ItemJnlBatch."No. Series","Posting Date",FALSE);
          END;
      END;
      "Recurring Method" := LastItemJnlLine."Recurring Method";
      "Entry Type" := LastItemJnlLine."Entry Type";
      "Source Code" := ItemJnlTemplate."Source Code";
      "Reason Code" := ItemJnlBatch."Reason Code";
      "Posting No. Series" := ItemJnlBatch."Posting No. Series";
      IF ItemJnlTemplate.Type = ItemJnlTemplate.Type::Revaluation THEN BEGIN
        "Value Entry Type" := "Value Entry Type"::Revaluation;
        "Entry Type" := "Entry Type"::"Positive Adjmt.";
      END;

      CASE "Entry Type" OF
        "Entry Type"::Purchase:
          //"Location Code" := UserMgt.GetLocation(1,'',UserMgt.GetPurchasesFilter); //**4PS.o
          "Location Code" := UserMgt.GetLocation(1,'',UserMgt.GetPurchasesDefault); //**4PS.n
        "Entry Type"::Sale:
          "Location Code" := UserMgt.GetLocation(0,'',UserMgt.GetSalesFilter);
        "Entry Type"::Output:
          CLEAR(DimMgt);
      END;

      IF Location.GET("Location Code") THEN
        IF  Location."Directed Put-away and Pick" THEN
          "Location Code" := '';

      //**4PS.sn
      ItemJnlTemplate.GET("Journal Template Name");
      IF (ItemJnlTemplate."Location Code" <> '') THEN
        "Location Code" := ItemJnlTemplate."Location Code"; //Can't validate yet
      InventorySetup.GET;
      Blocked := InventorySetup."Default Blocked";
      //**4PS.en

      OnAfterSetupNewLine(Rec,LastItemJnlLine,ItemJnlTemplate);
    END;

    [External]
    PROCEDURE SetDocNos@165(DocType@1000 : Option;DocNo@1001 : Code[20];ExtDocNo@1002 : Text[35];PostingNos@1003 : Code[20]);
    BEGIN
      "Document Type" := DocType;
      "Document No." := DocNo;
      "External Document No." := ExtDocNo;
      "Posting No. Series" := PostingNos;
    END;

    LOCAL PROCEDURE GetUnitAmount@6(CalledByFieldNo@1000 : Integer);
    VAR
      UnitCostValue@1001 : Decimal;
      IsHandled@1002 : Boolean;
    BEGIN
      RetrieveCosts;
      IF ("Value Entry Type" <> "Value Entry Type"::"Direct Cost") OR
         ("Item Charge No." <> '')
      THEN
        EXIT;

      OnBeforeGetUnitAmount(Rec,CalledByFieldNo,IsHandled);
      IF IsHandled THEN
        EXIT;

      UnitCostValue := UnitCost;
      IF (CalledByFieldNo = FIELDNO(Quantity)) AND
         (Item."No." <> '') AND (Item."Costing Method" <> Item."Costing Method"::Standard)
      THEN
        UnitCostValue := "Unit Cost" / UOMMgt.GetQtyPerUnitOfMeasure(Item,"Unit of Measure Code");

      CASE "Entry Type" OF
        "Entry Type"::Purchase:
          PurchPriceCalcMgt.FindItemJnlLinePrice(Rec,CalledByFieldNo);
        "Entry Type"::Sale:
          SalesPriceCalcMgt.FindItemJnlLinePrice(Rec,CalledByFieldNo);
        "Entry Type"::"Positive Adjmt.":
          "Unit Amount" :=
            ROUND(
              ((UnitCostValue - "Overhead Rate") * "Qty. per Unit of Measure") / (1 + "Indirect Cost %" / 100),
              GLSetup."Unit-Amount Rounding Precision");
        "Entry Type"::"Negative Adjmt.":
          "Unit Amount" := UnitCostValue * "Qty. per Unit of Measure";
        "Entry Type"::Transfer:
          "Unit Amount" := 0;
      END;

      //**4PS.sn
      InventorySetup.GET;
      IF (("Job No." <> '') OR ("Service Order No." <> '')) AND (NOT InventorySetup."Item Sales Price for Proj/Serv") THEN
        IF ("Entry Type" = "Entry Type"::Purchase) OR ("Entry Type" = "Entry Type"::Sale) THEN
          "Unit Amount" := UnitCost * "Qty. per Unit of Measure";
      //**4PS.en

      OnAfterGetUnitAmount(Rec);
    END;

    [External]
    PROCEDURE Signed@20(Value@1000 : Decimal) : Decimal;
    BEGIN
      //**4PS.sn DP00121 (C005545)
      IF ("Entry Type" = "Entry Type"::Sale) AND (Quantity < 0) AND (("Job No." + "Service Order No.") <> '') THEN
        EXIT(Value);
      //**4PS.en DP00121 (C005545)

      CASE "Entry Type" OF
        "Entry Type"::Purchase,
        "Entry Type"::"Positive Adjmt.",
        "Entry Type"::Output,
        "Entry Type"::"Assembly Output":
          EXIT(Value);
        "Entry Type"::Sale,
        "Entry Type"::"Negative Adjmt.",
        "Entry Type"::Consumption,
        "Entry Type"::Transfer,
        "Entry Type"::"Assembly Consumption":
          EXIT(-Value);
      END;
    END;

    [External]
    PROCEDURE IsInbound@31() : Boolean;
    BEGIN
      EXIT((Signed(Quantity) > 0) OR (Signed("Invoiced Quantity") > 0));
    END;

    [External]
    PROCEDURE OpenItemTrackingLines@6500(IsReclass@1000 : Boolean);
    BEGIN
      TESTFIELD("Quantity (Base)"); //**4PS DP00121
      ReserveItemJnlLine.CallItemTracking(Rec,IsReclass);
    END;

    LOCAL PROCEDURE PickDimension@48(TableArray@1005 : ARRAY [10] OF Integer;CodeArray@1004 : ARRAY [10] OF Code[20];InheritFromDimSetID@1003 : Integer;InheritFromTableNo@1002 : Integer);
    VAR
      ItemJournalTemplate@1001 : Record 82;
      SourceCode@1000 : Code[10];
      LoopCount@1210190000 : Integer;
    BEGIN
      SourceCode := "Source Code";
      IF SourceCode = '' THEN
        IF ItemJournalTemplate.GET("Journal Template Name") THEN
          SourceCode := ItemJournalTemplate."Source Code";

      //**4PS.sn No dimension for project or serviceorder in case of IC
      IF ("Receiving Company" <> '') AND ("Receiving Company" <> COMPANYNAME)  THEN BEGIN
        FOR LoopCount := 1 TO 5 DO BEGIN
          IF (TableArray[LoopCount] = DATABASE::"Service Order") OR
             (TableArray[LoopCount] = DATABASE::Job)  THEN
          BEGIN
            CodeArray[LoopCount] := '';
          END;
        END;
      END;

      Dim1 := "Shortcut Dimension 1 Code";
      Dim2 := "Shortcut Dimension 2 Code";
      DimMgt.SetCompany("Receiving Company");
      //**4PS.en

      //"Shortcut Dimension 1 Code" := ''; //**4PS.o Must be kept for Department Authorization
      "Shortcut Dimension 2 Code" := '';
      "Dimension Set ID" :=
        DimMgt.GetRecDefaultDimID(
          Rec,CurrFieldNo,TableArray,CodeArray,SourceCode,
          "Shortcut Dimension 1 Code","Shortcut Dimension 2 Code",InheritFromDimSetID,InheritFromTableNo);
      DimMgt.UpdateGlobalDimFromDimSetID("Dimension Set ID","Shortcut Dimension 1 Code","Shortcut Dimension 2 Code");

      //**4PS.sn
      IF (Dim1 <> '') AND ("Shortcut Dimension 1 Code" = '') THEN
        "Shortcut Dimension 1 Code" := Dim1;
      ValidateShortcutDimCode(1,"Shortcut Dimension 1 Code");

      IF (Dim2 <> '') AND
         (("Shortcut Dimension 2 Code" = '') OR
          (CurrFieldNo = FIELDNO("Shortcut Dimension 2 Code")))
      THEN BEGIN
        "Shortcut Dimension 2 Code" := Dim2;
        ValidateShortcutDimCode(2,"Shortcut Dimension 2 Code");
      END;
      //**4PS.en

      IF "Entry Type" = "Entry Type"::Transfer THEN BEGIN
        "New Dimension Set ID" := "Dimension Set ID";
        "New Shortcut Dimension 1 Code" := "Shortcut Dimension 1 Code";
        "New Shortcut Dimension 2 Code" := "Shortcut Dimension 2 Code";
      END;
    END;

    LOCAL PROCEDURE CreateCodeArray@55(VAR CodeArray@1003 : ARRAY [10] OF Code[20];No1@1002 : Code[20];No2@1001 : Code[20];No3@1000 : Code[20];No4@1100525000 : Code[20];No5@1100525001 : Code[20];No6@1100525002 : Code[20]);
    BEGIN
      CLEAR(CodeArray);
      CodeArray[1] := No1;
      CodeArray[2] := No2;
      CodeArray[3] := No3;
      //**4PS.sn
      CodeArray[4] := No4;
      CodeArray[5] := No5;
      CodeArray[6] := No6;
      //**4PS.en
    END;

    LOCAL PROCEDURE CreateTableArray@56(VAR TableID@1001 : ARRAY [10] OF Integer;Type1@1000 : Integer;Type2@1002 : Integer;Type3@1007 : Integer;Type4@1100525000 : Integer;Type5@1100525001 : Integer;Type6@1100525002 : Integer);
    BEGIN
      CLEAR(TableID);
      TableID[1] := Type1;
      TableID[2] := Type2;
      TableID[3] := Type3;
      //**4PS.sn
      TableID[4] := Type4;
      TableID[5] := Type5;
      TableID[6] := Type6;
      //**4PS.en
    END;

    [External]
    PROCEDURE CreateDim@13(Type1@1000 : Integer;No1@1001 : Code[20];Type2@1002 : Integer;No2@1003 : Code[20];Type3@1007 : Integer;No3@1006 : Code[20];Type4@1100525005 : Integer;No4@1100525004 : Code[20];Type5@1100525003 : Integer;No5@1100525002 : Code[20];Type6@1100525001 : Integer;No6@1100525000 : Code[20]);
    VAR
      TableID@1004 : ARRAY [10] OF Integer;
      No@1005 : ARRAY [10] OF Code[20];
    BEGIN
      //**4PS.so
      //CreateTableArray(TableID,Type1,Type2,Type3);
      //CreateCodeArray(No,No1,No2,No3);
      //**4PS.eo
      //**4PS.sn
      CreateTableArray(TableID,Type1,Type2,Type3,Type4,Type5,Type6);
      CreateCodeArray(No,No1,No2,No3,No4,No5,No6);
      //**4PS.en
      PickDimension(TableID,No,0,0);
    END;

    [External]
    PROCEDURE CopyDim@46(DimesionSetID@1000 : Integer);
    VAR
      DimSetEntry@1002 : Record 480;
    BEGIN
      ReadGLSetup;
      "Dimension Set ID" := DimesionSetID;
      DimSetEntry.SETRANGE("Dimension Set ID",DimesionSetID);
      DimSetEntry.SETRANGE("Dimension Code",GLSetup."Global Dimension 1 Code");
      IF DimSetEntry.FINDFIRST THEN
        "Shortcut Dimension 1 Code" := DimSetEntry."Dimension Value Code"
      ELSE
        "Shortcut Dimension 1 Code" := '';
      DimSetEntry.SETRANGE("Dimension Code",GLSetup."Global Dimension 2 Code");
      IF DimSetEntry.FINDFIRST THEN
        "Shortcut Dimension 2 Code" := DimSetEntry."Dimension Value Code"
      ELSE
        "Shortcut Dimension 2 Code" := '';
    END;

    [External]
    PROCEDURE CreateProdDim@25();
    VAR
      ProdOrder@1008 : Record 5405;
      ProdOrderLine@1009 : Record 5406;
      ProdOrderComp@1010 : Record 5407;
      DimSetIDArr@1001 : ARRAY [10] OF Integer;
      i@1000 : Integer;
    BEGIN
      "Shortcut Dimension 1 Code" := '';
      "Shortcut Dimension 2 Code" := '';
      "Dimension Set ID" := 0;
      IF ("Order Type" <> "Order Type"::Production) OR ("Order No." = '') THEN
        EXIT;
      ProdOrder.GET(ProdOrder.Status::Released,"Order No.");
      i := 1;
      DimSetIDArr[i] := ProdOrder."Dimension Set ID";
      IF "Order Line No." <> 0 THEN BEGIN
        i := i + 1;
        ProdOrderLine.GET(ProdOrderLine.Status::Released,"Order No.","Order Line No.");
        DimSetIDArr[i] := ProdOrderLine."Dimension Set ID";
      END;
      IF "Prod. Order Comp. Line No." <> 0 THEN BEGIN
        i := i + 1;
        ProdOrderComp.GET(ProdOrderLine.Status::Released,"Order No.","Order Line No.","Prod. Order Comp. Line No.");
        DimSetIDArr[i] := ProdOrderComp."Dimension Set ID";
      END;

      OnCreateProdDimOnAfterCreateDimSetIDArr(Rec,DimSetIDArr,i);
      "Dimension Set ID" := DimMgt.GetCombinedDimensionSetID(DimSetIDArr,"Shortcut Dimension 1 Code","Shortcut Dimension 2 Code");
    END;

    LOCAL PROCEDURE CreateAssemblyDim@42();
    VAR
      AssemblyHeader@1008 : Record 900;
      AssemblyLine@1009 : Record 901;
      DimSetIDArr@1001 : ARRAY [10] OF Integer;
      i@1000 : Integer;
    BEGIN
      "Shortcut Dimension 1 Code" := '';
      "Shortcut Dimension 2 Code" := '';
      "Dimension Set ID" := 0;
      IF ("Order Type" <> "Order Type"::Assembly) OR ("Order No." = '') THEN
        EXIT;
      AssemblyHeader.GET(AssemblyHeader."Document Type"::Order,"Order No.");
      i := 1;
      DimSetIDArr[i] := AssemblyHeader."Dimension Set ID";
      IF "Order Line No." <> 0 THEN BEGIN
        i := i + 1;
        AssemblyLine.GET(AssemblyLine."Document Type"::Order,"Order No.","Order Line No.");
        DimSetIDArr[i] := AssemblyLine."Dimension Set ID";
      END;

      OnCreateAssemblyDimOnAfterCreateDimSetIDArr(Rec,DimSetIDArr,i);
      "Dimension Set ID" := DimMgt.GetCombinedDimensionSetID(DimSetIDArr,"Shortcut Dimension 1 Code","Shortcut Dimension 2 Code");
    END;

    LOCAL PROCEDURE CreateDimWithProdOrderLine@54();
    VAR
      ProdOrderLine@1005 : Record 5406;
      InheritFromDimSetID@1004 : Integer;
      TableID@1001 : ARRAY [10] OF Integer;
      No@1000 : ARRAY [10] OF Code[20];
    BEGIN
      IF "Order Type" = "Order Type"::Production THEN
        IF ProdOrderLine.GET(ProdOrderLine.Status::Released,"Order No.","Order Line No.") THEN
          InheritFromDimSetID := ProdOrderLine."Dimension Set ID";

      //**4PS.so
      //CreateTableArray(TableID,DATABASE::"Work Center",DATABASE::"Salesperson/Purchaser",0);
      //CreateCodeArray(No,"Work Center No.","Salespers./Purch. Code",'');
      //**4PS.eo
      //**4PS.sn
      CreateTableArray(TableID,DATABASE::"Work Center",DATABASE::"Salesperson/Purchaser",0,0,0,0);
      CreateCodeArray(No,"Work Center No.","Salespers./Purch. Code",'','','','');
      //**4PS.en

      OnAfterCreateDimTableIDs(Rec,CurrFieldNo,TableID,No);
      PickDimension(TableID,No,InheritFromDimSetID,DATABASE::Item);
    END;

    [External]
    PROCEDURE ValidateShortcutDimCode@9(FieldNumber@1000 : Integer;VAR ShortcutDimCode@1001 : Code[20]);
    BEGIN
      //**4PS.sn
      IF FieldNumber = 1 THEN
        DimMgt.CheckDepartmentAuthorization(DATABASE::"Item Journal Line", ShortcutDimCode);
      DimMgt.SetCompany("Receiving Company");
      //**4PS.en
      DimMgt.ValidateShortcutDimValues(FieldNumber,ShortcutDimCode,"Dimension Set ID");
    END;

    [External]
    PROCEDURE LookupShortcutDimCode@18(FieldNumber@1000 : Integer;VAR ShortcutDimCode@1001 : Code[20]);
    BEGIN
      DimMgt.SetCompany("Receiving Company"); //**4PS.n
      DimMgt.LookupDimValueCode(FieldNumber,ShortcutDimCode);
      DimMgt.ValidateShortcutDimValues(FieldNumber,ShortcutDimCode,"Dimension Set ID");
    END;

    [External]
    PROCEDURE ShowShortcutDimCode@15(VAR ShortcutDimCode@1000 : ARRAY [8] OF Code[20]);
    BEGIN
      DimMgt.SetCompany("Receiving Company"); //**4PS.n
      DimMgt.GetShortcutDimensions("Dimension Set ID",ShortcutDimCode);
    END;

    [External]
    PROCEDURE ValidateNewShortcutDimCode@19(FieldNumber@1000 : Integer;VAR NewShortcutDimCode@1001 : Code[20]);
    BEGIN
      DimMgt.SetCompany("Receiving Company"); //**4PS.n
      DimMgt.ValidateShortcutDimValues(FieldNumber,NewShortcutDimCode,"New Dimension Set ID");
    END;

    [External]
    PROCEDURE LookupNewShortcutDimCode@21(FieldNumber@1000 : Integer;VAR NewShortcutDimCode@1001 : Code[20]);
    BEGIN
      DimMgt.SetCompany("Receiving Company"); //**4PS.n
      DimMgt.LookupDimValueCode(FieldNumber,NewShortcutDimCode);
      DimMgt.ValidateShortcutDimValues(FieldNumber,NewShortcutDimCode,"New Dimension Set ID");
    END;

    [External]
    PROCEDURE ShowNewShortcutDimCode@16(VAR NewShortcutDimCode@1000 : ARRAY [8] OF Code[20]);
    BEGIN
      DimMgt.SetCompany("Receiving Company"); //**4PS.n
      DimMgt.GetShortcutDimensions("New Dimension Set ID",NewShortcutDimCode);
    END;

    LOCAL PROCEDURE InitRevalJnlLine@5800(ItemLedgEntry2@1000 : Record 32);
    VAR
      ItemApplnEntry@1002 : Record 339;
      ValueEntry@1001 : Record 5802;
      CostAmtActual@1003 : Decimal;
    BEGIN
      IF "Value Entry Type" <> "Value Entry Type"::Revaluation THEN
        EXIT;

      ItemLedgEntry2.TESTFIELD("Item No.","Item No.");
      ItemLedgEntry2.TESTFIELD("Completely Invoiced",TRUE);
      ItemLedgEntry2.TESTFIELD(Positive,TRUE);
      ItemApplnEntry.CheckAppliedFromEntryToAdjust(ItemLedgEntry2."Entry No.");

      VALIDATE("Entry Type",ItemLedgEntry2."Entry Type");
      "Posting Date" := ItemLedgEntry2."Posting Date";
      VALIDATE("Unit Amount",0);
      VALIDATE(Quantity,ItemLedgEntry2."Invoiced Quantity");

      ValueEntry.RESET;
      ValueEntry.SETCURRENTKEY("Item Ledger Entry No.","Entry Type");
      ValueEntry.SETRANGE("Item Ledger Entry No.",ItemLedgEntry2."Entry No.");
      ValueEntry.SETFILTER("Entry Type",'<>%1',ValueEntry."Entry Type"::Rounding);
      ValueEntry.FIND('-');
      REPEAT
        IF NOT (ValueEntry."Expected Cost" OR ValueEntry."Partial Revaluation") THEN
          CostAmtActual := CostAmtActual + ValueEntry."Cost Amount (Actual)";
      UNTIL ValueEntry.NEXT = 0;

      VALIDATE("Inventory Value (Calculated)",CostAmtActual);
      VALIDATE("Inventory Value (Revalued)",CostAmtActual);

      "Location Code" := ItemLedgEntry2."Location Code";
      "Variant Code" := ItemLedgEntry2."Variant Code";
      "Applies-to Entry" := ItemLedgEntry2."Entry No.";
      CopyDim(ItemLedgEntry2."Dimension Set ID");
    END;

    [External]
    PROCEDURE CopyDocumentFields@129(DocType@1004 : Option;DocNo@1003 : Code[20];ExtDocNo@1002 : Text[35];SourceCode@1001 : Code[10];NoSeriesCode@1000 : Code[20]);
    BEGIN
      "Document Type" := DocType;
      "Document No." := DocNo;
      "External Document No." := ExtDocNo;
      "Source Code" := SourceCode;
      IF NoSeriesCode <> '' THEN
        "Posting No. Series" := NoSeriesCode;
    END;

    [External]
    PROCEDURE CopyFromSalesHeader@58(SalesHeader@1000 : Record 36);
    BEGIN
      "Posting Date" := SalesHeader."Posting Date";
      "Document Date" := SalesHeader."Document Date";
      "Order Date" := SalesHeader."Order Date";
      "Source Posting Group" := SalesHeader."Customer Posting Group";
      "Salespers./Purch. Code" := SalesHeader."Salesperson Code";
      "Reason Code" := SalesHeader."Reason Code";
      "Source Currency Code" := SalesHeader."Currency Code";
      "Shpt. Method Code" := SalesHeader."Shipment Method Code";

      //**4PS.sn
      "Country/Region of Origin/Dest." := SalesHeader."Country of Origin";
      //**4PS.en

      OnAfterCopyItemJnlLineFromSalesHeader(Rec,SalesHeader);
    END;

    [External]
    PROCEDURE CopyFromSalesLine@12(SalesLine@1000 : Record 37);
    BEGIN
      "Item No." := SalesLine."No.";
      Description := SalesLine.Description;
      "Shortcut Dimension 1 Code" := SalesLine."Shortcut Dimension 1 Code";
      "Shortcut Dimension 2 Code" := SalesLine."Shortcut Dimension 2 Code";
      "Dimension Set ID" := SalesLine."Dimension Set ID";
      "Location Code" := SalesLine."Location Code";
      "Bin Code" := SalesLine."Bin Code";
      "Variant Code" := SalesLine."Variant Code";
      "Inventory Posting Group" := SalesLine."Posting Group";
      "Gen. Bus. Posting Group" := SalesLine."Gen. Bus. Posting Group";
      "Gen. Prod. Posting Group" := SalesLine."Gen. Prod. Posting Group";
      "Transaction Type" := SalesLine."Transaction Type";
      "Transport Method" := SalesLine."Transport Method";
      "Entry/Exit Point" := SalesLine."Exit Point";
      Area := SalesLine.Area;
      "Transaction Specification" := SalesLine."Transaction Specification";
      "Drop Shipment" := SalesLine."Drop Shipment";
      "Entry Type" := "Entry Type"::Sale;
      "Unit of Measure Code" := SalesLine."Unit of Measure Code";
      "Qty. per Unit of Measure" := SalesLine."Qty. per Unit of Measure";
      "Derived from Blanket Order" := SalesLine."Blanket Order No." <> '';
      "Cross-Reference No." := SalesLine."Cross-Reference No.";
      "Originally Ordered No." := SalesLine."Originally Ordered No.";
      "Originally Ordered Var. Code" := SalesLine."Originally Ordered Var. Code";
      "Out-of-Stock Substitution" := SalesLine."Out-of-Stock Substitution";
      "Item Category Code" := SalesLine."Item Category Code";
      Nonstock := SalesLine.Nonstock;
      "Purchasing Code" := SalesLine."Purchasing Code";
      "Return Reason Code" := SalesLine."Return Reason Code";
      "Planned Delivery Date" := SalesLine."Planned Delivery Date";
      "Document Line No." := SalesLine."Line No.";
      "Unit Cost" := SalesLine."Unit Cost (LCY)";
      "Unit Cost (ACY)" := SalesLine."Unit Cost";
      "Value Entry Type" := "Value Entry Type"::"Direct Cost";
      "Source Type" := "Source Type"::Customer;
      "Source No." := SalesLine."Sell-to Customer No.";
      "Invoice-to Source No." := SalesLine."Bill-to Customer No.";

      //**4PS.sn
      "Description 2" := SalesLine."Description 2";
      "Cost Component" := SalesLine."Cost Component";
      //**4PS.en

      OnAfterCopyItemJnlLineFromSalesLine(Rec,SalesLine);
    END;

    [External]
    PROCEDURE CopyFromPurchHeader@57(PurchHeader@1000 : Record 38);
    BEGIN
      "Posting Date" := PurchHeader."Posting Date";
      "Document Date" := PurchHeader."Document Date";
      "Source Posting Group" := PurchHeader."Vendor Posting Group";
      "Salespers./Purch. Code" := PurchHeader."Purchaser Code";
      "Country/Region Code" := PurchHeader."Buy-from Country/Region Code";
      "Reason Code" := PurchHeader."Reason Code";
      "Source Currency Code" := PurchHeader."Currency Code";
      "Shpt. Method Code" := PurchHeader."Shipment Method Code";

      //**4PS.sn
      "Country/Region of Origin/Dest." := PurchHeader."Country of Destination";
      //**4PS.en

      OnAfterCopyItemJnlLineFromPurchHeader(Rec,PurchHeader);
    END;

    [External]
    PROCEDURE CopyFromPurchLine@160(PurchLine@1000 : Record 39);
    BEGIN
      "Item No." := PurchLine."No.";
      Description := PurchLine.Description;
      "Shortcut Dimension 1 Code" := PurchLine."Shortcut Dimension 1 Code";
      "Shortcut Dimension 2 Code" := PurchLine."Shortcut Dimension 2 Code";
      "Dimension Set ID" := PurchLine."Dimension Set ID";
      "Location Code" := PurchLine."Location Code";
      "Bin Code" := PurchLine."Bin Code";
      "Variant Code" := PurchLine."Variant Code";
      "Item Category Code" := PurchLine."Item Category Code";
      "Inventory Posting Group" := PurchLine."Posting Group";
      "Gen. Bus. Posting Group" := PurchLine."Gen. Bus. Posting Group";
      "Gen. Prod. Posting Group" := PurchLine."Gen. Prod. Posting Group";
      "Job No." := PurchLine."Job No.";
      "Job Task No." := PurchLine."Job Task No.";
      IF "Job No." <> '' THEN
        "Job Purchase" := TRUE;
      "Applies-to Entry" := PurchLine."Appl.-to Item Entry";
      "Transaction Type" := PurchLine."Transaction Type";
      "Transport Method" := PurchLine."Transport Method";
      "Entry/Exit Point" := PurchLine."Entry Point";
      Area := PurchLine.Area;
      "Transaction Specification" := PurchLine."Transaction Specification";
      "Drop Shipment" := PurchLine."Drop Shipment";
      "Entry Type" := "Entry Type"::Purchase;
      IF PurchLine."Prod. Order No." <> '' THEN BEGIN
        "Order Type" := "Order Type"::Production;
        "Order No." := PurchLine."Prod. Order No.";
        "Order Line No." := PurchLine."Prod. Order Line No.";
      END;
      "Unit of Measure Code" := PurchLine."Unit of Measure Code";
      "Qty. per Unit of Measure" := PurchLine."Qty. per Unit of Measure";
      "Cross-Reference No." := PurchLine."Cross-Reference No.";
      "Document Line No." := PurchLine."Line No.";
      "Unit Cost" := PurchLine."Unit Cost (LCY)";
      "Unit Cost (ACY)" := PurchLine."Unit Cost";
      "Value Entry Type" := "Value Entry Type"::"Direct Cost";
      "Source Type" := "Source Type"::Vendor;
      "Source No." := PurchLine."Buy-from Vendor No.";
      "Invoice-to Source No." := PurchLine."Pay-to Vendor No.";
      "Purchasing Code" := PurchLine."Purchasing Code";
      "Indirect Cost %" := PurchLine."Indirect Cost %";
      "Overhead Rate" := PurchLine."Overhead Rate";
      "Return Reason Code" := PurchLine."Return Reason Code";

      //**4PS.sn
      "Description 2" := PurchLine."Description 2";
      "Cost Component" := PurchLine."Cost Component";

      IF (NOT Item.GET(PurchLine."Item No.")) THEN
        Item.INIT;
      IF (Item."Reason Code F-Gases Mandatory") OR (PurchLine."Reason Code" <> '') THEN
        "Reason Code" := PurchLine."Reason Code";
      //**4PS.en

      OnAfterCopyItemJnlLineFromPurchLine(Rec,PurchLine);
    END;

    [External]
    PROCEDURE CopyFromServHeader@59(ServiceHeader@1000 : Record 5900);
    BEGIN
      "Document Date" := ServiceHeader."Document Date";
      "Order Date" := ServiceHeader."Order Date";
      "Source Posting Group" := ServiceHeader."Customer Posting Group";
      "Salespers./Purch. Code" := ServiceHeader."Salesperson Code";
      "Country/Region Code" := ServiceHeader."VAT Country/Region Code";
      "Reason Code" := ServiceHeader."Reason Code";
      "Source Type" := "Source Type"::Customer;
      "Source No." := ServiceHeader."Customer No.";
      "Shpt. Method Code" := ServiceHeader."Shipment Method Code";

      OnAfterCopyItemJnlLineFromServHeader(Rec,ServiceHeader);
    END;

    [External]
    PROCEDURE CopyFromServLine@17(ServiceLine@1000 : Record 5902);
    BEGIN
      "Item No." := ServiceLine."No.";
      "Posting Date" := ServiceLine."Posting Date";
      Description := ServiceLine.Description;
      "Shortcut Dimension 1 Code" := ServiceLine."Shortcut Dimension 1 Code";
      "Shortcut Dimension 2 Code" := ServiceLine."Shortcut Dimension 2 Code";
      "Dimension Set ID" := ServiceLine."Dimension Set ID";
      "Location Code" := ServiceLine."Location Code";
      "Bin Code" := ServiceLine."Bin Code";
      "Variant Code" := ServiceLine."Variant Code";
      "Inventory Posting Group" := ServiceLine."Posting Group";
      "Gen. Bus. Posting Group" := ServiceLine."Gen. Bus. Posting Group";
      "Gen. Prod. Posting Group" := ServiceLine."Gen. Prod. Posting Group";
      "Applies-to Entry" := ServiceLine."Appl.-to Item Entry";
      "Transaction Type" := ServiceLine."Transaction Type";
      "Transport Method" := ServiceLine."Transport Method";
      "Entry/Exit Point" := ServiceLine."Exit Point";
      Area := ServiceLine.Area;
      "Transaction Specification" := ServiceLine."Transaction Specification";
      "Entry Type" := "Entry Type"::Sale;
      "Unit of Measure Code" := ServiceLine."Unit of Measure Code";
      "Qty. per Unit of Measure" := ServiceLine."Qty. per Unit of Measure";
      "Derived from Blanket Order" := FALSE;
      "Item Category Code" := ServiceLine."Item Category Code";
      Nonstock := ServiceLine.Nonstock;
      "Return Reason Code" := ServiceLine."Return Reason Code";
      "Order Type" := "Order Type"::Service;
      "Order No." := ServiceLine."Document No.";
      "Order Line No." := ServiceLine."Line No.";
      "Job No." := ServiceLine."Job No.";
      "Job Task No." := ServiceLine."Job Task No.";

      OnAfterCopyItemJnlLineFromServLine(Rec,ServiceLine);
    END;

    [External]
    PROCEDURE CopyFromServShptHeader@53(ServShptHeader@1000 : Record 5990);
    BEGIN
      "Document Date" := ServShptHeader."Document Date";
      "Order Date" := ServShptHeader."Order Date";
      "Country/Region Code" := ServShptHeader."VAT Country/Region Code";
      "Source Posting Group" := ServShptHeader."Customer Posting Group";
      "Salespers./Purch. Code" := ServShptHeader."Salesperson Code";
      "Reason Code" := ServShptHeader."Reason Code";

      OnAfterCopyItemJnlLineFromServShptHeader(Rec,ServShptHeader);
    END;

    [External]
    PROCEDURE CopyFromServShptLine@51(ServShptLine@1000 : Record 5991);
    BEGIN
      "Item No." := ServShptLine."No.";
      Description := ServShptLine.Description;
      "Gen. Bus. Posting Group" := ServShptLine."Gen. Bus. Posting Group";
      "Gen. Prod. Posting Group" := ServShptLine."Gen. Prod. Posting Group";
      "Inventory Posting Group" := ServShptLine."Posting Group";
      "Location Code" := ServShptLine."Location Code";
      "Unit of Measure Code" := ServShptLine."Unit of Measure Code";
      "Qty. per Unit of Measure" := ServShptLine."Qty. per Unit of Measure";
      "Variant Code" := ServShptLine."Variant Code";
      "Bin Code" := ServShptLine."Bin Code";
      "Shortcut Dimension 1 Code" := ServShptLine."Shortcut Dimension 1 Code";
      "Shortcut Dimension 2 Code" := ServShptLine."Shortcut Dimension 2 Code";
      "Dimension Set ID" := ServShptLine."Dimension Set ID";
      "Entry/Exit Point" := ServShptLine."Exit Point";
      "Value Entry Type" := ItemJnlLine."Value Entry Type"::"Direct Cost";
      "Transaction Type" := ServShptLine."Transaction Type";
      "Transport Method" := ServShptLine."Transport Method";
      Area := ServShptLine.Area;
      "Transaction Specification" := ServShptLine."Transaction Specification";
      "Qty. per Unit of Measure" := ServShptLine."Qty. per Unit of Measure";
      "Item Category Code" := ServShptLine."Item Category Code";
      Nonstock := ServShptLine.Nonstock;
      "Return Reason Code" := ServShptLine."Return Reason Code";

      OnAfterCopyItemJnlLineFromServShptLine(Rec,ServShptLine);
    END;

    [External]
    PROCEDURE CopyFromServShptLineUndo@60(ServShptLine@1000 : Record 5991);
    BEGIN
      "Item No." := ServShptLine."No.";
      "Posting Date" := ServShptLine."Posting Date";
      "Order Date" := ServShptLine."Order Date";
      "Inventory Posting Group" := ServShptLine."Posting Group";
      "Gen. Bus. Posting Group" := ServShptLine."Gen. Bus. Posting Group";
      "Gen. Prod. Posting Group" := ServShptLine."Gen. Prod. Posting Group";
      "Location Code" := ServShptLine."Location Code";
      "Variant Code" := ServShptLine."Variant Code";
      "Bin Code" := ServShptLine."Bin Code";
      "Entry/Exit Point" := ServShptLine."Exit Point";
      "Shortcut Dimension 1 Code" := ServShptLine."Shortcut Dimension 1 Code";
      "Shortcut Dimension 2 Code" := ServShptLine."Shortcut Dimension 2 Code";
      "Dimension Set ID" := ServShptLine."Dimension Set ID";
      "Value Entry Type" := "Value Entry Type"::"Direct Cost";
      "Item No." := ServShptLine."No.";
      Description := ServShptLine.Description;
      "Location Code" := ServShptLine."Location Code";
      "Variant Code" := ServShptLine."Variant Code";
      "Transaction Type" := ServShptLine."Transaction Type";
      "Transport Method" := ServShptLine."Transport Method";
      Area := ServShptLine.Area;
      "Transaction Specification" := ServShptLine."Transaction Specification";
      "Unit of Measure Code" := ServShptLine."Unit of Measure Code";
      "Qty. per Unit of Measure" := ServShptLine."Qty. per Unit of Measure";
      "Derived from Blanket Order" := FALSE;
      "Item Category Code" := ServShptLine."Item Category Code";
      Nonstock := ServShptLine.Nonstock;
      "Return Reason Code" := ServShptLine."Return Reason Code";

      OnAfterCopyItemJnlLineFromServShptLineUndo(Rec,ServShptLine);
    END;

    [External]
    PROCEDURE CopyFromJobJnlLine@76(JobJnlLine@1000 : Record 11072008);
    BEGIN
      "Line No." := JobJnlLine."Line No.";
      "Item No." := JobJnlLine."No.";
      "Posting Date" := JobJnlLine."Posting Date";
      "Document Date" := JobJnlLine."Document Date";
      "Document No." := JobJnlLine."Document No.";
      "External Document No." := JobJnlLine."External Document No.";
      Description := JobJnlLine.Description;
      "Location Code" := JobJnlLine."Location Code";
      "Applies-to Entry" := JobJnlLine."Applies-to Entry";
      "Applies-from Entry" := JobJnlLine."Applies-from Entry";
      "Shortcut Dimension 1 Code" := JobJnlLine."Shortcut Dimension 1 Code";
      "Shortcut Dimension 2 Code" := JobJnlLine."Shortcut Dimension 2 Code";
      "Dimension Set ID" := JobJnlLine."Dimension Set ID";
      "Country/Region Code" := JobJnlLine."Country/Region Code";
      "Entry Type" := "Entry Type"::"Negative Adjmt.";
      "Source Code" := JobJnlLine."Source Code";
      "Gen. Bus. Posting Group" := JobJnlLine."Gen. Bus. Posting Group";
      "Gen. Prod. Posting Group" := JobJnlLine."Gen. Prod. Posting Group";
      "Posting No. Series" := JobJnlLine."Posting No. Series";
      "Variant Code" := JobJnlLine."Variant Code";
      "Bin Code" := JobJnlLine."Bin Code";
      "Unit of Measure Code" := JobJnlLine."Unit of Measure Code";
      "Reason Code" := JobJnlLine."Reason Code";
      "Transaction Type" := JobJnlLine."Transaction Type";
      "Transport Method" := JobJnlLine."Transport Method";
      "Entry/Exit Point" := JobJnlLine."Entry/Exit Point";
      Area := JobJnlLine.Area;
      "Transaction Specification" := JobJnlLine."Transaction Specification";
      "Invoiced Quantity" := JobJnlLine.Quantity;
      "Invoiced Qty. (Base)" := JobJnlLine."Quantity (Base)";
      "Source Currency Code" := JobJnlLine."Source Currency Code";
      Quantity := JobJnlLine.Quantity;
      "Quantity (Base)" := JobJnlLine."Quantity (Base)";
      "Qty. per Unit of Measure" := JobJnlLine."Qty. per Unit of Measure";
      "Unit Cost" := JobJnlLine."Unit Cost (LCY)";
      "Unit Cost (ACY)" := JobJnlLine."Unit Cost";
      Amount := JobJnlLine."Total Cost (LCY)";
      "Amount (ACY)" := JobJnlLine."Total Cost";
      "Value Entry Type" := "Value Entry Type"::"Direct Cost";
      "Job No." := JobJnlLine."Job No.";
      "Job Task No." := JobJnlLine."Job Task No.";
      "Shpt. Method Code" := JobJnlLine."Shpt. Method Code";

      //**4PS.sn
      "Description 2" := JobJnlLine."Description 2";
      "Cost Component" := JobJnlLine."Cost Component";
      //**4PS.en
      OnAfterCopyItemJnlLineFromJobJnlLine(Rec,JobJnlLine);
    END;

    LOCAL PROCEDURE CopyFromProdOrderComp@84(ProdOrderComp@1000 : Record 5407);
    BEGIN
      VALIDATE("Order Line No.",ProdOrderComp."Prod. Order Line No.");
      VALIDATE("Prod. Order Comp. Line No.",ProdOrderComp."Line No.");
      "Unit of Measure Code" := ProdOrderComp."Unit of Measure Code";
      "Location Code" := ProdOrderComp."Location Code";
      VALIDATE("Variant Code",ProdOrderComp."Variant Code");
      VALIDATE("Bin Code",ProdOrderComp."Bin Code");

      OnAfterCopyFromProdOrderComp(Rec,ProdOrderComp);
    END;

    LOCAL PROCEDURE CopyFromProdOrderLine@91(ProdOrderLine@1000 : Record 5406);
    BEGIN
      VALIDATE("Order Line No.",ProdOrderLine."Line No.");
      "Unit of Measure Code" := ProdOrderLine."Unit of Measure Code";
      "Location Code" := ProdOrderLine."Location Code";
      VALIDATE("Variant Code",ProdOrderLine."Variant Code");
      VALIDATE("Bin Code",ProdOrderLine."Bin Code");

      OnAfterCopyFromProdOrderLine(Rec,ProdOrderLine);
    END;

    LOCAL PROCEDURE CopyFromWorkCenter@86(WorkCenter@1000 : Record 99000754);
    BEGIN
      "Work Center No." := WorkCenter."No.";
      Description := WorkCenter.Name;
      "Gen. Prod. Posting Group" := WorkCenter."Gen. Prod. Posting Group";
      "Unit Cost Calculation" := WorkCenter."Unit Cost Calculation";

      OnAfterCopyFromWorkCenter(Rec,WorkCenter);
    END;

    LOCAL PROCEDURE CopyFromMachineCenter@93(MachineCenter@1000 : Record 99000758);
    BEGIN
      "Work Center No." := MachineCenter."Work Center No.";
      Description := MachineCenter.Name;
      "Gen. Prod. Posting Group" := MachineCenter."Gen. Prod. Posting Group";
      "Unit Cost Calculation" := "Unit Cost Calculation"::Time;

      OnAfterCopyFromMachineCenter(Rec,MachineCenter);
    END;

    LOCAL PROCEDURE ReadGLSetup@5801();
    BEGIN
      IF NOT GLSetupRead THEN BEGIN
        GLSetup.GET;
        GLSetupRead := TRUE;
      END;

      OnAfterReadGLSetup(GLSetup);
    END;

    LOCAL PROCEDURE RetrieveCosts@5803();
    VAR
      SKU@1000 : Record 5700;
      InventorySetup@1001 : Record 313;
      IsHandled@1002 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeRetrieveCosts(Rec,UnitCost,IsHandled);
      IF IsHandled THEN
        EXIT;

      IF ("Value Entry Type" <> "Value Entry Type"::"Direct Cost") OR
         ("Item Charge No." <> '')
      THEN
        EXIT;

      ReadGLSetup;
      GetItem;

      InventorySetup.GET;
      IF InventorySetup."Average Cost Calc. Type" = InventorySetup."Average Cost Calc. Type"::Item THEN
        UnitCost := Item."Unit Cost"
      ELSE
        IF SKU.GET("Location Code","Item No.","Variant Code") THEN
          UnitCost := SKU."Unit Cost"
        ELSE
          UnitCost := Item."Unit Cost";

      //**4PS.sn M23305
      IF SKU.GET("Location Code","Item No.","Variant Code") THEN
        IF SKU.Consignment THEN
          UnitCost := 0;
      //**4PS.en M23305

      IF "Entry Type" = "Entry Type"::Transfer THEN
        UnitCost := 0
      ELSE
        IF Item."Costing Method" <> Item."Costing Method"::Standard THEN
          UnitCost := ROUND(UnitCost,GLSetup."Unit-Amount Rounding Precision");
    END;

    LOCAL PROCEDURE CalcUnitCost@5804(ItemLedgEntry@1000 : Record 32) : Decimal;
    VAR
      ValueEntry@1001 : Record 5802;
      UnitCost@1002 : Decimal;
    BEGIN
      WITH ValueEntry DO BEGIN
        RESET;
        SETCURRENTKEY("Item Ledger Entry No.");
        SETRANGE("Item Ledger Entry No.",ItemLedgEntry."Entry No.");
        CALCSUMS("Cost Amount (Expected)","Cost Amount (Actual)");
        UnitCost :=
          ("Cost Amount (Expected)" + "Cost Amount (Actual)") / ItemLedgEntry.Quantity;
      END;
      EXIT(ABS(UnitCost * "Qty. per Unit of Measure"));
    END;

    LOCAL PROCEDURE ClearSingleAndRolledUpCosts@4();
    BEGIN
      "Single-Level Material Cost" := "Unit Cost (Revalued)";
      "Single-Level Capacity Cost" := 0;
      "Single-Level Subcontrd. Cost" := 0;
      "Single-Level Cap. Ovhd Cost" := 0;
      "Single-Level Mfg. Ovhd Cost" := 0;
      "Rolled-up Material Cost" := "Unit Cost (Revalued)";
      "Rolled-up Capacity Cost" := 0;
      "Rolled-up Subcontracted Cost" := 0;
      "Rolled-up Mfg. Ovhd Cost" := 0;
      "Rolled-up Cap. Overhead Cost" := 0;
    END;

    LOCAL PROCEDURE GetMfgSetup@7();
    BEGIN
      IF NOT MfgSetupRead THEN
        MfgSetup.GET;
      MfgSetupRead := TRUE;
    END;

    LOCAL PROCEDURE GetProdOrderRtngLine@27(VAR ProdOrderRtngLine@1000 : Record 5409);
    BEGIN
      TESTFIELD("Order Type","Order Type"::Production);
      TESTFIELD("Order No.");
      TESTFIELD("Operation No.");

      ProdOrderRtngLine.GET(
        ProdOrderRtngLine.Status::Released,
        "Order No.","Routing Reference No.","Routing No.","Operation No.");
    END;

    [External]
    PROCEDURE OnlyStopTime@24() : Boolean;
    BEGIN
      EXIT(("Setup Time" = 0) AND ("Run Time" = 0) AND ("Stop Time" <> 0));
    END;

    [External]
    PROCEDURE OutputValuePosting@29() : Boolean;
    BEGIN
      EXIT(TimeIsEmpty AND ("Invoiced Quantity" <> 0) AND NOT Subcontracting);
    END;

    [External]
    PROCEDURE TimeIsEmpty@26() : Boolean;
    BEGIN
      EXIT(("Setup Time" = 0) AND ("Run Time" = 0) AND ("Stop Time" = 0));
    END;

    [External]
    PROCEDURE RowID1@44() : Text[250];
    VAR
      ItemTrackingMgt@1000 : Codeunit 6500;
    BEGIN
      EXIT(
        ItemTrackingMgt.ComposeRowID(DATABASE::"Item Journal Line","Entry Type",
          "Journal Template Name","Journal Batch Name",0,"Line No."));
    END;

    LOCAL PROCEDURE GetLocation@7300(LocationCode@1000 : Code[10]);
    BEGIN
      IF LocationCode = '' THEN
        CLEAR(Location)
      ELSE
        IF Location.Code <> LocationCode THEN
          Location.GET(LocationCode);
    END;

    LOCAL PROCEDURE GetBin@36(LocationCode@1000 : Code[10];BinCode@1001 : Code[20]);
    BEGIN
      IF BinCode = '' THEN
        CLEAR(Bin)
      ELSE
        IF (Bin.Code <> BinCode) OR (Bin."Location Code" <> LocationCode) THEN
          Bin.GET(LocationCode,BinCode);
    END;

    [External]
    PROCEDURE ItemPosting@33() : Boolean;
    VAR
      ProdOrderRoutingLine@1000 : Record 5409;
      NextOperationNoIsEmpty@1001 : Boolean;
      IsHandled@1002 : Boolean;
    BEGIN
      IF ("Entry Type" = "Entry Type"::Output) AND ("Output Quantity" <> 0) AND ("Operation No." <> '') THEN BEGIN
        ProdOrderRoutingLine.GET(
          ProdOrderRoutingLine.Status::Released,"Order No.","Routing Reference No.","Routing No.","Operation No.");
        IsHandled := FALSE;
        OnAfterItemPosting(ProdOrderRoutingLine,NextOperationNoIsEmpty,IsHandled);
        IF IsHandled THEN
          EXIT(NextOperationNoIsEmpty);
        EXIT(ProdOrderRoutingLine."Next Operation No." = '');
      END;

      EXIT(TRUE);
    END;

    LOCAL PROCEDURE CheckPlanningAssignment@34();
    BEGIN
      IF ("Quantity (Base)" <> 0) AND ("Item No." <> '') AND ("Posting Date" <> 0D) AND
         ("Entry Type" IN ["Entry Type"::"Negative Adjmt.","Entry Type"::"Positive Adjmt.","Entry Type"::Transfer])
      THEN BEGIN
        IF ("Entry Type" = "Entry Type"::Transfer) AND ("Location Code" = "New Location Code") THEN
          EXIT;

        ReserveItemJnlLine.AssignForPlanning(Rec);
      END;
    END;

    [External]
    PROCEDURE LastOutputOperation@35(ItemJnlLine@1000 : Record 83) : Boolean;
    VAR
      ProdOrderRtngLine@1002 : Record 5409;
      ItemJnlPostLine@1001 : Codeunit 22;
      Operation@1003 : Boolean;
      IsHandled@1004 : Boolean;
    BEGIN
      WITH ItemJnlLine DO BEGIN
        IF "Operation No." <> '' THEN BEGIN
          IsHandled := FALSE;
          OnLastOutputOperationOnBeforeTestRoutingNo(ItemJnlLine,IsHandled);
          IF NOT IsHandled THEN
            TESTFIELD("Routing No.");
          IF NOT ProdOrderRtngLine.GET(
               ProdOrderRtngLine.Status::Released,"Order No.",
               "Routing Reference No.","Routing No.","Operation No.")
          THEN
            ProdOrderRtngLine.GET(
              ProdOrderRtngLine.Status::Finished,"Order No.",
              "Routing Reference No.","Routing No.","Operation No.");
          IF Finished THEN
            ProdOrderRtngLine."Routing Status" := ProdOrderRtngLine."Routing Status"::Finished
          ELSE
            ProdOrderRtngLine."Routing Status" := ProdOrderRtngLine."Routing Status"::"In Progress";
          Operation := NOT ItemJnlPostLine.NextOperationExist(ProdOrderRtngLine);
        END ELSE
          Operation := TRUE;
      END;
      EXIT(Operation);
    END;

    [External]
    PROCEDURE LookupItemNo@37();
    VAR
      ItemList@1000 : Page 31;
      IsHandled@1001 : Boolean;
    BEGIN
      IsHandled := FALSE;
      OnBeforeLookupItemNo(Rec,IsHandled);
      IF IsHandled THEN
        EXIT;

      CASE "Entry Type" OF
        "Entry Type"::Consumption:
          LookupProdOrderComp;
        "Entry Type"::Output:
          LookupProdOrderLine;
        ELSE BEGIN
          //**4PS.sn
          ItemList.DetermineInterface(DATABASE::"Item Journal Line","Journal Template Name","Journal Batch Name",
            "Job No.","Service Order No.","Entry Type","Document No.",'',"Line No.",Element,"Extension Contract");
          IF Item.GET("Item No.") THEN
            ItemList.SETRECORD(Item);
          //**4PS.en
          ItemList.LOOKUPMODE := TRUE;
          IF ItemList.RUNMODAL = ACTION::LookupOK THEN BEGIN
            ItemList.GETRECORD(Item);
            VALIDATE("Item No.",Item."No.");
          END;
        END;
      END;
    END;

    LOCAL PROCEDURE LookupProdOrderLine@32();
    VAR
      ProdOrderLine@1004 : Record 5406;
      ProdOrderLineList@1001 : Page 5406;
    BEGIN
      ProdOrderLine.SetFilterByReleasedOrderNo("Order No.");
      ProdOrderLine.Status := ProdOrderLine.Status::Released;
      ProdOrderLine."Prod. Order No." := "Order No.";
      ProdOrderLine."Line No." := "Order Line No.";
      ProdOrderLine."Item No." := "Item No.";

      ProdOrderLineList.LOOKUPMODE(TRUE);
      ProdOrderLineList.SETTABLEVIEW(ProdOrderLine);
      ProdOrderLineList.SETRECORD(ProdOrderLine);

      IF ProdOrderLineList.RUNMODAL = ACTION::LookupOK THEN BEGIN
        ProdOrderLineList.GETRECORD(ProdOrderLine);
        VALIDATE("Item No.",ProdOrderLine."Item No.");
        IF "Order Line No." <> ProdOrderLine."Line No." THEN
          VALIDATE("Order Line No.",ProdOrderLine."Line No.");
      END;
    END;

    LOCAL PROCEDURE LookupProdOrderComp@11();
    VAR
      ProdOrderComp@1004 : Record 5407;
      ProdOrderCompLineList@1001 : Page 5407;
    BEGIN
      ProdOrderComp.SetFilterByReleasedOrderNo("Order No.");
      IF "Order Line No." <> 0 THEN
        ProdOrderComp.SETRANGE("Prod. Order Line No.","Order Line No.");
      ProdOrderComp.Status := ProdOrderComp.Status::Released;
      ProdOrderComp."Prod. Order No." := "Order No.";
      ProdOrderComp."Prod. Order Line No." := "Order Line No.";
      ProdOrderComp."Line No." := "Prod. Order Comp. Line No.";
      ProdOrderComp."Item No." := "Item No.";

      ProdOrderCompLineList.LOOKUPMODE(TRUE);
      ProdOrderCompLineList.SETTABLEVIEW(ProdOrderComp);
      ProdOrderCompLineList.SETRECORD(ProdOrderComp);

      IF ProdOrderCompLineList.RUNMODAL = ACTION::LookupOK THEN BEGIN
        ProdOrderCompLineList.GETRECORD(ProdOrderComp);
        IF "Prod. Order Comp. Line No." <> ProdOrderComp."Line No." THEN BEGIN
          VALIDATE("Item No.",ProdOrderComp."Item No.");
          VALIDATE("Prod. Order Comp. Line No.",ProdOrderComp."Line No.");
        END;
      END;
    END;

    [External]
    PROCEDURE RecalculateUnitAmount@38();
    VAR
      ItemJnlLine1@1000 : Record 83;
    BEGIN
      GetItem;

      IF ("Value Entry Type" <> "Value Entry Type"::"Direct Cost") OR
         ("Item Charge No." <> '')
      THEN BEGIN
        "Indirect Cost %" := 0;
        "Overhead Rate" := 0;
      END ELSE BEGIN
        "Indirect Cost %" := Item."Indirect Cost %";
        "Overhead Rate" := Item."Overhead Rate";
      END;

      "Qty. per Unit of Measure" := UOMMgt.GetQtyPerUnitOfMeasure(Item,"Unit of Measure Code");
      GetUnitAmount(FIELDNO("Unit of Measure Code"));

      ReadGLSetup;

      UpdateAmount;

      CASE "Entry Type" OF
        "Entry Type"::Purchase:
          BEGIN
            ItemJnlLine1.COPY(Rec);
            PurchPriceCalcMgt.FindItemJnlLinePrice(ItemJnlLine1,FIELDNO("Unit of Measure Code"));
            "Unit Cost" := ROUND(ItemJnlLine1."Unit Amount" * "Qty. per Unit of Measure",GLSetup."Unit-Amount Rounding Precision");
          END;
        "Entry Type"::Sale:
          "Unit Cost" := ROUND(UnitCost * "Qty. per Unit of Measure",GLSetup."Unit-Amount Rounding Precision");
        "Entry Type"::"Positive Adjmt.":
          "Unit Cost" :=
            ROUND(
              "Unit Amount" * (1 + "Indirect Cost %" / 100),GLSetup."Unit-Amount Rounding Precision") +
            "Overhead Rate" * "Qty. per Unit of Measure";
        "Entry Type"::"Negative Adjmt.":
          IF NOT "Phys. Inventory" THEN
            "Unit Cost" := UnitCost * "Qty. per Unit of Measure";
      END;

      IF "Entry Type" IN ["Entry Type"::Purchase,"Entry Type"::"Positive Adjmt."] THEN BEGIN
        IF Item."Costing Method" = Item."Costing Method"::Standard THEN
          "Unit Cost" := ROUND(UnitCost * "Qty. per Unit of Measure",GLSetup."Unit-Amount Rounding Precision");
      END;

      OnAfterRecalculateUnitAmount(Rec,xRec,CurrFieldNo);
    END;

    [External]
    PROCEDURE IsReclass@40(ItemJnlLine@1000 : Record 83) : Boolean;
    BEGIN
      IF (ItemJnlLine."Entry Type" = ItemJnlLine."Entry Type"::Transfer) AND
         ((ItemJnlLine."Order Type" <> ItemJnlLine."Order Type"::Transfer) OR (ItemJnlLine."Order No." = ''))
      THEN
        EXIT(TRUE);
      EXIT(FALSE);
    END;

    [External]
    PROCEDURE CheckWhse@39(LocationCode@1000 : Code[20];VAR QtyToPost@1002 : Decimal);
    VAR
      Location@1001 : Record 14;
    BEGIN
      Location.GET(LocationCode);
      IF Location."Require Put-away" AND
         (NOT Location."Directed Put-away and Pick") AND
         (NOT Location."Require Receive")
      THEN
        QtyToPost := 0;
    END;

    [External]
    PROCEDURE ShowDimensions@41();
    BEGIN
      DimMgt.SetCompany("Receiving Company"); //**4PS.n
      DimMgt.SetTableID(DATABASE::"Item Journal Line"); //**4PS.n
      "Dimension Set ID" :=
        DimMgt.EditDimensionSet2(
          "Dimension Set ID",STRSUBSTNO('%1 %2 %3',"Journal Template Name","Journal Batch Name","Line No."),
          "Shortcut Dimension 1 Code","Shortcut Dimension 2 Code");
    END;

    [External]
    PROCEDURE ShowReclasDimensions@30();
    BEGIN
      DimMgt.SetCompany("Receiving Company"); //**4PS.n
      DimMgt.EditReclasDimensionSet2(
        "Dimension Set ID","New Dimension Set ID",STRSUBSTNO('%1 %2 %3',"Journal Template Name","Journal Batch Name","Line No."),
        "Shortcut Dimension 1 Code","Shortcut Dimension 2 Code","New Shortcut Dimension 1 Code","New Shortcut Dimension 2 Code");
    END;

    [External]
    PROCEDURE PostingItemJnlFromProduction@43(Print@1000 : Boolean);
    VAR
      ProductionOrder@1001 : Record 5405;
      IsHandled@1002 : Boolean;
    BEGIN
      IF ("Order Type" = "Order Type"::Production) AND ("Order No." <> '') THEN
        ProductionOrder.GET(ProductionOrder.Status::Released,"Order No.");

      IsHandled := FALSE;
      OnBeforePostingItemJnlFromProduction(Rec,Print,IsHandled);
      IF IsHandled THEN
        EXIT;

      IF Print THEN
        CODEUNIT.RUN(CODEUNIT::"Item Jnl.-Post+Print",Rec)
      ELSE
        CODEUNIT.RUN(CODEUNIT::"Item Jnl.-Post",Rec);
    END;

    [External]
    PROCEDURE IsAssemblyResourceConsumpLine@87() : Boolean;
    BEGIN
      EXIT(("Entry Type" = "Entry Type"::"Assembly Output") AND (Type = Type::Resource));
    END;

    [External]
    PROCEDURE IsAssemblyOutputLine@89() : Boolean;
    BEGIN
      EXIT(("Entry Type" = "Entry Type"::"Assembly Output") AND (Type = Type::" "));
    END;

    [External]
    PROCEDURE IsATOCorrection@10() : Boolean;
    VAR
      ItemLedgEntry@1000 : Record 32;
      PostedATOLink@1001 : Record 914;
    BEGIN
      IF NOT Correction THEN
        EXIT(FALSE);
      IF "Entry Type" <> "Entry Type"::Sale THEN
        EXIT(FALSE);
      IF NOT ItemLedgEntry.GET("Applies-to Entry") THEN
        EXIT(FALSE);
      IF ItemLedgEntry."Entry Type" <> ItemLedgEntry."Entry Type"::Sale THEN
        EXIT(FALSE);
      PostedATOLink.SETCURRENTKEY("Document Type","Document No.","Document Line No.");
      PostedATOLink.SETRANGE("Document Type",PostedATOLink."Document Type"::"Sales Shipment");
      PostedATOLink.SETRANGE("Document No.",ItemLedgEntry."Document No.");
      PostedATOLink.SETRANGE("Document Line No.",ItemLedgEntry."Document Line No.");
      EXIT(NOT PostedATOLink.ISEMPTY);
    END;

    LOCAL PROCEDURE RevaluationPerEntryAllowed@45(ItemNo@1000 : Code[20]) : Boolean;
    VAR
      ValueEntry@1001 : Record 5802;
    BEGIN
      GetItem;
      IF Item."Costing Method" <> Item."Costing Method"::Average THEN
        EXIT(TRUE);

      ValueEntry.SETRANGE("Item No.",ItemNo);
      ValueEntry.SETRANGE("Entry Type",ValueEntry."Entry Type"::Revaluation);
      ValueEntry.SETRANGE("Partial Revaluation",TRUE);
      EXIT(ValueEntry.ISEMPTY);
    END;

    [External]
    PROCEDURE ClearTracking@63();
    BEGIN
      "Serial No." := '';
      "Lot No." := '';

      OnAfterClearTracking(Rec);
    END;

    [External]
    PROCEDURE CopyTrackingFromSpec@62(TrackingSpecification@1000 : Record 336);
    BEGIN
      "Serial No." := TrackingSpecification."Serial No.";
      "Lot No." := TrackingSpecification."Lot No.";

      OnAfterCopyTrackingFromSpec(Rec,TrackingSpecification);
    END;

    [External]
    PROCEDURE TrackingExists@47() : Boolean;
    BEGIN
      EXIT(("Serial No." <> '') OR ("Lot No." <> ''));
    END;

    [External]
    PROCEDURE TestItemFields@61(ItemNo@1000 : Code[20];VariantCode@1001 : Code[10];LocationCode@1002 : Code[10]);
    BEGIN
      TESTFIELD("Item No.",ItemNo);
      TESTFIELD("Variant Code",VariantCode);
      TESTFIELD("Location Code",LocationCode);
    END;

    [External]
    PROCEDURE DisplayErrorIfItemIsBlocked@83(Item@1000 : Record 27);
    BEGIN
      IF Item.Blocked THEN
        ERROR(BlockedErr);

      IF "Item Charge No." <> '' THEN
        EXIT;

      CASE "Entry Type" OF
        "Entry Type"::Purchase:
          IF Item."Purchasing Blocked" AND
             NOT ("Document Type" IN ["Document Type"::"Purchase Return Shipment","Document Type"::"Purchase Credit Memo"])
          THEN
            ERROR(PurchasingBlockedErr);
        "Entry Type"::Sale:
          IF Item."Sales Blocked" AND
             NOT ("Document Type" IN ["Document Type"::"Sales Return Receipt","Document Type"::"Sales Credit Memo"])
          THEN
            ERROR(SalesBlockedErr);
      END;

      //**4PS.sn kzwerver, 120210, c, #32054
      IF ("Entry Type" < "Entry Type"::"Positive Adjmt.") THEN
        Item.TESTFIELD("Inventory Blocked",FALSE);
      //**4PS.en
    END;

    [External]
    PROCEDURE IsPurchaseReturn@49() : Boolean;
    BEGIN
      EXIT(
        ("Document Type" IN ["Document Type"::"Purchase Credit Memo",
                             "Document Type"::"Purchase Return Shipment",
                             "Document Type"::"Purchase Invoice",
                             "Document Type"::"Purchase Receipt"]) AND
        (Quantity < 0));
    END;

    [External]
    PROCEDURE IsOpenedFromBatch@50() : Boolean;
    VAR
      ItemJournalBatch@1002 : Record 233;
      TemplateFilter@1001 : Text;
      BatchFilter@1000 : Text;
    BEGIN
      BatchFilter := GETFILTER("Journal Batch Name");
      IF BatchFilter <> '' THEN BEGIN
        TemplateFilter := GETFILTER("Journal Template Name");
        IF TemplateFilter <> '' THEN
          ItemJournalBatch.SETFILTER("Journal Template Name",TemplateFilter);
        ItemJournalBatch.SETFILTER(Name,BatchFilter);
        ItemJournalBatch.FINDFIRST;
      END;

      EXIT((("Journal Batch Name" <> '') AND ("Journal Template Name" = '')) OR (BatchFilter <> ''));
    END;

    [External]
    PROCEDURE SubcontractingWorkCenterUsed@52() : Boolean;
    VAR
      WorkCenter@1000 : Record 99000754;
    BEGIN
      IF Type = Type::"Work Center" THEN
        IF WorkCenter.GET("Work Center No.") THEN
          EXIT(WorkCenter."Subcontractor No." <> '');

      EXIT(FALSE);
    END;

    [External]
    PROCEDURE CheckItemJournalLineRestriction@161();
    BEGIN
      OnCheckItemJournalLinePostRestrictions;
    END;

    [External]
    PROCEDURE ValidateTypeWithItemNo@81();
    BEGIN
      // Validate the item type when defining a relation with another table

      // Service is not a valid item type
      // i.e items of type service cannot be in a relation with another table
      IF Item.IsServiceType THEN
        Item.TESTFIELD(Type,Item.Type::Inventory);

      // Non-inventoriable item types are valid only for the following entry types
      IF Item.IsNonInventoriableType AND
         NOT ("Entry Type" IN ["Entry Type"::Consumption,"Entry Type"::"Assembly Consumption"])
      THEN
        Item.TESTFIELD(Type,Item.Type::Inventory);
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterSetupNewLine@71(VAR ItemJournalLine@1000 : Record 83;VAR LastItemJournalLine@1001 : Record 83;ItemJournalTemplate@1002 : Record 82);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterClearTracking@98(VAR ItemJournalLine@1000 : Record 83);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyItemJnlLineFromSalesHeader@64(VAR ItemJnlLine@1001 : Record 83;SalesHeader@1000 : Record 36);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyItemJnlLineFromSalesLine@65(VAR ItemJnlLine@1001 : Record 83;SalesLine@1000 : Record 37);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyItemJnlLineFromPurchHeader@66(VAR ItemJnlLine@1001 : Record 83;PurchHeader@1000 : Record 38);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyItemJnlLineFromPurchLine@67(VAR ItemJnlLine@1001 : Record 83;PurchLine@1000 : Record 39);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyItemJnlLineFromServHeader@69(VAR ItemJnlLine@1001 : Record 83;ServHeader@1000 : Record 5900);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyItemJnlLineFromServLine@70(VAR ItemJnlLine@1001 : Record 83;ServLine@1000 : Record 5902);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyItemJnlLineFromServShptHeader@72(VAR ItemJnlLine@1001 : Record 83;ServShptHeader@1000 : Record 5990);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyItemJnlLineFromServShptLine@73(VAR ItemJnlLine@1001 : Record 83;ServShptLine@1000 : Record 5991);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyItemJnlLineFromServShptLineUndo@74(VAR ItemJnlLine@1001 : Record 83;ServShptLine@1000 : Record 5991);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyItemJnlLineFromJobJnlLine@75(VAR ItemJournalLine@1001 : Record 83;JobJournalLine@1000 : Record 11072008);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyTrackingFromSpec@80(VAR ItemJournalLine@1000 : Record 83;TrackingSpecification@1001 : Record 336);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyFromProdOrderComp@85(VAR ItemJournalLine@1000 : Record 83;ProdOrderComponent@1001 : Record 5407);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyFromProdOrderLine@92(VAR ItemJournalLine@1000 : Record 83;ProdOrderLine@1001 : Record 5406);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyFromWorkCenter@94(VAR ItemJournalLine@1000 : Record 83;WorkCenter@1001 : Record 99000754);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCopyFromMachineCenter@95(VAR ItemJournalLine@1000 : Record 83;MachineCenter@1001 : Record 99000758);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterGetItemChange@99(VAR Item@1000 : Record 27;VAR ItemJournalLine@1001 : Record 83);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterGetUnitAmount@106(VAR ItemJournalLine@1000 : Record 83);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterItemPosting@102(VAR ProdOrderRoutingLine@1000 : Record 5409;VAR NextOperationNoIsEmpty@1001 : Boolean;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration(DEFAULT,TRUE)]
    LOCAL PROCEDURE OnAfterOnValidateItemNoAssignByEntryType@68(VAR ItemJournalLine@1000 : Record 83;VAR Item@1001 : Record 27);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterCreateDimTableIDs@164(VAR ItemJournalLine@1000 : Record 83;CallingFieldNo@1001 : Integer;VAR TableID@1003 : ARRAY [10] OF Integer;VAR No@1002 : ARRAY [10] OF Code[20]);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterReadGLSetup@113(VAR GeneralLedgerSetup@1000 : Record 98);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterRecalculateUnitAmount@108(VAR ItemJournalLine@1000 : Record 83;xItemJournalLine@1001 : Record 83;CurrentFieldNo@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterUpdateAmount@78(VAR ItemJournalLine@1000 : Record 83);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeCheckItemAvailable@111(ItemJournalLine@1000 : Record 83;CalledByFieldNo@1001 : Integer;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeGetUnitAmount@107(VAR ItemJournalLine@1000 : Record 83;CalledByFieldNo@1001 : Integer;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeLookupItemNo@112(VAR ItemJournalLine@1000 : Record 83;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforePostingItemJnlFromProduction@96(VAR ItemJournalLine@1000 : Record 83;Print@1001 : Boolean;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeRetrieveCosts@82(VAR ItemJournalLine@1000 : Record 83;VAR UnitCost@1001 : Decimal;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeSelectItemEntry@101(VAR ItemJournalLine@1000 : Record 83;xItemJournalLine@1001 : Record 83;CurrentFieldNo@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeValidateUnitOfMeasureCode@110(VAR ItemJournalLine@1000 : Record 83;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeVerifyReservedQty@77(VAR ItemJournalLine@1000 : Record 83;xItemJournalLine@1001 : Record 83;CalledByFieldNo@1002 : Integer);
    BEGIN
    END;

    LOCAL PROCEDURE ConfirmOutputOnFinishedOperation@79();
    VAR
      ProdOrderRtngLine@1000 : Record 5409;
    BEGIN
      IF ("Entry Type" <> "Entry Type"::Output) OR ("Output Quantity" = 0) THEN
        EXIT;

      IF NOT ProdOrderRtngLine.GET(
           ProdOrderRtngLine.Status::Released,"Order No.","Routing Reference No.","Routing No.","Operation No.")
      THEN
        EXIT;

      IF ProdOrderRtngLine."Routing Status" <> ProdOrderRtngLine."Routing Status"::Finished THEN
        EXIT;

      IF NOT CONFIRM(FinishedOutputQst) THEN
        ERROR(UpdateInterruptedErr);
    END;

    [Integration(TRUE)]
    LOCAL PROCEDURE OnCheckItemJournalLinePostRestrictions@90();
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnCreateAssemblyDimOnAfterCreateDimSetIDArr@103(VAR ItemJournalLine@1000 : Record 83;VAR DimSetIDArr@1002 : ARRAY [10] OF Integer;VAR i@1001 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnCreateProdDimOnAfterCreateDimSetIDArr@14(VAR ItemJournalLine@1000 : Record 83;VAR DimSetIDArr@1002 : ARRAY [10] OF Integer;VAR i@1001 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnLastOutputOperationOnBeforeTestRoutingNo@97(VAR ItemJournalLine@1000 : Record 83;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnSelectItemEntryOnBeforeOpenPage@104(VAR ItemLedgerEntry@1000 : Record 32;ItemJournalLine@1001 : Record 83);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateItemNoOnAfterGetItem@88(VAR ItemJournalLine@1000 : Record 83;Item@1001 : Record 27);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateOrderNoOrderTypeProduction@105(VAR ItemJournalLine@1000 : Record 83;ProductionOrder@1001 : Record 5405);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateQuantityOnBeforeGetUnitAmount@100(VAR ItemJournalLine@1000 : Record 83;xItemJournalLine@1001 : Record 83;CallingFieldNo@1002 : Integer);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnValidateUnitOfMeasureCodeOnBeforeCalcUnitCost@109(VAR ItemJournalLine@1000 : Record 83;VAR UnitCost@1001 : Decimal;VAR IsHandled@1002 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeValidateScrapCode@314(VAR ItemJournalLine@1000 : Record 83;VAR IsHandled@1001 : Boolean);
    BEGIN
    END;

    PROCEDURE GetUnitPrice@6506();
    BEGIN
      //**4PS
      IF "Entry Type" <> "Entry Type"::Sale THEN
        EXIT;

      InventorySetup.GET;

      //Bundle Price
      IF "Location Code" <> '' THEN BEGIN
        IF InventorySetup."Use Bundle Price" THEN BEGIN
          LocRec.GET("Location Code");
          IF LocRec.Bundle THEN BEGIN
            "Unit Cost" := LocRec."Purchase Price";
            EXIT;
          END;
        END;
      END;

      //Item/SKU Price
      RetrieveCosts;

      ReadGLSetup;
      "Unit Cost" := ROUND(UnitCost * "Qty. per Unit of Measure",GLSetup."Unit-Amount Rounding Precision");

      IF (NOT InventorySetup."Item Sales Price for Proj/Serv") THEN BEGIN
        VALIDATE("Unit Amount","Unit Cost");
        Amount := ROUND(Quantity * "Unit Amount");
      END ELSE BEGIN
        GetUnitAmount(0);
        UpdateAmount;
      END;
    END;

    PROCEDURE CheckCompanyIC@1210190032();
    VAR
      lvCompName@1210190000 : Text[50];
    BEGIN
      //**4PS
      IF "Receiving Company" <> '' THEN
        lvCompName := "Receiving Company"
      ELSE
        lvCompName := COMPANYNAME;

      ICProjSetupRec.CHANGECOMPANY(lvCompName);
      ProjRec.CHANGECOMPANY(lvCompName);
      ProjElemRec.CHANGECOMPANY(lvCompName);
      ProjLocRec.CHANGECOMPANY(lvCompName);
      LocRec.CHANGECOMPANY(lvCompName);
      ExtRec.CHANGECOMPANY(lvCompName);
      ServOrderRec.CHANGECOMPANY(lvCompName);
      PlantSetupRec.CHANGECOMPANY(lvCompName);
      PlantTypeRec.CHANGECOMPANY(lvCompName);
      PlantNoRec.CHANGECOMPANY(lvCompName);
      CostCompPlantRec.CHANGECOMPANY(lvCompName);
      CostCompRec.CHANGECOMPANY(lvCompName);
      GLAcc.CHANGECOMPANY(lvCompName);
      DimValRec.CHANGECOMPANY(lvCompName);
      AssemblyYardNumberObject.CHANGECOMPANY(lvCompName);
      InventorySetup.CHANGECOMPANY(lvCompName);

      ICProjSetupRec.GET;
    END;

    PROCEDURE RefersToOtherCompany@1100525032() : Boolean;
    BEGIN
      //**4PS
      EXIT(("Receiving Company" <> '') AND ("Receiving Company" <> COMPANYNAME));
    END;

    PROCEDURE UpdateRelatedQuantity@1210190000(QuanNew@1210190002 : Decimal;QuanOld@1210190001 : Decimal;CheckDelete@1210190003 : Boolean);
    VAR
      lvItemJnlLine@1210190000 : Record 83;
    BEGIN
      //**4PS
      IF "Related Document (Child)" <> '' THEN BEGIN
        lvItemJnlLine.RESET;
        lvItemJnlLine.SETRANGE("Journal Template Name", "Journal Template Name");
        lvItemJnlLine.SETRANGE("Journal Batch Name", "Journal Batch Name");
        lvItemJnlLine.SETRANGE("Related Document (Parent)", "Related Document (Child)");
        IF lvItemJnlLine.FIND('-') THEN BEGIN
          lvItemJnlLine."Quantity (Released)" :=
            lvItemJnlLine."Quantity (Released)" + QuanNew - QuanOld;
          lvItemJnlLine."Quantity to Post" := lvItemJnlLine.CalcDefaultQuantityToPost;
          IF lvItemJnlLine."Quantity (Released)" > lvItemJnlLine.Quantity THEN
            ERROR(Text11012001, lvItemJnlLine."Line No.");
          IF lvItemJnlLine."Production Order" <> '' THEN
            IF lvItemJnlLine."Quantity (Released)" > lvItemJnlLine."Quantity (Produced)" THEN
              ERROR(Text11012001, lvItemJnlLine."Line No.");
          lvItemJnlLine.MODIFY(TRUE);
        END;
      END;

      IF CheckDelete = TRUE THEN BEGIN
        IF "Related Document (Parent)" <> '' THEN BEGIN
          lvItemJnlLine.RESET;
          lvItemJnlLine.SETRANGE("Journal Template Name", "Journal Template Name");
          lvItemJnlLine.SETRANGE("Journal Batch Name", "Journal Batch Name");
          lvItemJnlLine.SETRANGE("Related Document (Child)", "Related Document (Parent)");
          IF lvItemJnlLine.FIND('-') THEN BEGIN
            REPEAT
              lvItemJnlLine."Related Document (Child)" := '';
              lvItemJnlLine.MODIFY(TRUE);
            UNTIL lvItemJnlLine.NEXT = 0;
          END;
        END;

        IF "Related Document (Child)" <> '' THEN BEGIN
          lvItemJnlLine.RESET;
          lvItemJnlLine.SETRANGE("Journal Template Name", "Journal Template Name");
          lvItemJnlLine.SETRANGE("Journal Batch Name", "Journal Batch Name");
          lvItemJnlLine.SETRANGE("Related Document (Child)", "Related Document (Child)");
          IF lvItemJnlLine.COUNT = 1 THEN BEGIN
            lvItemJnlLine.RESET;
            lvItemJnlLine.SETRANGE("Journal Template Name", "Journal Template Name");
            lvItemJnlLine.SETRANGE("Journal Batch Name", "Journal Batch Name");
            lvItemJnlLine.SETRANGE("Related Document (Parent)", "Related Document (Child)");
            IF lvItemJnlLine.FIND('-') THEN BEGIN
              lvItemJnlLine."Related Document (Parent)" := '';
              lvItemJnlLine.MODIFY(TRUE);
            END;
          END;
        END;
      END;
    END;

    LOCAL PROCEDURE DeletePurchRequisitionLink@1100529800();
    VAR
      PurchReqLine@1100529800 : Record 11229331;
    BEGIN
      //**4PS
      IF "Purchase Requisition No." <> '' THEN BEGIN
        PurchReqLine.SETRANGE("Purchase Requisition No.", "Purchase Requisition No.");
        PurchReqLine.SETRANGE("Document Type", PurchReqLine."Document Type"::"Inventory Order");
        PurchReqLine.MODIFYALL("Document Type", 0, FALSE);
        PurchReqLine.MODIFYALL("Document Line No.", 0, FALSE);
      END;
    END;

    PROCEDURE CalcOverheadSurcharge@1100525005();
    VAR
      lSurchargeRec@1210190000 : Record 11020208;
      ItemLineSurcharge@1100485003 : Record 11020585;
      SurchDimValRec@1100485004 : Record 349;
      lvJobSetup@1100525001 : Record 315;
      lBaseAmount@1100485001 : Decimal;
      lTotSurchAmount@1100485008 : Decimal;
      lvServType@1100485002 : Code[20];
      DepartmentCode@1100525000 : Code[20];
    BEGIN
      //** 4PS 15-06-2010 new version with table: Item Journal Surcharge
      "Ovh.Surch.Expected Costs (LCY)" := 0;

      IF "Line No." = 0 THEN EXIT;

      ItemLineSurcharge.RESET;
      ItemLineSurcharge.SETRANGE("Journal Template Name", "Journal Template Name");
      ItemLineSurcharge.SETRANGE("Journal Batch Name", "Journal Batch Name");
      ItemLineSurcharge.SETRANGE("Journal Line No.", "Line No.");
      IF NOT ItemLineSurcharge.ISEMPTY THEN
        ItemLineSurcharge.DELETEALL;

      lvJobSetup.GET;

      IF ("Shortcut Dimension 2 Code" = '') OR
         ("Entry Type" <> "Entry Type"::Sale) OR
         (("Job No." = '') AND ("Service Order No." = '')) OR
         (lvJobSetup."Ovh.Surch.CostControl" = FALSE) OR
         (Amount = 0) THEN
        EXIT;

      IF ("Receiving Company" <> '') AND ("Receiving Company" <> COMPANYNAME) THEN
        EXIT;  //db, 14-11-08: M13321

      ItemLineSurcharge.INIT;
      ItemLineSurcharge.TRANSFERFIELDS(Rec);
      ItemLineSurcharge."Line no." := 0;

      ItemLineSurcharge."Overhead Surcharge" := 0;
      ItemLineSurcharge."Overhead Surcharge Project" := 0;
      ItemLineSurcharge."Overhead Surcharge Service" := 0;

      CheckCompanyIC;
      DimMgt.GetDimValueRec(2, "Shortcut Dimension 2 Code", DimValRec, TRUE, '');

      GLSetup.GET;

      lBaseAmount := Amount;

      IF "Service Order No." <> '' THEN BEGIN

        ServOrderRec.GET("Service Order No.");
        IF "Additional Cost (Service)" = TRUE THEN
          lvServType := ServOrderRec."Service Type (Other)"
        ELSE
          lvServType := ServOrderRec."Service Type";

        DepartmentCode := "Shortcut Dimension 1 Code";

        IF lSurchargeRec.GetSurcharges(1, lvServType, '', TRUE, DimValRec."Cost Type", "Shortcut Dimension 2 Code", '',
          DepartmentCode,  '', "Cost Component", "Posting Date",
          lSurchargeRec) THEN
          REPEAT

            IF lSurchargeRec.Percentage <> 0 THEN
              ItemLineSurcharge."Overhead Surcharge Service" := ROUND(lBaseAmount * lSurchargeRec.Percentage/100)
            ELSE
              ItemLineSurcharge."Overhead Surcharge Service" := ROUND(lSurchargeRec.Amount * Quantity);

            IF ItemLineSurcharge."Overhead Surcharge Service" <> 0 THEN BEGIN
              IF lSurchargeRec."Source Type Cost Object" = lSurchargeRec."Source Type Cost Object"::Fixed THEN BEGIN
                lSurchargeRec.GetSurchargeDimVal(DimValRec, SurchDimValRec);
                ItemLineSurcharge."Shortcut Dimension 2 Code" := SurchDimValRec.Code;
                ItemLineSurcharge."Cost Type" := SurchDimValRec."Cost Type" + 1;
              END;

              IF SurchDimValRec."Cost Component" <> '' THEN
                ItemLineSurcharge."Cost Component" := SurchDimValRec."Cost Component";

              IF lSurchargeRec."Source Type Department" = lSurchargeRec."Source Type Department"::Fixed THEN BEGIN
                 ItemLineSurcharge."Shortcut Dimension 1 Code" := lSurchargeRec."Coverage Department";
              END;

              ItemLineSurcharge."Overhead Surcharge" := ItemLineSurcharge."Overhead Surcharge Service";
              ItemLineSurcharge.INSERT(TRUE);
              ItemLineSurcharge."Line no." += 1;
              lTotSurchAmount := lTotSurchAmount + ItemLineSurcharge."Overhead Surcharge Project";
            END;
          UNTIL lSurchargeRec.NEXT = 0;
      END ELSE BEGIN
        IF "Job No." <> '' THEN BEGIN

          ProjRec.GET("Job No.");

          DepartmentCode := "Shortcut Dimension 1 Code";

          IF lSurchargeRec.GetSurcharges(0, ProjRec."Project Type", "Job No.", TRUE, DimValRec."Cost Type",
            "Shortcut Dimension 2 Code", '', DepartmentCode, '', "Cost Component", "Posting Date",
             lSurchargeRec) THEN
            REPEAT
              IF lSurchargeRec.Percentage <> 0 THEN
                IF lSurchargeRec."Surcharge over Surcharge" THEN
                  ItemLineSurcharge."Overhead Surcharge Project" := ROUND(
                    (lBaseAmount + lTotSurchAmount) * lSurchargeRec.Percentage/100)
                ELSE
                  ItemLineSurcharge."Overhead Surcharge Project" := ROUND(lBaseAmount * lSurchargeRec.Percentage/100)
              ELSE
                ItemLineSurcharge."Overhead Surcharge Project" := ROUND(lSurchargeRec.Amount * Quantity);

              IF ItemLineSurcharge."Overhead Surcharge Project" <> 0 THEN BEGIN
                IF lSurchargeRec."Source Type Cost Object" = lSurchargeRec."Source Type Cost Object"::Fixed THEN BEGIN
                  lSurchargeRec.GetSurchargeDimVal(DimValRec, SurchDimValRec);
                  ItemLineSurcharge."Shortcut Dimension 2 Code" := SurchDimValRec.Code;
                  ItemLineSurcharge."Cost Type" := SurchDimValRec."Cost Type" + 1;
                END;

                IF SurchDimValRec."Cost Component" <> '' THEN
                  ItemLineSurcharge."Cost Component" := SurchDimValRec."Cost Component";

                IF lSurchargeRec."Source Type Department" = lSurchargeRec."Source Type Department"::Fixed THEN BEGIN
                  ItemLineSurcharge."Shortcut Dimension 1 Code" := lSurchargeRec."Coverage Department";
                END;

                IF lSurchargeRec."Element Surcharge" <> '' THEN
                  ItemLineSurcharge.Element := lSurchargeRec."Element Surcharge";

                ItemLineSurcharge."Overhead Surcharge" := ItemLineSurcharge."Overhead Surcharge Project" ;
                ItemLineSurcharge.INSERT(TRUE);
                ItemLineSurcharge."Line no." += 1;
                lTotSurchAmount := lTotSurchAmount + ItemLineSurcharge."Overhead Surcharge Project";
              END;
            UNTIL lSurchargeRec.NEXT = 0;
        END;
      END;

      "Ovh.Surch.Expected Costs (LCY)" := lTotSurchAmount;
    END;

    PROCEDURE DeleteSurcharge@1100525007();
    VAR
      ItemLineSurcharge@1100525000 : Record 11020585;
    BEGIN
      //**4PS
      ItemLineSurcharge.RESET;
      ItemLineSurcharge.SETRANGE("Journal Template Name", "Journal Template Name");
      ItemLineSurcharge.SETRANGE("Journal Batch Name", "Journal Batch Name");
      ItemLineSurcharge.SETRANGE("Journal Line No.", "Line No.");
      IF NOT ItemLineSurcharge.ISEMPTY THEN
        ItemLineSurcharge.DELETEALL;
    END;

    PROCEDURE UpdateCostControlStatus@1100485013(lUpdateAction@1100485002 : 'Insert,Modify,Delete');
    VAR
      ActionType@1100528400 : 'Insert,Modify,Delete';
    BEGIN
      //**4PS
      CASE lUpdateAction OF
        lUpdateAction::Insert, lUpdateAction::Delete:
          BEGIN
            IF ("Receiving Company" = '') AND ("Job No." <> '') THEN BEGIN
              ProjRec.CHANGECOMPANY("Receiving Company");
              IF ProjRec.GET("Job No.") THEN
                ProjRec.UpdateCostControlStatus(lUpdateAction, xRec."Shortcut Dimension 2 Code", "Shortcut Dimension 2 Code");
            END;
          END;
        lUpdateAction::Modify:
          BEGIN
            //Update xRec, handle as delete
            IF ((xRec."Receiving Company" <> "Receiving Company") OR (xRec."Job No." <> "Job No.")) AND
               ((xRec."Receiving Company" = '') AND (xRec."Job No." <> '')) THEN BEGIN
              ProjRec.CHANGECOMPANY(xRec."Receiving Company");
              IF ProjRec.GET(xRec."Job No.") THEN
                ProjRec.UpdateCostControlStatus(lUpdateAction::Delete, xRec."Shortcut Dimension 2 Code", "Shortcut Dimension 2 Code");
            END;
            //Update Rec
            IF ("Receiving Company" = '') AND ("Job No." <> '') THEN BEGIN
              ProjRec.CHANGECOMPANY("Receiving Company");
              IF "Job No." = xRec."Job No." THEN
                ActionType := ActionType::Modify
              ELSE
                ActionType := ActionType::Insert;
              IF ProjRec.GET("Job No.") THEN
                ProjRec.UpdateCostControlStatus(ActionType, xRec."Shortcut Dimension 2 Code", "Shortcut Dimension 2 Code");
            END;
          END;
      END;
    END;

    PROCEDURE CheckPlantCostComponentType@1100485000();
    VAR
      lvText11012000@1100485001 : TextConst 'ENU=may not be %1 (%2);NOR=kan ikke v‘re %1 (%2);SVE=f†r inte vara %1 (%2)';
    BEGIN
      //**4PS
      IF ("Cost Component Plant" = '') THEN
        EXIT;

      PlantSetupRec.GET;

      IF ("Cost Component Plant" = PlantSetupRec."Cost Component Acquisition") THEN
        FIELDERROR("Cost Component Plant",
          STRSUBSTNO(lvText11012000, PlantSetupRec.FIELDCAPTION("Cost Component Acquisition"), "Cost Component Plant"));
      IF ("Cost Component Plant" = PlantSetupRec."Cost Component Rent") THEN
        FIELDERROR("Cost Component Plant",
          STRSUBSTNO(lvText11012000, PlantSetupRec.FIELDCAPTION("Cost Component Rent"), "Cost Component Plant"));
    END;

    PROCEDURE ValidateShelf@1100485016();
    VAR
      StockkeepingUnit@1100409000 : Record 5700;
    BEGIN
      //**4PS
      "Shelf No." := '';
      IF "Location Code" <> '' THEN BEGIN
        IF NOT StockkeepingUnit.GET("Location Code","Item No.","Variant Code") THEN
          StockkeepingUnit.INIT;
        "Shelf No." := StockkeepingUnit."Shelf No.";
      END;
      IF "Shelf No." = '' THEN
        IF Item.GET("Item No.") THEN
          "Shelf No." := Item."Shelf No.";
    END;

    PROCEDURE CheckCostCompServOrderType@1100485018();
    BEGIN
      //**4PS
      CheckCompanyIC;  //db, 11-05-11: M23927
      CostCompRec.CheckDefaultCostComponent("Service Order No.", "Cost Component", "Receiving Company", "Cost Type"-1,
        "Additional Cost (Service)");  //db, 24-02-10
    END;

    LOCAL PROCEDURE CheckItemEntrySales@1100525000();
    VAR
      lvJobLedgerEntry@1100525000 : Record 11072005;
      lvServiceLedgerEntry@1100525001 : Record 11012819;
      lvCompName@1100525002 : Text[250];
    BEGIN
      //**4PS
      IF ((PrevCheckedItemJnlLineRec."Item No." = "Item No.") AND
         (PrevCheckedItemJnlLineRec."Entry Type" = "Entry Type") AND
         (PrevCheckedItemJnlLineRec.Quantity = Quantity) AND
         (PrevCheckedItemJnlLineRec."Job No." = "Job No.") AND
         (PrevCheckedItemJnlLineRec."Service Order No." = "Service Order No.")) OR
         (CurrFieldNo = 0) THEN BEGIN
        //due to validations calling each other it is possible that this function is called more than once when a user changes a single
        //value. This code prevents the same message popping up serveral times
        EXIT;
      END ELSE BEGIN
        PrevCheckedItemJnlLineRec := Rec;
      END;
      IF ((("Entry Type" = "Entry Type"::Sale) AND (Quantity < 0))
          OR
          (("Entry Type" = "Entry Type"::Purchase) AND (Quantity > 0)))
          AND
         ("Item No." <> '') AND
         (("Job No." <> '') OR ("Service Order No." <> ''))
      THEN BEGIN
      //Callg: 16108, 29-04-2010
      //Replaced by search actions in job entries or service entries, can also be purchase next to inventory transaction

      //  ItemLedgEntry.SETCURRENTKEY("Item No.", "Entry Type", "Variant Code" , "Drop Shipment" ,"Location Code","Posting Date");
      //  ItemLedgEntry.SETRANGE("Entry Type","Entry Type"::Sale);
      //  ItemLedgEntry.SETRANGE("Item No.", "Item No.");
      //  ItemLedgEntry.SETRANGE("Job No.", "Job No.");
      //  ItemLedgEntry.SETRANGE("Service Order No.", "Service Order No.");
      //  IF NOT ItemLedgEntry.FINDFIRST THEN BEGIN
      //    IF "Job No." <> '' THEN
      //      MESSAGE(Text11012002, "Item No.", ProjRec.TABLECAPTION, "Job No.")
      //    ELSE
      //      MESSAGE(Text11012002, "Item No.", ServOrderRec.TABLECAPTION, "Service Order No.");
      //  END;

        IF "Receiving Company" <> '' THEN  //db, 28-01-11: M24812
          lvCompName := "Receiving Company"
        ELSE
          lvCompName := COMPANYNAME;

        IF "Job No." <> '' THEN BEGIN
          lvJobLedgerEntry.RESET;
          lvJobLedgerEntry.CHANGECOMPANY(lvCompName);  //db, 28-01-11: M24812
          lvJobLedgerEntry.SETCURRENTKEY("Job No.");
          lvJobLedgerEntry.SETRANGE("Job No.", "Job No.");
          lvJobLedgerEntry.SETRANGE("Entry Type", lvJobLedgerEntry."Entry Type"::Usage);
          lvJobLedgerEntry.SETRANGE("Item No.", "Item No.");
          IF NOT lvJobLedgerEntry.FINDFIRST THEN
            MESSAGE(Text11012002, "Item No.", ProjRec.TABLECAPTION, "Job No.")
        END;

        IF "Service Order No." <> '' THEN BEGIN
          lvServiceLedgerEntry.RESET;
          lvServiceLedgerEntry.CHANGECOMPANY(lvCompName);  //db, 28-01-11: M24812
          lvServiceLedgerEntry.SETCURRENTKEY("Service Order No.");
          lvServiceLedgerEntry.SETRANGE("Service Order No.", "Service Order No.");
          lvServiceLedgerEntry.SETFILTER("Total Cost (LCY)", '<>%1', 0);
          lvServiceLedgerEntry.SETRANGE("Item No.", "Item No.");
          IF NOT lvServiceLedgerEntry.FINDFIRST THEN
            MESSAGE(Text11012002, "Item No.", ServOrderRec.TABLECAPTION, "Service Order No.");
        END;
      END;
    END;

    LOCAL PROCEDURE CheckGLAcc@1100525002();
    BEGIN
      //**4PS
      GLAcc.CheckGLAcc;
      IF GLAcc."Direct Posting" OR ("Journal Template Name" = '') THEN
        EXIT;
      IF "Posting Date" <> 0D THEN
        IF "Posting Date" = CLOSINGDATE("Posting Date") THEN
          EXIT;
      IF ("Job No." = '') AND ("Service Order No." = '') AND ("Plant Type" = '') THEN
        GLAcc.TESTFIELD("Direct Posting",TRUE);
    END;

    PROCEDURE CheckAdditionalCostService@1100525006();
    BEGIN
      //**4PS
      //db, 24-02-10
      IF "Service Order No." = '' THEN EXIT;
      CheckCompanyIC;
      IF NOT ServOrderRec.GET("Service Order No.") THEN EXIT;

      IF NOT "Add. Cost Changed Manually" THEN
        "Additional Cost (Service)" :=
          ServOrderRec.GetAdditionalCostService("Service Order No.","Shortcut Dimension 2 Code","Cost Type","Receiving Company", Rec);
      //No dimension for project or serviceorder in case of IC; M27664 and M27668
      IF ("Receiving Company" = '') OR ("Receiving Company" = COMPANYNAME) THEN BEGIN //M27664 and M27668
        IF ("Service Order No." <> xRec."Service Order No.") OR
           ("Additional Cost (Service)" <> xRec."Additional Cost (Service)")
        THEN BEGIN
          IF "Additional Cost (Service)" THEN
            VALIDATE("Shortcut Dimension 1 Code", ServOrderRec."Department Code (Other)")
          ELSE
            VALIDATE("Shortcut Dimension 1 Code", ServOrderRec."Global Dimension 1 Code");
        END;
      END;

      IF (CurrFieldNo = FIELDNO("Service Order No.")) OR (CurrFieldNo = FIELDNO("Shortcut Dimension 2 Code")) OR
         (CurrFieldNo = FIELDNO("Item No.")) THEN BEGIN
        IF ("Service Order No." <> xRec."Service Order No.") OR
           ("Cost Type" <> xRec."Cost Type") THEN BEGIN
          VALIDATE("Cost Component");
        END;
      END;
    END;

    PROCEDURE ValidateAdditionalCost@1100525003();
    VAR
      CostCompRec@1100525001 : Record 11012012;
      SaveCostComp@1100525000 : Text[30];
    BEGIN
      //**4PS
      SaveCostComp := "Cost Component";
      IF CurrFieldNo = FIELDNO("Additional Cost (Service)") THEN
        "Add. Cost Changed Manually" := TRUE;
      TESTFIELD("Service Order No.");
      VALIDATE("Service Order No.");
      IF CurrFieldNo <> FIELDNO("Additional Cost (Service)") THEN EXIT;  //db, 18-03-10: T4641

      CostCompRec.CHANGECOMPANY("Receiving Company");
      IF CostCompRec.GET(SaveCostComp) THEN BEGIN
         "Cost Component" := SaveCostComp;
         IF ("Additional Cost (Service)" = TRUE) THEN BEGIN
           IF (CostCompRec."Cost Component (Add.Cost)" <> '') THEN
             "Cost Component" := CostCompRec."Cost Component (Add.Cost)";
         END ELSE BEGIN
           CostCompRec.SETRANGE("Cost Component (Add.Cost)", SaveCostComp);
           IF CostCompRec.FINDSET THEN BEGIN
             REPEAT
               IF (CostCompRec."Cost Component (Add.Cost)" = SaveCostComp) THEN
                 "Cost Component" := CostCompRec.Code;
             UNTIL CostCompRec.NEXT = 0;
           END;
         END;
      END;
    END;

    PROCEDURE ValidateCostComponent@1100525001();
    VAR
      CostCompRec@1100525000 : Record 11012012;
      CostCompRec2@1100525001 : Record 11012012;
    BEGIN
      //**4PS
      IF CurrFieldNo <> FIELDNO("Cost Component") THEN EXIT;  //db, 18-03-10: T4642

      IF "Cost Component" = '' THEN
        EXIT;

      CostCompRec.CHANGECOMPANY("Receiving Company");
      CostCompRec2.CHANGECOMPANY("Receiving Company");
      CostCompRec.GET("Cost Component");
      //db.sn, 06-12-10: M24263
      IF CostCompRec."Additional Cost (Service)" THEN BEGIN
        CostCompRec2.SETRANGE("Cost Component (Add.Cost)", "Cost Component");
        IF NOT CostCompRec2.FINDFIRST THEN
          EXIT;
      END ELSE
        IF CostCompRec."Cost Component (Add.Cost)" = '' THEN
          EXIT;
      //db.en, 06-12-10: M24263
      "Additional Cost (Service)" := CostCompRec."Additional Cost (Service)";
    END;

    PROCEDURE SetProjectStock@1100525004();
    BEGIN
      //**4PS
      InventorySetup.GET;
      IF (NOT InventorySetup."Default Do Not Use Proj. Stock") AND
        ("Job No." <> '') AND
        ("Entry Type" IN ["Entry Type"::Purchase,"Entry Type"::Sale]) AND
        (InventorySetup.JobInventoryByStockRelease("Job No.") OR
        InventorySetup.JobInventoryByLocationShelf("Job No."))
      THEN
        "Project Stock" := TRUE;

      IF CurrFieldNo <> 0 THEN
        CheckDefaultBin;  //**4PS.n (db, 02-11-10)
    END;

    PROCEDURE DPA_GetFieldNoDepartmentFilter@1100000993() : Integer;
    BEGIN
      //**4PS Generated Code - Do Not Change
      EXIT(0);
    END;

    PROCEDURE DPA_GetFiltersFltrGrp@1100000997(FilterGroupNo@1100525000 : Integer) FilterText : Text[250];
    BEGIN
      //**4PS Generated Code - Do Not Change
      FILTERGROUP(FilterGroupNo);
      FilterText := COPYSTR(GETFILTERS, 1, MAXSTRLEN(FilterText));
      FILTERGROUP(0);
    END;

    PROCEDURE DPA_SetFilters@1100000998(Context@1100525000 : Text[30]) : Boolean;
    VAR
      RecRef@1100525003 : RecordRef;
      i@1100525004 : Integer;
    BEGIN
      //**4PS Generated Code - Do Not Change
      IF NOT DPA_IsActive THEN
        EXIT;

      RecRef.GETTABLE(Rec);
      DPA_Management.SetDPAFilterFromContext(
        RecRef,
        Context,
        DPA_GetFieldNoDepartmentCode,
        DPA_GetFieldNoDepartmentFilter );

      FOR i := 10 DOWNTO 0 DO BEGIN
        RecRef.FILTERGROUP(i);
        FILTERGROUP(i);
        SETVIEW(RecRef.GETVIEW(FALSE));
      END;

      EXIT(DPA_Management.IsHardFilter);
    END;

    LOCAL PROCEDURE DPA_IsActive@1100000999() : Boolean;
    VAR
      DepartmentAuthorizObject@1100526000 : Record 11012466;
      FPSLicenseManagement@1100527400 : Codeunit 11229289;
    BEGIN
      //**4PS Generated Code - Do Not Change
      IF NOT FPSLicenseManagement.LicenseAndReadPermissionForTable(DepartmentAuthorizObject) THEN
        EXIT(FALSE);

      IF NOT DPA_Management.AuthorizationActive THEN
        EXIT(FALSE);

      EXIT(TRUE);
    END;

    PROCEDURE DPA_FindRecWithDPAFilterAppld@1100000989();
    BEGIN
      //**4PS Generated Code - Do Not Change
      IF NOT DPA_IsActive THEN BEGIN
        FIND;
        EXIT;
      END;

      IF NOT DPA_Management.HasTableHardFilter(83) THEN BEGIN
        FIND;
        EXIT;
      END;

      DPA_SetFilters('Table 83');
      IF NOT FIND THEN
        DPA_Management.RaiseDPAErrorForTable(TABLECAPTION);
    END;

    PROCEDURE DPA_ChkDepartmentCodeAllowed@1100000990(IsHardFilter@1100526000 : Boolean);
    VAR
      DimensionManagement@1100526001 : Codeunit 408;
    BEGIN
      //**4PS Generated Code - Do Not Change
      DimensionManagement.CheckDepartmAuthWithFilterType(
        DATABASE::"Item Journal Line", "Shortcut Dimension 1 Code", IsHardFilter);
    END;

    PROCEDURE DPA_GetFieldNoDepartmentCode@1100000994() : Integer;
    BEGIN
      //**4PS Generated Code - Do Not Change
      EXIT(FIELDNO("Shortcut Dimension 1 Code"));
    END;

    PROCEDURE DPA_SetDefaultDepartment@1100000996();
    BEGIN
      //**4PS Generated Code - Do Not Change
      IF NOT DPA_IsActive THEN
        EXIT;

      DPA_Management.SetDepartmentCodeUser(TABLENAME, "Shortcut Dimension 1 Code");
    END;

    PROCEDURE CheckDefaultBin@1100526201();
    BEGIN
      //**4PS
      //db, 02-11-10
      IF "Project Stock" = FALSE THEN EXIT;
      "Bin Code (Project Inventory)" := WMSManagement.GetDefaultBinLocation(
        "Job No.","Service Order No.","Location Code","Item No.","Variant Code",TRUE);  //db, 30-03-11
    END;

    PROCEDURE CalcDefaultQuantityToPost@1100528401() : Decimal;
    BEGIN
      //**4PS
      EXIT(Quantity - "Quantity (Released)");
    END;

    PROCEDURE CalcQuantityToPostBase@1100528400() : Decimal;
    BEGIN
      //**4PS
      EXIT(UOMMgt.CalcBaseQty("Quantity to Post","Qty. per Unit of Measure"));
    END;

    LOCAL PROCEDURE ValidateQuantityToPost@1100528402();
    BEGIN
      //**4PS
      IF Quantity >= 0 THEN BEGIN
        IF "Quantity to Post" > Quantity THEN
          ERROR(Text11012004, Quantity)
      END ELSE
        IF "Quantity to Post" < Quantity THEN
          ERROR(Text11012004, Quantity);
    END;

    LOCAL PROCEDURE LookupEntityNo@1100528403();
    BEGIN
      //**4PS
      CheckCompanyIC;

      AssemblyYardNumberObject."Project No." := "Job No.";
      AssemblyYardNumberObject."Yard No." := "Yard No.";
      AssemblyYardNumberObject."Entity Type" := "Entity Type";
      AssemblyYardNumberObject."System No." := "System No.";
      AssemblyYardNumberObject."Entity No." := "Entity No.";

      AssemblyYardNumberObject.SETRANGE("Project No.", "Job No.");
      AssemblyYardNumberObject.SETRANGE("Yard No.", "Yard No.");
      AssemblyYardNumberObject.SETRANGE("Entity Type", "Entity Type");
      AssemblyYardNumberObject.SETRANGE("System No.", "System No.");

      IF PAGE.RUNMODAL(0, AssemblyYardNumberObject) = ACTION::LookupOK THEN
        VALIDATE("Entity No.", AssemblyYardNumberObject."Entity No.");
    END;

    LOCAL PROCEDURE ClearEditableAssemYardNoFields@1100528405();
    BEGIN
      //**4PS
      IF "Job No." <> xRec."Job No." THEN BEGIN
        "Entity Type" := "Entity Type"::None;
        "Entity No." := '';
      END;
    END;

    LOCAL PROCEDURE ValidateEntityType@1100528408();
    BEGIN
      //**4PS
      IF "Entity Type" <> "Entity Type" ::None THEN BEGIN
        CheckCompanyIC;
        ProjRec.GET("Job No.");
        ProjRec.TESTFIELD("Assembly Project", TRUE);
      END;

      IF "Entity Type" <> xRec."Entity Type" THEN
        "Entity No." := '';
    END;

    LOCAL PROCEDURE ValidateEntityNo@1100528409();
    BEGIN
      //**4PS
      IF "Entity No." <> '' THEN BEGIN
        CheckCompanyIC;
        AssemblyYardNumberObject.GET("Job No.", "Yard No.", "Entity Type", "System No.", "Entity No.");
      END;
    END;

    PROCEDURE IsInventoryICLine@1100528500() : Boolean;
    BEGIN
      //**4PS call C005014
      EXIT(
        ("IC Inventory Line Type" = 0) AND ("Receiving Company" <> '') AND
        ("Job No." = '') AND ("Service Order No." = '') AND
        ("Item No." <> '') AND (Quantity <> 0) AND
        ("Entry Type" IN ["Entry Type"::Purchase,"Entry Type"::Sale]));
    END;

    PROCEDURE FilterLinesWithItemToPlan@1100528569(VAR Item@1000 : Record 27;What@1100525000 : 'Inventory,Project,ServiceOrder');
    BEGIN
      //**4PS
      RESET;
      SETRANGE("Item No.", Item."No.");
      CASE What OF
        What::Project:
          SETFILTER("Job No.", '<>%1', '');
        What::ServiceOrder:
          SETFILTER("Service Order No.", '<>%1', '');
      END;
      SETFILTER("Variant Code",Item.GETFILTER("Variant Filter"));
      SETFILTER("Location Code",Item.GETFILTER("Location Filter"));
      SETFILTER("Bin Code",Item.GETFILTER("Bin Filter"));
      SETFILTER("Delivery Date",Item.GETFILTER("Date Filter"));
    END;

    PROCEDURE FindLinesWithItemToPlan@1100525008(VAR Item@1000 : Record 27;What@1100525000 : 'Inventory,Project,ServiceOrder') : Boolean;
    BEGIN
      //**4PS
      FilterLinesWithItemToPlan(Item,What);
      EXIT(FIND('-'));
    END;

    PROCEDURE LinesWithItemToPlanExist@1100525067(VAR Item@1000 : Record 27;What@1100525000 : 'Inventory,Project,ServiceOrder') : Boolean;
    BEGIN
      //**4PS
      FilterLinesWithItemToPlan(Item,What);
      EXIT(NOT ISEMPTY);
    END;

    PROCEDURE FillDefaultFscType@1100529000();
    VAR
      DimensionValue@1100528400 : Record 349;
      Job@1100528401 : Record 11072003;
    BEGIN
      //**4PS C007769
      IF ("Shortcut Dimension 2 Code" = '') THEN
        EXIT;

      DimMgt.GetDimValueRec(2, "Shortcut Dimension 2 Code", DimensionValue, FALSE, '');
      IF NOT DimensionValue."FSC Applicable" THEN
        EXIT;
      IF "Job No."= '' THEN
        EXIT;
      IF NOT Job.GET("Job No.") THEN
        EXIT;
      IF Job."FSC Type Code" <> '' THEN
        "FSC Type Code" :=  Job."FSC Type Code";
    END;

    PROCEDURE DrillDownInventory@1100528404();
    VAR
      ItemLedgerEntry@1100528400 : Record 32;
    BEGIN
      //**4PS
      ItemLedgerEntry.SETRANGE("Item No.", "Item No.");
      ItemLedgerEntry.SETRANGE("Location Code", "Location Code");
      PAGE.RUN(0, ItemLedgerEntry);
    END;

    LOCAL PROCEDURE CheckEntityNo@1100528406();
    VAR
      JobsSetup@1100528400 : Record 315;
    BEGIN
      IF "Entity Type" = "Entity Type"::None THEN
        EXIT;

      IF JobsSetup.GET AND
         JobsSetup."Entity No. Mandatory"
      THEN
        TESTFIELD("Entity No.");
    END;

    LOCAL PROCEDURE IsExistingJobOrServiceItemJlnLineQtyChanged@1100528800() : Boolean;
    BEGIN
      IF (xRec.Quantity <> 0) AND (("Job No." <> '') OR ("Service Order No." <> '')) THEN BEGIN
        ExistingJobOrServiceItemJlnLineQtyChanged := TRUE;
        EXIT(TRUE);
      END;
    END;

    PROCEDURE CheckLocationBlocked@1100527000(ILocationCode@1100527000 : Code[10]);
    VAR
      Location@1100527001 : Record 14;
    BEGIN
      //**4PS
      IF Location.GET(ILocationCode) THEN
        Location.TESTFIELD(Blocked,FALSE);
    END;

    PROCEDURE DataCaption@1100529700() : Text[250];
    VAR
      ItemJournalBatch@1100529700 : Record 233;
    BEGIN
      //**4PS
      IF ItemJournalBatch.GET("Journal Template Name","Journal Batch Name") THEN
        EXIT(ItemJournalBatch.Name + '-' + ItemJournalBatch.Description);
    END;

    PROCEDURE HandlePartialPost@1100529600(VAR ItemJournalLine@1100528400 : Record 83;VAR TempItemJournalLine@1100528401 : Record 83);
    VAR
      RestQuantity@1100528403 : Decimal;
      LineNo@1210190000 : Integer;
    BEGIN
      //**4PS
      IF ItemJournalLine.Blocked THEN
        EXIT;

      IF ItemJournalLineIsSplitLine(ItemJournalLine) THEN
        EXIT;

      IF ItemJournalLine."Quantity to Post" = 0 THEN
        ERROR(Text11012005, ItemJournalLine.FIELDCAPTION("Quantity to Post"));

      IF ItemJournalLine."Quantity to Post" > ItemJournalLine.Quantity THEN
        ItemJournalLine.VALIDATE(Quantity, ItemJournalLine."Quantity to Post");

      IF ItemJournalLine."Quantity to Post" < ItemJournalLine.Quantity THEN BEGIN
        RestQuantity := ItemJournalLine.Quantity - ItemJournalLine."Quantity to Post";
        ItemJournalLine.VALIDATE(Quantity, ItemJournalLine."Quantity to Post");
        IF Quantity > ItemJournalLine."Quantity to Post" THEN
          ItemJournalLine."Quantity (Reserved)" := Quantity - ItemJournalLine."Quantity to Post";
        ItemJournalLine.MODIFY;

        TempItemJournalLine := ItemJournalLine;
        LineNo := GetFirstFreeLineNo(ItemJournalLine, TempItemJournalLine);
        TempItemJournalLine := ItemJournalLine;
        TempItemJournalLine."Line No." := LineNo;
        TempItemJournalLine.VALIDATE(Quantity, RestQuantity);
        TempItemJournalLine.Blocked := TRUE;
        TempItemJournalLine.INSERT(TRUE);
      END;
    END;

    PROCEDURE ItemJournalLineIsSplitLine@1100529601(ItemJournalLine@1100528400 : Record 83) : Boolean;
    BEGIN
      //**4PS
      EXIT(
        (ItemJournalLine."Quantity (Released)" > 0) OR
        (ItemJournalLine."Related Document (Parent)" <> '') OR
        (ItemJournalLine."Related Document (Child)" <> ''));
    END;

    LOCAL PROCEDURE GetFirstFreeLineNo@1100529602(ItemJournalLine@1100528400 : Record 83;VAR TempItemJournalLine@1100528401 : Record 83) LineNo : Integer;
    BEGIN
      //**4PS
      LineNo := ItemJournalLine."Line No." + 1;
      WHILE ItemJournalLine.GET(
              ItemJournalLine."Journal Template Name",
              ItemJournalLine."Journal Batch Name",
              LineNo)
          OR
            TempItemJournalLine.GET(
              ItemJournalLine."Journal Template Name",
              ItemJournalLine."Journal Batch Name",
              LineNo)
      DO
        LineNo += 1;
    END;

    PROCEDURE CreateJnlLinesForPartialPosts@1100529604(VAR TempItemJournalLine@1100528400 : Record 83);
    VAR
      ItemJournalLine@1100528401 : Record 83;
    BEGIN
      //**4PS
      IF TempItemJournalLine.FINDSET THEN
        REPEAT
          ItemJournalLine := TempItemJournalLine;
          ItemJournalLine.INSERT(TRUE);
        UNTIL TempItemJournalLine.NEXT = 0;
    END;

    PROCEDURE UnblockNewJnlLinesForPartPosts@1100529603(VAR TempItemJournalLine@1100528400 : Record 83);
    VAR
      ItemJournalLine@1100528401 : Record 83;
    BEGIN
      //**4PS
      InventorySetup.GET;
      IF InventorySetup."Default Blocked" THEN
        EXIT;

      IF TempItemJournalLine.FINDSET THEN
        REPEAT
          IF ItemJournalLine.GET(
              TempItemJournalLine."Journal Template Name",
              TempItemJournalLine."Journal Batch Name",
              TempItemJournalLine."Line No.")
          THEN BEGIN
            ItemJournalLine.Blocked := FALSE;
            ItemJournalLine.MODIFY;
          END;
        UNTIL TempItemJournalLine.NEXT = 0;
    END;

    PROCEDURE GetEmployeeName@1100526003() : Text;
    VAR
      Employee@1100526000 : Record 5200;
    BEGIN
      IF ("Employee Company" <> '') AND ("Employee Company" <> COMPANYNAME) THEN
        Employee.CHANGECOMPANY("Employee Company");
      IF ("Employee No." <> '') THEN
        IF Employee.GET("Employee No.") THEN
          EXIT(Employee."Full Name");
    END;

    BEGIN
    {
      21-06-2005, Henk Sebens, Purchase Resp. Center Filter and default separated.
      4PS01 Calculate surcharge AK on commitments project.
      4PS02 JD Related to call 9927, 01-08-07,
            Do not check anymore at IC postings if Cost Center exist in receiving company.
            This will become the Cost Center of project/serviceorder in receiving company (see codeunit 23).
      4PS03 JD 09-10-07 Call 5091, fill Element from Cost Object
      4PS04 JD 14-02-08 Fill Cost component from SOType of Cost Object
      4PS05 JD 17-02-09 Call 14395 Workaround for CurrFieldNo being emptied
      4PS06 HBK 03-08-2009 Added Field Supply No.
      4PS07 HBK 14-04-2010 Added function SetProjectStock
      4PS, 06-07-2012, DP00121, Serial No. expanded to 40

      141208 ITERO.DL IME-241 Inventory dimensions are not applied when posting an inventory journal
                              solution taken from tab37/39
      160302 ITERO.DL IME367 "Dimensions are still not applied to all transactions related to inventories"
    }
    END.
  }
}

